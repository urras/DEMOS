
SED(1)                 ДЕМОС. Команды                 SED(1)


ИИММЯЯ
        sseedd - пакетный редактор

ФФООРРММААТТ
        sseedd [--nn] [--ee _к_о_м_а_н_д_а] [--ff _к_о_м__ф_а_й_л] [_ф_а_й_л]...

ООППИИССААННИИЕЕ
        Редактор sseedd переписывает информацию из _ф_а_й_л_а  (если
        аргумент  _ф_а_й_л  опущен,  то из стандартного ввода) в
        файл стандартного вывода, изменяя ее в  соответствии
        с программой редактирования.

        Если при вызове sseedd  задан  ключ  --ff,  то  программа
        редактирования  берется  из файла _к_о_м__ф_а_й_л; файлов с
        программами редактирования (и ключей --ff) может  быть
        несколько.   Если при вызове задан ключ --ee, аргумент
        _к_о_м_а_н_д_а используется в качестве программы редактиро-
        вания.   Если  не задано ни одного ключа --ff, то ключ
        --ee перед _к_о_м_а_н_д_о_й может быть опущен.  Ключ --nn подав-
        ляет вывод содержимого рабочей области, используемый
        по умолчанию.

        Программа редактирования состоит из команд, распола-
        гающихся  по одной на строке (или разделенных знаком
        ;;), и имеющих следующий формат:

             [_а_д_р_е_с [, _а_д_р_е_с]] _и_м_я__к_о_м_а_н_д_ы [_а_р_г_у_м_е_н_т_ы]

        В нормальном режиме работы sseedd  циклически  копирует
        строки  из  редактируемого  файла в _р_а_б_о_ч_у_ю _о_б_л_а_с_т_ь,
        последовательно  выполняя  все  команды,  в  _о_б_л_а_с_т_ь
        _д_е_й_с_т_в_и_я  которых входят строки, находящиеся в рабо-
        чей области; по завершению программы  редактирования
        рабочая область копируется в стандартный файл вывода
        (кроме случая, когда  задан  ключ  --nn);  после  чего
        рабочая область опустошается.

        _А_д_р_е_с_о_м в команде может быть:

        -  десятичное  число,  соответствующее   порядковому
           номеру  введенной  строки (без обнуления счетчика
           строк при переходе  к  следующему  редактируемому
           файлу);

        -  символ `$$'  -  соответствующий  последней  строке
           редактируемого файла;

        -  `//_р_е_г_у_л_я_р_н_о_е _в_ы_р_а_ж_е_н_и_е//',  практически  полностью
           совпадающее  с регулярными выражениями, применяе-
           мыми в редакторе eedd с тем отличием, что  последо-
           вательность символов `\\nn' сопоставляется с симво-
           лом новой строки, находящимся в рабочей области.

        Если при команде не задана  область  действия  (т.е.
        адреса), то команда обрабатывает каждое новое содер-
        жимое рабочей области.




                            -1-                     ДЕМОС/PV


SED(1)                 ДЕМОС. Команды                 SED(1)


        Если при команде задана область действия, то команда
        обрабатывает   каждое  содержимое  рабочей  области,
        соответствующее указанной области действия.

        Если при команде задан диапазон (т.е.  два  образца,
        разделенные  запятой),  то  она  применима  к первой
        строке, которая соответствует первому образцу и всем
        последующим  строкам включая строку, соответствующую
        второму образцу.  (Если второй адрес является  номе-
        ром строки и меньше или равен номеру строки, выбран-
        ной первым адресом, эта команда  будет  обрабатывать
        только  одну  эту  строку).  После этого в следующих
        строках обрабатываемого файла делается попытка снова
        найти строку, которая соответствует первому образцу,
        и процесс повторяется.

        Использование команды отрицания `!!' приводит к тому,
        что  следующая за ней команда (записанная на одной с
        ней строке),   применяется  только  к  тем  строкам,
        которые не попадают в указанную область действия.

        В приведенном далее списке команд  редактора  sseedd  в
        скобках  указано  максимальное  число  полей _а_д_р_е_с_а,
        допустимых для данной команды.

        Аргумент, обозначаемый _т_е_к_с_т, состоит из строк, каж-
        дая  из  которых,  исключая последнюю, заканчивается
        символом `\\', необходимым для того, чтобы  экраниро-
        вать  переход  на новую строку.  Символы `\\' тракту-
        ются редактором либо как символы `\\' в строке  подс-
        тановки  или  регулярном  выражении  команды ss, либо
        используются для вывода в результирующий  файл  при-
        сутствовавших  в  аргументе _т_е_к_с_т символов пробела и
        табуляции (символ `\\'  должен  стоять  перед  знаком
        табуляции   или  требуемым  числом  пробелов);  т.к.
        обычно пробелы и символы табуляции в  начале  каждой
        строки программы уничтожаются.

        Аргумент, обозначаемый _r_f_i_l_e или _w_f_i_l_e, должен  сто-
        ять  последним в строке, содержащей команду редакти-
        рования; команду и этот  аргумент  должен  разделять
        точно  один пробел. Для каждого аргумента _w_f_i_l_e пус-
        той файл с соответствующим  именем  создается  перед
        началом  обработки.  В командах программы редактиро-
        вания одновременно может быть задано не более десяти
        различных аргументов _w_f_i_l_e.

        (1)aa\
           _т_е_к_с_т
                Добавить. Помещает  _т_е_к_с_т  в  выходной  файл
                перед  чтением  следующей  строки  исходного
                файла. (Т.е. добавляет  _т_е_к_с_т  после  вывода
                результата    обработки    текущей   рабочей
                области).

        (2)bb _м_е_т_к_а
                Переход на команду `::' с меткой _м_е_т_к_а.  Если
                _м_е_т_к_а  отсутствует, то управление передается


                            -2-                     ДЕМОС/PV


SED(1)                 ДЕМОС. Команды                 SED(1)


                на конец программы редактирования.

        (2)cc\
           _т_е_к_с_т
                Изменить.  Команда `cc' удаляет строки,  выб-
                ранные по заданной области действия, и заме-
                щает их строками аргумента _т_е_к_с_т.

        (2)dd    Уничтожить   содержимое   рабочей   области.
                После  выполнения  этой команды sseedd начинает
                новый цикл обработки.

        (2)DD    Уничтожить начальный сегмент рабочей области
                до  первого  символа _п_е_р_е_в_о_д_а _с_т_р_о_к_и.  После
                выполнения  этой  команды  начинается  новый
                цикл обработки.

        (2)gg    Заменить содержимое рабочей области содержи-
                мым _б_у_ф_е_р_а.

        (2)GG    Добавить  содержимое  буфера  к  содержимому
                рабочей области.

        (2)hh    Заменить  содержимое  _б_у_ф_е_р_а  на  содержимое
                рабочей области. (Содержимое рабочей области
                при этом не изменяется).

        (2)HH    Добавить  содержимое   рабочей   области   к
                _б_у_ф_е_р_у.

        (1)ii\
           _т_е_к_с_т
                Вставить. Поместить _т_е_к_с_т в стандартный файл
                вывода.  (Этот текст будет выведен _д_о вывода
                результата  редактирования  текущей  рабочей
                области).

        (2)ll    Выводит содержимое рабочей области с  преоб-
                разованием  неграфических символов и табуля-
                ций в последовательности графических  симво-
                лов. Кроме того, команда `ll' переносит слиш-
                ком длинные строки.

        (2)nn    Скопировать рабочую  область  в  стандартный
                файл  вывода.  Заменить рабочую область сле-
                дующей вводимой строкой.  Таким образом, эта
                команда начинает новый цикл обработки.

        (2)NN    Добавить следующую вводимую строку к рабочей
                области, при этом рабочая область в середине
                будет  иметь  символ  _н_о_в_о_й  _с_т_р_о_к_и.   Номер
                текущей строки увеличится.

        (2)pp    Напечатать.  Копирует   содержимое   рабочей
                области в стандартный файл вывода.

        (2)PP    Копировать начальный сегмент рабочей области
                до    первого   символа   _н_о_в_о_й   _с_т_р_о_к_и   в


                            -3-                     ДЕМОС/PV


SED(1)                 ДЕМОС. Команды                 SED(1)


                стандартный файл вывода.

        (1)qq    Выйти. Перейти на конец программы редактиро-
                вания.  Эта  команда  не начинает новый цикл
                обработки, а полностью завершает работу sseedd.

        (1)rr _r_f_i_l_e
                Прочесть  содержимое  _r_f_i_l_e.   Команда   `rr'
                помещает  содержимое  _r_f_i_l_e  в выходной файл
                перед чтением новой вводимой строки.

        (2)ss//_р_е_г_у_л_я_р_н_о_е _в_ы_р_а_ж_е_н_и_е//_п_о_д_с_т_а_н_о_в_к_а//_м_о_д_и_ф_и_к_а_т_о_р
                Вставить _с_т_р_о_к_у _п_о_д_с_т_а_н_о_в_к_и вместо той части
                содержимого  рабочей области, которая сопос-
                тавилась с _р_е_г_у_л_я_р_н_ы_м _в_ы_р_а_ж_е_н_и_е_м.  Как  и  в
                редакторе  eedd, вместо символа `//' может быть
                использован любой символ.  _М_о_д_и_ф_и_к_а_т_о_р может
                быть  пуст  или может содержать конкатенацию
                следующих ключей:

                gg       Глобальная  подстановка.   Выполнить
                        подстановку  для  всех неперекрываю-
                        щихся  подцепочек  рабочей  области,
                        сопоставившихся с _р_е_г_у_л_я_р_н_ы_м _в_ы_р_а_ж_е_-
                        _н_и_е_м, а не только для  первой  такой
                        подцепочки.

                pp       Распечатать  рабочую   область   при
                        условии, что подстановка была выпол-
                        нена.

                ww _w_f_i_l_e Записать. Если была выполнена  подс-
                        тановка,   добавить  к  файлу  _w_f_i_l_e
                        (модифицированное) содержимое  рабо-
                        чей области.

                Подробное описание правил подстановки  после
                сопоставления  (такие,  как подстановка всей
                или части сопоставившейся подцепочки и т.п.)
                см. в _e_d(1).

        (2)tt _м_е_т_к_а
                Проверить. Если после самого последнего чте-
                ния очередной входной строки и после послед-
                него исполнения команды `tt'  была  проведена
                любая подстановка, то перейти на команду `::'
                с меткой  _м_е_т_к_а.   Если  _м_е_т_к_а  отсутствует,
                перейти на конец программы редактирования.

        (2)ww _w_f_i_l_e
                Записать.   Добавить   содержимое    рабочей
                области к концу файла _w_f_i_l_e.

        (2)xx    Поменять местами содержимое рабочей  области
                и содержимое буфера.

        (2)yy//_с_т_р_о_к_а_1//_с_т_р_о_к_а_2//
                Преобразовать.   Заменить   все    вхождения


                            -4-                     ДЕМОС/PV


SED(1)                 ДЕМОС. Команды                 SED(1)


                символов,  образующих _с_т_р_о_к_у_1, на соответст-
                вующие символы из _с_т_р_о_к_и_2.  Длины _с_т_р_о_к_и_1  и
                _с_т_р_о_к_и_2 должны совпадать.

        (2)!! _к_о_м_а_н_д_а
                Отрицание. Применение команды отрицания  "!!"
                приводит   к  тому,  что  следующая  за  ней
                _к_о_м_а_н_д_а (или группа  команд,  если  _к_о_м_а_н_д_о_й
                является `{{...}}'), записанная на одной с ней
                строке,  применяется только к  тем  строкам,
                которые  _н_е  соответствуют указанной области
                действия.

        (0)::_м_е_т_к_а
                По этой команде никаких действий не произво-
                дится.  При  этой  команде  стоит  _м_е_т_к_а, на
                которую можно переходить по командам  `tt'  и
                `bb'.

        (1)==    Равенство. По команде `==' в стандартный файл
                вывода  записывается номер строки, выбранной
                _а_д_р_е_с_о_м данной команды.

        (2){{    Исполнять следующую группу команд, завершаю-
                щуюся  символом  `}}',  только  тогда,  когда
                рабочая область находится в  зоне  действия,
                выбранной адресами команды `{{}'.

        Пустая команда пропускается.

ЗЗААММЕЕЧЧААННИИЯЯ
        Для редактора sseedd регулярное выражение  используемое
        в  качестве адреса должно ограничиваться только сим-
        волами '/' (в отличие от редактора eedd).

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
        _e_d(1), _g_r_e_p(1), _a_w_k(1), _m_m(1)

        Имеется отдельное описание редактора sseedd.





















                            -5-                     ДЕМОС/PV

