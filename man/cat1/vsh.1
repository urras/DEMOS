
VSH(1)                 ДЕМОС. Команды                 VSH(1)


ИИММЯЯ
        vvsshh - экранный shell.

ООППИИССААННИИЕЕ
        Команда  vvsshh  -  это  экранно-ориентированный   язык
        управления  заданиями  (_s_h_e_l_l).   Большинство команд
        задается нажатием единственной клавиши.  Эти команды
        вызывают  отображение на дисплее содержимого катало-
        гов, вызов редакторов, обращение к компиляторам.

        При входе в vvsshh, содержимое текущего каталога  отоб-
        ражается на экране.  Каждый элемент каталога помеча-
        ется буквой.  Для выбора элемента  каталога  следует
        нажать  соответствующую  ему  букву.  Что произойдет
        после выбора  зависит  от  природы  этого  элемента.
        Если  выбранный элемент каталог, vvsshh перейдет в этот
        каталог.  Если  это  текстовый  файл,  то  он  будет
        редактироваться.

        Команда vvsshh отображает на экране до двадцати  файлов
        одновременно.   Каталоги,  содержащие более двадцати
        файлов, разбиваются на страницы по двадцать  файлов.
        Всего может быть десять страниц, содержащих до двух-
        сот элементов.  Для выбора страницы  следует  нажать
        цифру  0-9.   Страницы  пронумерованы  от  первой до
        десятой.  0 определяет страницу с номером десять.

        Важной особенностью vvsshh является его связь с  компи-
        ляторами  и  редакторами.   Чтобы начать компиляцию,
        следует  нажать  MM.    Интерпретатор   vvsshh   вызовет
        _m_a_k_e(1).  Выдача протокола компиляции сохраняется, и
        позже может использоваться для анализа ошибок компи-
        ляции.   vvsshh нумерует каждую ошибку; можно указывать
        ошибку, набирая ее номер.  После этого vvsshh  вызывает
        редактор  с указанием места в соответствующем файле,
        в котором обнаружена ошибка.

        Поскольку vvsshh  является  нетрадиционным  языком,  то
        лучший  путь  для  понимания  его  работы  - это его
        использование.  vvsshh использует диалог в  виде  меню,
        это  помешает  потеряться в нем.  Для начинающих vvsshh
        проще в изучении,  чем  стандартный  _s_h_e_l_l  (sshh  или
        ccsshh).

        ППааррааммееттррыы ооккрруужжеенниияя

        vvsshh использует следующие  значения  переменных  гло-
        бальной среды:

        HHOOMMEE              Регистрационный   каталог.    Этот
                          параметр  автоматически устанавли-
                          вается системой ДЕМОС при  регист-
                          рации в системе.

        SSHHEELLLL             Командный  язык  пользователя  (по
                          умолчанию  устанавливается  систе-
                          мой).   Когда  есть  необходимость
                          выйти   в   _s_h_e_l_l,  этот  параметр


                            -1-                     ДЕМОС/PV


VSH(1)                 ДЕМОС. Команды                 VSH(1)


                          определяет   программу,    которая
                          будет использоваться.

        TTEERRMM              Тип  терминала.   Для  работы  vvsshh
                          терминал  должен иметь возможность
                          адресации курсора.

        ВВыыббоорр ффааййллаа

        Как отмечалось ранее, файл следует выбрать  нажатием
        соответствующей  этому  файлу буквы.  Что произойдет
        после выбора зависит от природы этого файла:

        Тип файла         Действие



        Каталог           Переход в новый каталог.

        Библиотека        Печать каталога содержимого библи-
                          отеки.    Эта  работа  выполняется
                          утилитами _a_r(1) и _c_p_i_o(1).

        Объектный модуль  Печать таблицы имен (внешних пере-
                          менных).

        Файл _c_o_r_e         Вызов отладчика.

        Текстовый файл    Вызов редактора.

        Остальное         Выбор невозможен.

        ООппееррааццииии сс ккааттааллооггааммии

        Прежде чем делать что-нибудь еще, пользователь  дол-
        жен  знать  команды,  которые позволяют ему выбирать
        файлы и просматривать содержимое каталогов.  В ката-
        логах,  содержащих больше двадцати файлов, пользова-
        тель должен  уметь  просматривать  каждую  страницу.
        Ниже приведен список команд и действий.

        Команда           Действие



        CCTTRRLL//DD            Выход из vvsshh

        aa-tt               Выбор соответствующего файла.

        11-99               Выбор страницы 1-9.

        00                 Выбор страницы 10.

        ++                 Выбор следующей страницы.

        ;;                 Тоже что и ++.

        --                 Выбор предыдущей страницы.


                            -2-                     ДЕМОС/PV


VSH(1)                 ДЕМОС. Команды                 VSH(1)


        CCTTRRLL//\\ (HHOOMMEE)     Переход в домашний каталог.

        //                 Переход в корневой каталог.

        ??                 Просмотр файла подсказки (_h_e_l_p).

        !!                 Выход в _s_h_e_l_l.

        %%                 Тоже что и !!.

        $$                 Выход в обычный sshh.

        <ВВКК>              Переход   в   предыдущий   каталог
                          ("..").

   Ниже приведены некоторые удобные команды.

        DD                 Просмотр даты.

        II                 Просмотр файла.  vvsshh выдает  подс-
                          казку  для  файла и отображает его
                          как  текст  в  коде  КОИ-8.    Это
                          гораздо  быстрее  чем выбор файла,
                          при котором вызывается редактор.

        PP                 Просмотр информации  о  процессах.
                          Вызывается //bbiinn//ppss.

        WW                 Просмотр списка текущих  пользова-
                          телей (wwhhoo).

   Ниже приведены более сложные команды.

        FF                 Выбор файла по имени.  vvsshh  запра-
                          шивает имя файла, после чего выби-
                          рается указанный файл.

        CC                 Создать новый файл.  vvsshh  запраши-
                          вает  имя и тип файла.  Можно соз-
                          дать как  текстовые  файлы  так  и
                          каталоги.   Можно также копировать
                          файлы и  создавать  дополнительные
                          ссылки на уже существующие файлы.

        LL                 Просмотр  списка  файлов  текущего
                          каталога в длинном формате.  Рядом
                          с именем каждого файла vvsshh отобра-
                          жает  информацию о режимах доступа
                          в таком же формате, как и  команда
                          _l_s(1).

        OO                 Выдает список допустимых команд  и
                          установленных  параметров.   После
                          этого vvsshh запрашивает  ввод  новой
                          команды  и  добавляет  ее к списку
                          уже имеющихся.




                            -3-                     ДЕМОС/PV


VSH(1)                 ДЕМОС. Команды                 VSH(1)


        РРеежжиимм ууддааллеенниияя

        Вход в _Р_е_ж_и_м _у_д_а_л_е_н_и_я осуществляется  нажатием  кла-
        виши RR.  В _р_е_ж_и_м_е _у_д_а_л_е_н_и_я файлы, выбранные для уда-
        ления  помечаются  двумя  слэшами  "//".   Повторным
        выбором  файлов  можно отменить их удаление (и снять
        пометки).  Нажатие RR второй раз приведет к  удалению
        всех помеченных файлов.  В _р_е_ж_и_м_е _у_д_а_л_е_н_и_я допустимы
        следующие команды:

        Команда           Действие



        -RReettuurrnn-          Выход из _р_е_ж_и_м_а _у_д_а_л_е_н_и_я без  уда-
                          ления помеченных файлов.

        CCTTRRLL//DD            Тоже что и -RReettuurrnn-

        aa-tt               Выбор соответствующего  файла  для
                          удаления.

        **                 Выбор всех файлов на текущей стра-
                          нице для удаления.

        00-99, ++, --         Выбор и просмотр другой  страницы.
                          Эти  команды  были описаны ранее в
                          данном руководстве в разделе  опе-
                          рации со каталогами.

        ??                 Просмотр файла подсказок (_h_e_l_p).

        RR                 Удаление помеченных файлов и выход
                          из  _р_е_ж_и_м_а _у_д_а_л_е_н_и_я.  Если  vvsshh не
                          может удалить файл, vvsshh  указывает
                          причину  и  ожидает  ответа.   Для
                          продолжения  удаления   помеченных
                          файлов   нажмите   -RReettuurrnn-.   Для
                          немедленного       выхода       из
                          _р_е_ж_и_м_а _у_д_а_л_е_н_и_я нажмите CCTTRRLL//DD.

        MMAAKKEE,, GGRREEPP ии SSHHOOWWFFIILLEE

        Интерпретатор  vvsshh  связан  с  командами  _m_a_k_e(1)  и
        _g_r_e_p(1).  vvsshh сохраняет выход этих программ и допус-
        кает изучать этот результат в _р_е_ж_и_м_е _п_р_о_с_м_о_т_р_а _ф_а_й_л_а
        (sshhoowwffiillee).  Из страницы каталога, следующие команды
        управляют mmaakkee, ggrreepp, и sshhoowwffiillee.

        GG                 _g_r_e_p(1).  vvsshh  запрашивает  шаблон
                          поиска  и  имена  файлов,  и затем
                          запускает ggrreepp  с  этими  парамет-
                          рами.   Результаты поиска сохраня-
                          ются в файле ._g_r_e_p_o_u_t и  отобража-
                          ются на экране.

        SS                 Показать   результаты   предыдущей
                          команды ggrreepp в режиме просмотра.


                            -4-                     ДЕМОС/PV


VSH(1)                 ДЕМОС. Команды                 VSH(1)


        MM                 _m_a_k_e(1)   vvsshh   запускает    mmaakkee.
                          Выполняется файл _m_a_k_e_f_i_l_e из теку-
                          щего каталога.   Результат  работы
                          команды   mmaakkee   отображается   на
                          экране и одновременно  сохраняется
                          в   файле  ._m_a_k_e_r_r_o_r.  Когда  mmaakkee
                          заканчивает работу, vvsshh отображает
                          файл ._m_a_k_e_r_r_o_r в _р_е_ж_и_м_е _п_р_о_с_м_о_т_р_а.

        NN                 _m_a_k_e(1)  запускается   в   фоновом
                          режиме.   mmaakkee стартует, но vvsshh не
                          ожидает  окончания   его   работы.
                          Результат   сохраняется   в  файле
                          ._m_a_k_e_r_r_o_r, но не высвечивается  на
                          экране.   При  завершении  команды
                          make дважды подается звуковой сиг-
                          нал.   Команда  EE используется для
                          просмотра результата,  сохранивше-
                          гося в ._m_a_k_e_r_r_o_r.

        EE                 Просмотр ошибок.  Результат работы
                          последней  команды  mmaakkee отобража-
                          ется в режиме просмотра.

        РРеежжиимм ппррооссммооттрраа ффааййллаа ((SSHHOOWWFFIILLEE))

        В режиме просмотра  отображаются  результаты  работы
        команд  mmaakkee  или ggrreepp.  Вызывается он командами EE и
        SS.   Режим  просмотра  автоматически  вызывается  во
        время  выполнения  команд MM или GG Режим просмотра по
        существу обслуживается специальным  редактором.   Он
        обеспечивает  команды просмотра файла и поиска имени
        файла  и  номера  строки  для  последующего  запуска
        редактора (для исправления ошибки в строке).

        Далее приводятся команды vvsshh,  работающие  в  режиме
        просмотра.   После  этих  команд  нет  необходимости
        нажимать -RReettuurrnn-.  Команда выполняется сразу  после
        набора.

        Команда           Действие



        _ч_и_с_л_о pp           Печать файла с указанной  (_ч_и_с_л_о_м)
                          строки.

        _ч_и_с_л_о ee           Проверить, есть ли  в  строке  имя
                          файла  и  номер  строки.  Если имя
                          файла найдено, запустится редактор
                          на этот файл.

        -RReettuurrnn-          Покажет следующие 12 строк.

        _ч_и_с_л_о -RReettuurrnn-    Тоже что и "_ч_и_с_л_о ee".

        CCTTRRLL//DD            Выход из режима просмотра.



                            -5-                     ДЕМОС/PV


VSH(1)                 ДЕМОС. Команды                 VSH(1)


        qq                 Выход из режима просмотра.

        ??                 Показать файл подсказок (hheellpp).

        Все команды, которые используются для страницы ката-
        лога  и  которые  могут  быть полезны, допустимы и в
        режиме просмотра.  Они включают ^^, //, !!, %%, и  от  AA
        до ZZ за исключением LL и RR.  Особенно полезны команды
        MM и GG, которые позволяют многократно запускать  mmaakkee
        и  ggrreepp,  команда  %%,  выхода  в sshheellll, и команда FF,
        которая позволяет редактировать файлы не найденные в
        файле, который уже был показан.

        ККооммааннддыы ууппррааввллеенниияя

        Операции в vvsshh управляются с помощью таблиц парамет-
        ров и команд.  Содержание этих таблиц можно получить
        с помощью команды OO.  Эти таблицы могут  быть  изме-
        нены  с помощью команд управления.  При входе в vvsshh,
        он просматривает файл ._v_s_h_r_c в регистрационном ката-
        логе.   Команды  управления читаются из этого файла,
        позволяя тем  самым  создавать  собственный  вариант
        командной  среды.   Команда OO также выдает подсказку
        для создания команд  управления,  позволяя  интерак-
        тивно изменять таблицы.

        Эти команды управления должны иметь такой же синтак-
        сис как и остальные команды интерпретатора.  Пробелы
        и  табуляции  разделяют  лексемы.   Неэкранированный
        символ  новой строки завершает предложение.  Символы
        могут быть экранированы предшествующим им \  (обрат-
        ным  слэшом).   Все  символы  внути  простых кавычек
        (' ') являются экранированными за исключением  самой
        простой  кавычки.   Внутри  двойных  кавычек (" ") \
        (обратный слэш) экранирует другую  двойную  кавычку;
        \n  (символ  новой  строки)  игнорируется.  Обратные
        кавычки обрабатываются как и прочие символы.   Подс-
        тановки  (такие  как $HHOOMMEE) являются пока недопусти-
        мыми.  Синтаксис сходен с синтаксисом _s_h(1)  и  нес-
        колько  отличен  от _c_s_h(1).  Обратите внимание, файл
        ._v_s_h_r_c  по  существу  добавляется  к   концу   файла
        _d_f_l_t._v_s_h_r_c (файлу стандартных команд).


















                            -6-                     ДЕМОС/PV


VSH(1)                 ДЕМОС. Команды                 VSH(1)


        Для изменения параметра, используется следующий фор-
        мат:

                _И_М_Я-_П_А_Р_А_М_Е_Т_Р_А    _З_Н_А_Ч_Е_Н_И_Е-_П_А_Р_А_М_Е_Т_Р_А

        где _И_М_Я может быть одним из следующих:

        Параметр          Назначение



        eeddiittoorr            Предпочитаемый редактор.  Значение
                          по умолчанию - //bbiinn//rreedd.

        nnmm                Таблица имен программы.   Значение
                          по умолчанию - //bbiinn//nnmm.

        ddbb                Программа-отладчик.   Значение  по
                          умолчанию - //bbiinn//aaddbb.

        mmaakkee              Программа mmaakkee.  Значение по умол-
                          чанию //bbiinn//mmaakkee.

        ggrreepp              Программа ggrreepp.  Значение по умол-
                          чанию //bbiinn//ggrreepp.

        aarr                Библиотекарь. Значение по  умолча-
                          нию //bbiinn//aarr.

        Для задания своих команд, используйте следующий фор-
        мат:

                _С_И_М_В_О_Л  _К_Л_Ю_Ч_Е_В_О_Е-_С_Л_О_В_О  [_П_А_Р_А_М_Е_Т_Р_Ы ...]

        _С_И_М_В_О_Л определяет название новой команды и ее вызов.
        Допустимы следующие символы: !! "" ## $$ %% && '' (( )) :: ** ==
        ^^ ~~ [[ ]] {{ }} << >> ,, .. // ??  и AA-ZZ.

        Ниже перечислены допустимые ключевые слова:

        Ключевое слово    Назначение



        ddaattee              Показать дату.

        sshhoowweerrrroorr         Показать ошибки предыдущего mmaakkee.

        sshhoowwggrreepp          Показать   результат   предыдущего
                          ggrreepp.

        hhoommee              Переход в регистрационный каталог.

        ggrreepp              Запуск программы ggrreepp.  vvsshh выдает
                          приглашение для ввода параметров.

        ffiillee              Выбор  файла.   Если  параметр   в
                          строке       задания       команды


                            -7-                     ДЕМОС/PV


VSH(1)                 ДЕМОС. Команды                 VSH(1)


                          присутствует,  то  этот   параметр
                          определяет файл для выбора.  Иначе
                          vvsshh выдает приглашение  для  ввода
                          имени файла.

        wwmmaakkee             Запуск программы mmaakkee  и  ожидание
                          ее завершения.

        ffmmaakkee             Запуск программы mmaakkee, без  ожида-
                          ния ее завершения.

        rreemmoovvee            Вход в _р_е_ж_и_м _у_д_а_л_е_н_и_я.

        lloonngglliisstt          Вывод списка файлов текущей  стра-
                          ницы каталога в длинном формате.

        ddiissppllaayy           Просмотр файла.  Если  параметр  в
                          строке  задания  команды  отсутст-
                          вует, vvsshh выдает  приглашение  для
                          ввода имени файла.

        ooppttiioonnss           Просмотр списка команд  vvsshh  (таб-
                          лицы  параметров  и  команд).   Не
                          выдаются команды модификации пара-
                          метров и команды создания, измене-
                          ния, удаления.

        eexxeecc              Выполнение программы (по  существу
                          это  выполнение  системного вызова
                          _e_x_e_c(2)).  Первый параметр  должен
                          быть  именем  программы.   При чем
                          необходимо  указывать  полное  имя
                          программы.    Остальные  параметры
                          становятся  при  этом  параметрами
                          данной программы.  Если необходимо
                          искать  несколько  каталогов   для
                          программ,   перенаправлять  файлы,
                          расширять  макроопределения,   или
                          расширять   регулярные   выражения
                          (шаблоны),   используются    ключи
                          sshheellll.

        sshheellll             Если в строке задания команды  нет
                          параметра,    вызывается   текущий
                          интерпретатор   командного   языка
                          (его  имя является значением пере-
                          менной SSHHEELLLL).   Если  задан  один
                          параметр,  он передается интерпре-
                          татору и выполняется как  команда.
                          Не  указывайте больше одного пара-
                          метра, если это необходимо  заклю-
                          чите передаваемую _s_h_e_l_lу команду в
                          кавычки, передавая vvsshh только один
                          параметр.

        ccrreeaattee            vvhhss запрашивает новое  имя  файла.
                          Затем создает файл.



                            -8-                     ДЕМОС/PV


VSH(1)                 ДЕМОС. Команды                 VSH(1)


        nnuullll              Команда   удаления    существующих
                          команд  vvsshh.   Команды  с  именем,
                          соответствующим символу  в  строке
                          задания команды, больше не будет.

ФФААЙЙЛЛЫЫ
        $HHOOMMEE/._v_s_h_r_c  Стартовый файл для vvsshh
        /_e_t_c/_t_e_r_m_c_a_p  Файл описаний возможностей терминалов.
        ._m_a_k_e_r_r_o_r     Файл с результатом программы mmaakkee.
        ._g_r_e_p_o_u_t      Файл  с  результатом  программы  ggrreepp.
                      vvsshh  сначала  старается  создать  этот
                      файл в рабочем каталоге.  Если это  не
                      удается,  он создает его в регистраци-
                      онном каталоге.
        $SSHHEELLLL        Интерпретатор командного языка
        //bbiinn//ppwwdd      Программа, определяющая  имя  рабочего
                      каталога.
        /_d_e_v/_n_u_l_l     Фиктивное устройство _n_u_l_l(4).

ЗЗААММЕЕЧЧААННИИЯЯ
        Программа vvsshh не имеет русских диагностик.

        Использование vvsshh слабонервными пользователями может
        привести к фатальному исходу!




































                            -9-                     ДЕМОС/PV

