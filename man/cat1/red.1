
RED(1)                 ДЕМОС. Команды                 RED(1)


ИИММЯЯ
        rreedd - полиэкранный редактор текстов.

ФФООРРММААТТ
        rreedd [[--ккллююччии]] ииммяя__ффааййллаа [[ннооммеерр__ссттррооккии]]  rreedd  [[--ккллююччии]]
        rreedd [[--ккллююччии]] -- rreedd [[--ккллююччии]] --rr ффааййлл__ппррооттооккоолл

ООППИИССААННИИЕЕ
        Редактор rreedd предназначен для редактирования и прос-
        мотра  файлов в экранном режиме.  Он позволяет прос-
        матривать на экране  терминала  один  или  несколько
        файлов,  редактировать файлы с использованием управ-
        ляющих клавиш терминала и команд редактора,  перено-
        сить  информацию  из файла в файл и проводить другие
        операции редактирования.

        Редактор вызывается с помощью команды rreedd в одном из
        следующих форматов:

        rreedd [--ккллююччии] _и_м_я__ф_а_й_л_а [_н_о_м_е_р__с_т_р_о_к_и]
                Начать  редактирование  файла   "_и_м_я__ф_а_й_л_а",
                установив  окно  на  строку  "_н_о_м_е_р__с_т_р_о_к_и";
                если номер не указан,  высвечивается  начало
                файла.

        rreedd [--ккллююччии]
                Продолжить редактирование с того  состояния,
                в  котором  был  завершен  предыдущий  сеанс
                работы с данного терминала.

        rreedd [--ккллююччии] -
                Повторить сеанс редактирования файлов  после
                сбоя системы или редактора.

        rreedd [--ккллююччии] --rr _ф_а_й_л__п_р_о_т_о_к_о_л
                Повторить сеанс редактирования, считав  про-
                токол из указанного файла.

        Ввод команд осуществляется с помощью  функциональных
        клавиш  терминала.   На  большинстве  терминалов для
        этого используется дополнительная  цифровая  клавиа-
        тура, расположенная справа для основной. Особое зна-
        чение имеет клавиша --22--,  которая изменяет  значение
        следующей  клавиши.   Если  дополнительная  цифровая
        клавиатура отсутствует или не имеет режима генерации
        управляющих      кодов,     используется     клавиша
        "_п_е_р_е_в_о_д _с_т_р_о_к_и" (LLIINNEE FFEEEEDD),  например  вместо  --11--
        вводят "ППСС"1, а вместо -22--44- - "ППСС""ППСС"4.

ККррааттккооее ооппииссааннииее ккооммаанндд
        ВВОД АРГУМЕНТА: --11--
                Начало  ввода  аргумента.  Аргументом  может
                быть строка символов или указание области на
                экране   терминала   (область   определяется
                начальным  и конечным положениями курсора) и
                представляет  собой  либо  прямоугольник  на
                экране (если начальная и конечная колонки не
                совпадают),  либо  несколько   строк   (если


                            -1-                     ДEMОС/PV


RED(1)                 ДЕМОС. Команды                 RED(1)


                начальная  и  конечная  колонки  совпадают).
                Ввод аргумента завершается вводом команды, к
                которой этот аргумент относится.

        ПЕРЕЙТИ НА: --44--
                Без аргумента -  переход  на  начало  файла.
                Аргумент  -  номер строки; пустой аргумент -
                конец файла.

        СДВИГ ВЛЕВО: --22--<ккууррссоорр ввллееввоо>

        СДВИГ ВПРАВО: --22--<ккууррссоорр ввппррааввоо>

        ЛИСТ ВПЕРЕД:  --77--

        ЛИСТ НАЗАД:   --22----77--
                Возможный аргумент - число страниц, на кото-
                рые экран перемещается по текущему файлу.

        СТРОКА ВПЕРЕД: ^^TT

        СТРОКА НАЗАД: ^^WW
                Аргумент - число строк;  пустой  аргумент  -
                вывести  текущую  строку  в верхнюю (нижнюю)
                строку окна (перемещением окна по файлу).

        ПОИСК ВПЕРЕД: --33--

        ПОИСК НАЗАД: --22----33--
                Аргумент -  текст,  который  нужно  найти  в
                файле.

        РЕЖИМ ВСТАВКИ: --55--
                Включает/выключает режим вставки;

        ИСКЛЮЧИТЬ СИМВОЛ: --66--

        ИСКЛЮЧИТЬ КОНЕЦ СТРОКИ: --11----66--

        РАЗДВИНУТЬ: --88--, либо <PPFF22>
                Вставить пустую  строку;  аргумент  -  число
                строк  либо  область  на  экране,  в которую
                нужно вставить пробелы.

        УБРАТЬ: --22----88--, либо <_P_F_3>
                Убрать  строки  либо  область   на   экране.
                Убранная  информация попадает в буфер убран-
                ных строк.

        ВЗЯТЬ: --99--
                Запомнить строки либо область на экране.

        ПОЛОЖИТЬ: --22----99--
                Взятая ранее информация помещается в текущее
                место  на экране.  Команда с пустым аргумен-
                том используется, чтобы вставить  информацию
                из буфера убранных строк.



                            -2-                     ДEMОС/PV


RED(1)                 ДЕМОС. Команды                 RED(1)


        РАЗРЕЗАТЬ СТРОКУ НА ДВЕ:
                Отрабатывается  по  команде  "РАЗДВИНУТЬ"  с
                пустым аргументом.  (--11----88--).

        СКЛЕИТЬ СТРОКИ
                Отрабатывается по команде "УБРАТЬ" с  пустым
                аргументом.  (--11----22----88--).

        ЗАПИСЬ: --22-- ------ или ^^VV
                Аргумент - имя файла (если не  совпадает  со
                старым).

        РЕДАКТИРОВАТЬ: ------  или ^^DD
                Команда без аргумента переходит к  альтерна-
                тивному  файлу  (по умолчанию - файл подска-
                зок).

        СОЗДАТЬ ОКНО: --22----44--
                Аргумент - имя файла, который будет высвечи-
                ваться  в  новом  окне.   Курсор должен быть
                либо в крайней левой позиции экрана либо  на
                верхней  строке  экрана.   Команда  с пустым
                аргументом выполняет отмену последнего заве-
                денного окна.

        ВЫПОЛНИТЬ: --22----00--  или ^^PP
                Аргумент: "[_ч_и_с_л_о[_l] ] _к_о_м_а_н_д_а [_а_р_г_у_м_е_н_т_ы]".
                "_к_о_м_а_н_д_а" выполняется как фильтр над текстом
                в очередных "_ч_и_с_л_о"  абзацах  (если  указана
                буква  _l,  то строках) файла. Абзац - группа
                непустых строк файла.

        ВЫХОД: <ППееррееввоодд ссттррооккии><ЗЗааббоойй>
                Аргумент  "а"  блокирует  запись  измененных
                файлов.   Команда  может также вводиться как
                <ААРРГГ>_q[_а]<ВВооззвврраатт ккааррееттккии>.

        Запомнить в переменную: <ААРРГГ>>_И<_К_о_м_а_н_д_а>
                Где _И - имя  макропеременной  (одна  буква),
                команда  -  либо  <ВВооззвврраатт  ккааррееттккии>  (тогда
                запоминается текущее место  в  файле),  либо
                <ВВззяяттьь>  (запоминается  буфер вставки), либо
                <УУббррааттьь>   (запоминается   буфер    убранных
                строк).   Макро  затем  можно использовать в
                командах <ППееррееййттии ннаа>, <ППооллоожжииттьь>, а также в
                командах,   аргументом  которых  может  быть
                область на экране (в  этом  случае  вводится
                область  от  текущего  положения  курсора до
                запомненной метки), указав в качестве  аргу-
                мента "$$_И".

        ВВОД МАКРО: <ААРРГГ>_d _И<ВВКК>
                Концом ввода служит команда <ВВЫЫХХООДД>.

        ВЫПОЛНЕНИЕ МАКРО: <ППСС>$$_И

        ПЕРЕОПРЕДЕЛЕНИЕ КЛАВИШИ: <ААРРГГ>_k<ВВКК>
                При   этом,   если   в   ответ   на   запрос


                            -3-                     ДEMОС/PV


RED(1)                 ДЕМОС. Команды                 RED(1)


                переопределяемой  команды  введено имя макро
                (одна  буква),  при  нажатии  этой   клавиши
                выполняется данное макро.

        ПРИЗНАК НЕТЕКСТОВОГО СИМВОЛА: --22----00--
                По этой команде вводится специальный  символ
                и  следующий  управляющий  символ вводится в
                файл,  а  не   трактуется   редактором   как
                команда.

РРЕЕЖЖИИММЫЫ РРААББООТТЫЫ РРЕЕДДААККТТООРРАА
        Режим работы редактора  задается  с  помощью  набора
        "_к_л_ю_ч_е_й",  каждому  из  которых  соответствует  одна
        латинская буква.  Ключи изменяются с помощью  строки
        описания  ключей  вида "-_н_а_б_о_р__б_у_к_в+_н_а_б_о_р__б_у_к_в", где
        любая половина строки может отсутствовать.  Описание
        ключей может задаваться:

        1.      в аргументе команды в виде "rreedd  ----ll++ss  ..."
                (обратите  внимание, что первый "--" является
                признаком     соответствующего     аргумента
                команды,  а  второй  означает  "ооттммееннаа ккллююччаа
                ll");

        2.      с помощью переменной ccsshh RREEDDKKEEYYSS,,  например:
                sseetteennvv RREEDDKKEEYYSS ++ll

        3.      с помощью команды редактора, например:
                 <ААРРГГ>-_w<ВВВВООДД>
                 что означает:
                 (--11--)-_W(ВВВВООДД)

        Возможные ключи:

        ll - работать только с большими буквами (режим  LLCCAASSEE
        )

        ee - работать только с латинскими буквами;

        tt - не вставлять табуляции вместо пробелов, не заме-
        нять при выдаче файла пробелы на табуляции;

        ww - разрешение записи в текущий файл,

        ss - разрешение  пользоваться  аппаратными  функциями
        сдвига экрана при движении по файлу;

        ff - запретить движение по файлу при достижении  кур-
        сором границы экрана;
          а  -  включить  режим   автоматической   установки
        сдвига; при этом по команде "ввооззвврраатт ккааррееттккии" курсор
        устанавливается на ту позицию, к которой был  подве-
        ден  клавишами  движения курсора в последний раз; По
        умолчанию устанавливается режим --ll ; если на  терми-
        нале  не  установлен режим llccaassee,, и "++ll" в противном
        случае.




                            -4-                     ДEMОС/PV


RED(1)                 ДЕМОС. Команды                 RED(1)


ДДИИААГГННООССТТИИККАА ООШШИИББООКК
        В зависимости от возможностей терминала  диагностика
        ошибок  может идти как на русском, так и на английс-
        ком языках. В основном она не требует дополнительных
        комментариев.   При  запуске  редактора  может  быть
        получена диагностика о невозможности работы с данным
        (указанным в переменной описания среды TTEERRMM ) терми-
        налом; как правило, это означает, что терминал  ука-
        занного  типа вообще не описан в файле /_e_t_c/_t_e_r_m_c_а_p.
        Вообще то настройка терминалов и их описание -  дело
        системных  программистов,  но пользователь сам может
        задать тип терминала, указав: sseetteennvv TTEERRMM _Т_И_П - если
        он  работает  в ccsshh; TTEERRMM = ТТИИПП ; eexxppооrrtt TTEERRMM - если
        он работает в sshh.

        Список описанных терминалов можно получить,  набрав:
        ggrreepp "#+" /_e_t_с/_t_e_r_m_c_а_p

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ::
        _r_p_l(1) - команда контекстной  замены  для  редактора
        rreedd;;  _r_e_d(5)  -  описание клавиатуры в редакторе rreedd
        (таблица кодов).

        Имеется отдельное описание редактора rreedd.

ЗЗААММЕЕЧЧААННИИЯЯ::
        Для повтора сеанса после сбоя  необходимо,  чтобы  в
        каталоге  "/_t_m_p"  были  оставлены  файлы  с  именами
        "_r_e_t_t*" и "_r_e_s_v*".  В имена рабочих файлов редактора
        добавляется  имя  пользователя, взятое из переменной
        либо номер  пользователя,  если  эта  переменная  не
        задана.

        Данное описание соответствует редактору RREEDD,,  версия
        4.0 (сборка 52).

ФФААЙЙЛЛЫЫ
        /_t_m_p/_r_e_t_t*._и_м_я
         - протокол работы редактора; /_t_m_p/_r_e_s_v*._и_м_я
         -  состояние  редактора   при   выходе   из   него;
        /_t_m_p/_r_e_t_m*._и_м_я
         - рабочий файл; /_e_t_c/_t_e_r_m_c_a_p
         - описание терминалов;

















                            -5-                     ДEMОС/PV

