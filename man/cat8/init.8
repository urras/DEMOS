
INIT(8)         ДЕМОС. Сопровождение системы         INIT(8)


ИИММЯЯ
        iinniitt - системный процесс инициализации.

ФФООРРММААТТ
        //eettcc//iinniitt

ООППИИССААННИИЕЕ
        Команда iinniitt вызывается на последнем  шаге  загрузки
        ДЕМОС.   Процесс, выполняющий программу iinniitt, всегда
        имеет идентификатор 1 и является  головным  (родите-
        лем) для всех остальных процессов системы.  Эта осо-
        бенность процесса iinniitt используется  для  управления
        режимами работы системы.

        После  старта  iinniitt   выполняет   последовательность
        действий по переводу системы в многопользовательский
        режим работы  (данная  операция  зависит  от  режима
        вызова системы (см.  _b_o_o_t(8)).

        1)  Запускается программа  //eettcc//aauuttooccoonnffiigg  --ccvv  для
            настройки  системы на внешние устройства в соот-
            ветствие с таблицей /_e_t_c/_d_t_a_b.

        2)  Система переводится в однопользовательский режим
            работы   с  консольного  терминала.  Этот  режим
            используется администратором и системными  прог-
            раммистами  для  обслуживания  системы; в режиме
            автоматического и  быстрого  вызова  этот  режим
            пропускается  (см.  режимы  ffaasstt,  aauuttoo,  nnoossuu в
            bboooott, и ключи команды rreebboooott);

        3)  Запускается командный файл /_e_t_c/_r_c.   Этот  файл
            содержит  команды  для  проверок  и монтирования
            файловых систем, очистки рабочих файлов и другие
            необходимые  команды. Информация о режиме вызова
            системы передается при этом в командный  файл  с
            помощью первого параметра ($$11):

            bboooott      - обычный режим вызова;
            aauuttoobboooott  - автоматический вызов системы;
            ffaassttbboooott  - автоматический  быстрый  вызов  сис-
                        темы.

            Второй параметр ($$22) равен ppoowweerrffaaiill, если пере-
            вызов системы был связан со сбоем питания.

        4)  Если файл /_e_t_c/_r_c окончился успешно  (код  возв-
            рата  равен 0), система переводится в многополь-
            зовательский режим работы. При этом просматрива-
            ется файл /_e_t_c/_t_t_y_s, в котором содержится список
            доступных линий связи. Для  каждой  линии  связи
            порождается   отдельный  процесс  и  запускается
            программа настройки  на  тип  линии  (_g_e_t_t_y(8)),
            которая  в  свою  очередь  заменяется программой
            регистрации входа в  систему  (_l_o_g_i_n(1)).   Если
            процессу  iinniitt  не  удается открыть линию связи,
            которая помечена как активная в файле /_e_t_c/_t_t_y_s,
            на  операторский  терминал  раз  в  десять минут


                            -1-                      ДЕМОС/P


INIT(8)         ДЕМОС. Сопровождение системы         INIT(8)


            будет  выдаваться  соответствующая  диагностика.
            Следует  отметить, что и настройка на тип линии,
            и регистрация входа в систему, и работа  интерт-
            ретатора  командного  языка выполняются в рамках
            одного и того же процесса. Таким образом,   про-
            цесс,  с  которым  общается пользователь (обычно
            это интерпретатор командного языка sshh  или  ccsshh)
            является прямым потомком процесса инициализации.
            При завершении сеанса работы  пользователя  про-
            цесс iinniitt корректирует файл /_e_t_c/_u_t_m_p, в котором
            содержится  список  пользователей  работающих  в
            системе   (этот   файл   заполняется  программой
            регистрации  _l_o_g_i_n(1)),  и  вновь  предоставляет
            линию связи для входа в систему.

        5)  Если выполнение командного файла /_e_t_c/_r_c  закон-
            чилось  с  ошибкой (например, система обнаружила
            испорченную файловую систему), iinniitt переходит  в
            режим  специальной обработки - этот режим анало-
            гичен многопользовательскому, но работать  может
            только суперпользователь и только с тех термина-
            лов, которые описаны в файле /_e_t_c/_t_t_y_s с ключами
            -  цифрами  2  или  3.  Если  таких терминалов в
            /_e_t_c/_t_t_y_s  не  описано,  система  переводится  в
            однопользовательский   режим  работы.  Выход  из
            режима  специальной  обработки   происходит   по
            команде

                    kkiillll --IINNTT 1

            Система снова  выполняет  файл  /_e_t_c/_r_c,  и  так
            далее.

        Работа iinniitt, то есть всей системы, управляется  сиг-
        налами,  которые  посылают  обычно  команды  rreebboooott,
        sshhuuttddoowwnn, но которые может послать и  суперпользова-
        тель, набрав команду

                kkiillll _с_и_г_н_а_л 1

        iinniitt воспринимает следующие _с_и_г_н_а_л_ы:

        --TTEERRMM   прекратить многопользовательскую  обработку,
                перейти в однопользовательский режим работы;

        --HHUUPP    Просмотреть заново файл /_e_t_c/_t_t_y_s, запустить
                ggeettttyy  на  появившиеся там вновь терминалы и
                снять  ggeettttyy   с   линий,   исключенных   из
                /_e_t_c/_t_t_y_s;

        --QQUUIITT   Запретить  вход  пользователей  в   систему;
                режим отменяется _с_и_г_н_а_л_о_м --HHUUPP или --TTEERRMM;

        --IINNTT    Войти  в  режим  специальной  обработки  или
                выйти из него в обычный режим.

        Как видно из всего перечисленного, система не  может
        функционировать без процесса инициализации. Если при


                            -2-                      ДЕМОС/P


INIT(8)         ДЕМОС. Сопровождение системы         INIT(8)


        загрузки системы не удается прочитать эту  программу
        из файла /_e_t_c/_i_n_i_t, система завершает работу с соот-
        ветствующей диагностикой (см.  _c_r_a_s_h(8)).

ФФААЙЙЛЛЫЫ
        /_d_e_v/_c_o_n_s_o_l_e  операторский терминал
        /_d_e_v/_t_t_y*     линии связи
        /_e_t_c/_u_t_m_p     список  пользователей,  работающих   в
                      данный момент в системе
        /_u_s_r/_a_d_m/_w_t_m_p файл регистрации сеансов пользователей
        /_e_t_c/_t_t_y_s     описание конфигурации линий связи
        /_e_t_c/_r_c       стартовый командный файл

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
        _c_r_a_s_h(8),  _g_e_t_t_y(8),   _k_i_l_l(1),   _l_o_g_i_n(1),   _r_c(8),
        _r_e_b_o_o_t(8), _s_h(1), _s_h_u_t_d_o_w_n(8), _t_t_y_s(5)












































                            -3-                      ДЕМОС/P

