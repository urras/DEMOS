
BOOT(8)         ДЕМОС. Сопровождение системы         BOOT(8)


ИИММЯЯ
        bboooott - вторая фаза загрузки операционной системы.

ООППИИССААННИИЕЕ
        Операционная система ДЕМОС вызывается с помощью мно-
        гоступенчатой процедуры загрузки.

        1)  С  помощью  аппаратного  загрузчика   вызывается
            начальный загрузчик программ.

        2)  Начальный загрузчик  вызывает  монитор  загрузки
            bboooott;

        3)  С  помощью  монитора  загрузки  вызывается  ядро
            ДЕМОС  и,  при  необходимости,  настраивается  в
            соответствии с указанными параметрами запуска.

        4)  Далее операционная система  выполняет  стартовые
            командные  файлы и начинает обслуживание пользо-
            вателей.

        Аппаратный загрузчик (встроенный в ЭВМ)  служит  для
        считывания  с  указанного  устройства  в  память ЭВМ
        нулевого блока. На СМ-4 загрузка  с  диска   СМ-5400
        осуществляется, как правило, следующим образом:

             -  набрать на ключах адрес 773110
             -  нажать "останов" вниз
             -  нажать "ввод адреса"
             -  поднять клавишу "останов" вверх
             -  нажать "пуск"

        На СМ-1420 имеется   встроенный  загрузчик,  который
        вызывается в соответствии с руководством по конкрет-
        ной ЭВМ и запрашивает имя устройства  с  консольного
        терминала, в этом случае оператор должен:

             -  вызвать аппаратный загрузчик;
             -  набрать после получения приглашения "?":
                _D_K  - для вызова с СМ-5400
                _D_P  - для вызова с ЕС-5061
                _D_M  - для вызова с СМ-5408

        После имени может указываться номер устройства, нап-
        ример:

                _D_K_3 - вызов с устройства 3.

        В случае автоматического перевызова  начальный  заг-
        рузчик вызывает сама система.

        В нулевом блоке системного диска  записан  начальный
        загрузчик  программ.   Он ищет на диске монитор заг-
        рузки bboooott и загружает его.  На этом этапе  загрузка
        осуществляется с того же устройства, с которого выз-
        ван аппаратный  загрузчик  (причем  ненулевой  номер
        устройства  допускается  только для дисков СМ-5400 и
        флоппи-дисков Электроники-85).


                            -1-                      ДЕМОС/P


BOOT(8)         ДЕМОС. Сопровождение системы         BOOT(8)


ККООММААННДДЫЫ BBOOOOTT
        Монитор загрузки bboooott считывает с консольного терми-
        нала команды вида:

                _D_D(_M_O_D,_S_H_I_F_T)[_Ф_А_Й_Л [_П_А_Р_А_М_Е_Т_Р_Ы]]

        где _D_D - имя устройства,  _M_O_D  -  номер  устройства,
        _S_H_I_F_T  -  номер файла на ленте или начальный блок на
        диске.  При вызове  системы  используются  следующие
        имена устройств:

                Устройство   Обозначение в ДЕМОС

                ИЗОТ-1370    rrkk (СМ-4 и т.п.)
                СМ-5400      rrkk
                ЕС-5061      rrpp
                СМ-5408      hhkk
                ЕС-5067      xxpp
                DEC RL01/02  rrll
                DEC RM03/05  rrmm
                НГМД СМ5603  rrxx
                Лента СМ5300 ttmm

                Винчестер    rrww (Электроника-85)
                Флоппи       ffdd

                UDA50/RA??   rraa (PDP11/23, PDP11/73)
                Лента TS11   ttss

        Монитор загружает указанный файл в память,  произво-
        дит  (если  указаны  параметры)  настройку системы и
        запускает ее. Под управлением  монитора  bboooott  могут
        вызываться  различные  утилиты для обслуживания сис-
        темы в монопольном  режиме,  а  также  сама  система
        ДЕМОС.

        Монитор bboooott понимает следующие  параметры,  которые
        служат для настройки системы:

        rr=_D_E_V     изменение  размещения  корневой   файловой
                  системы;  если  область  подкачки первона-
                  чально (при генерации системы) была разме-
                  щена на одном логическом устройстве с кор-
                  невой  файловой  системой,  то  она  также
                  перемещается на указанное устройство.

                  Имя  устройства  _D_E_V  вводится  в   форме:
                  "_D_DNN[_P]", где _D_D - обозначение устройства,
                  NN - номер устройства, а _P -  индекс  логи-
                  ческого  диска (от aa до hh); для дисков СМ-
                  5400 индекс _P опускается.

                  Если устройство  _D_E_V  должно  совпадать  с
                  устройством загрузки, то в качестве частей
                  имени можно использовать следующие  макро-
                  переменные:

                  %%nn - обозначение устройства (_D_D),


                            -2-                      ДЕМОС/P


BOOT(8)         ДЕМОС. Сопровождение системы         BOOT(8)


                  %%dd - номер устройства (NN),
                  %%pp - индекс логического диска (_P),
                  %%vv - аналогично %%nn%%dd,
                  %%ff - аналогично %%nn%%dd%%pp.

        ss=_D_E_V     изменение  устройства,   отведенного   под
                  область подкачки;

        sslloo=_N_U_M   изменение начала области подкачки;

        sslleenn=_N_U_M  изменение длины области подкачки;

        pp=_D_E_V     изменение устройства, отведенного для раз-
                  мещения буферов межпроцессных каналов;

        ffaasstt      вызов системы в быстром режиме, без ffsscckk.

        nnoossuu      отмена перехода системы в режим  монополь-
                  ного использования сразу после загрузки;

        aauuttoo      вызов системы с проверкой файловых систем,
                  но  без  запросов  даты и перехода в моно-
                  польный режим.

        Еще  одной  возможностью  bboooott  являются   командные
        файлы: если указанный в bboooott файл является текстовым
        и начинается со строки, содержащей один символ  "#",
        то  из  файла читается следующая строка и подставля-
        ется в качестве входной строки bboooott.  Это  позволяет
        вызывать систему в разных конфигурациях внешних уст-
        ройств, не заставляя оператора помнить все их  пара-
        метры.  Командный  файл может иметь, например, такой
        вид:

        #
        _r_k(0,0)_d_e_m_o_s rr=%%ff ss=_r_k_3 sslloo=1500 sslleenn=3300 nnoossuu

        Если система вызывается автоматически, то bboooott пыта-
        ется  сначала выполнить команду, заданную по умолча-
        нию (обычно это "%%nn(%%dd,0)_c_o_n_f-%%nn") и в случае  удачи
        вызывает  систему в режиме aauuttoo .. Такое же умолчание
        используется,  если  оператор  ввел  пустую  строку.
        Умолчание         указывается         в        файле
        /_u_s_r/_i_n_c_l_u_d_e/_s_y_s/_r_e_b_o_o_t._h, для его изменения  требу-
        ется перетрансляция bboooott.

ППРРИИММЕЕРРЫЫ ВВЫЫЗЗООВВАА ССИИССТТЕЕММЫЫ
        Предположим, что нужно вызвать ДЕМОС на ЭВМ  СМ-1420
        с  диска  _r_k_0  , имя ядра системы - _d_e_m_o_s.  Действия
        оператора:










                            -3-                      ДЕМОС/P


BOOT(8)         ДЕМОС. Сопровождение системы         BOOT(8)


        1. Вызов начального загрузчика:

        2. Вызов ОС ДЕМОС:

           _м_а_ш_и_н_а   ->  ?
           _о_п_е_р_а_т_о_р ->   DDKK
           _с_и_с_т_е_м_а  ->  CPU 24
                        BOOT (1.10 ...)
                        :
           _о_п_е_р_а_т_о_р ->   rrkk((00,,00))ddeemmooss

        Для вызова ОС ДЕМОС  на  ЭВМ  СМ-1420  с  системного
        диска  rrkk33  служит следующий диалог (предполагается,
        что в системе подготовлен командный  файл  /_r_k_3_c_o_n_f,
        состоящий из двух строк:

        #
        _r_k(3,0)_d_e_m_o_s rr=_r_k_3 ss=_r_k_3 sslloo=4000 sslleenn=872

        Действия оператора:

   _м_а_ш_и_н_а  -> ?
   _о_п_е_р_а_т_о_р->  DDKK33
   _с_и_с_т_е_м_а -> CPU 24
               BOOT (1.10 ...)
               :
   _о_п_е_р_а_т_о_р->   rrkk((33,,00))rrkk33ccoonnff
   _с_и_с_т_е_м_а -> > rk(3,0)demos r=rk3 s=rk3 slo=4000 slen=872

        После вызова системы дальнейшие  действия  определя-
        ются программой iinniitt.

ФФААЙЙЛЛЫЫ
        /_c_o_n_f-dddd    командный файл для вызова по умолчанию с
                    устройства dddd.

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
        _i_n_i_t(8), _r_e_b_o_o_t(8), _s_h_u_t_d_o_w_n(8), _g_e_t_t_y(8).






















                            -4-                      ДЕМОС/P

