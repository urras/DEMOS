
DIR(5)             ДЕМОС. Форматы данных              DIR(5)


ИИММЯЯ
        ddiirr - формат каталога.

ФФООРРММААТТ
        #iinncclluuddee <_s_y_s/_d_i_r._h>

ООППИИССААННИИЕЕ
        Каталог обладает всеми свойствами обычного файла, за
        исключением  того, что ни один пользователь не может
        записать в него напрямую.   То,  что  файл  является
        каталогом, отмечено флагом в I-узле файла (см.  _f_i_l_-
        _s_y_s(5)).   Структура  элемента  каталога  описана  в
        файле <_s_y_s/_d_i_r._h>:

        #ddeeffiinnee DDIIRRSSIIZZ  14

        ssttrruucctt  ddiirreecctt {
            uunnssiiggnneedd   dd__iinnoo : 14;          /* I-номер файла */
            uunnssiiggnneedd   dd__ccllaassss: 2;          /* тип файла     */
            cchhaarr       dd__nnaammee[DDIIRRSSIIZZ];      /* имя файла     */
        };
                /* Возможные значения поля dd__ccllaassss */
        #ddeeffiinnee DDIIRR__OOLLDD   0  /* устройство или др. спец. файл */
        #ddeeffiinnee DDIIRR__IIFFDDIIRR 1  /* каталог                       */
        #ddeeffiinnee DDIIRR__IIFFLLNNKK 2  /* символьная ссылка             */
        #ddeeffiinnee DDIIRR__IIFFRREEGG 3  /* обычный файл                  */

        Пустой элемент каталога имеет поле dd__iinnoo равное 0; в
        противном  случае  этот  элемент указывает на файл с
        именем dd__nnaammee и I-узлом с номером dd__iinnoo.   Если  имя
        файла  короче  DDIIRRSSIIZZ байтов, оно дополняется симво-
        лами _п_у_с_т_о (\0).

        В соответствии с принятыми соглашениями  _п_е_р_в_ы_е  две
        записи каждого каталога зарезервированы для имен "."
        и "..".  Первое из них является указателем на данный
        каталог.   Второе  указывает на вышестоящий каталог.
        Для корневого каталога имя ".." означает то же,  что
        и ".".

        Поле dd__ccllaassss  позволяет  определять  тип  файла,  _н_е
        _в_ы_п_о_л_н_я_я  системный  вызов  ssttaatt  по  каждому  имени
        файла, содержащемуся  в  каталоге;  это  значительно
        ускоряет  просмотр дерева файловой системы. Значение
        класса DDIIRR__OOLLDD  означает,  что  для  выяснения  типа
        файла системный вызов ssttaatt делать все же надо.

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
        _f_i_l_s_y_s(5), _l_s(1)

ЗЗААММЕЕЧЧААННИИЯЯ
        Для работы со каталогами рекомендуется  использовать
        системно-независимую         библиотеку         (см.
        _d_i_r_e_c_t_o_r_y(3s)).

        Поле dd__ccllaassss в структуре каталога отсутствует в ста-
        рых  версиях  системы,  для конвертирования файловой
        системы из старого  формата  в  новый  (и  наоборот)


                            -1-                      ДЕМОС/P


DIR(5)             ДЕМОС. Форматы данных              DIR(5)


        используйте  программу _d_i_r_c_n_v(8).  Кроме того, реко-
        мендуется использовать это поле только в том случае,
        когда  определено  макро  IIPPKK__DDIIRREECCTTOORRYY, иначе нужно
        использовать системный вызов ssttaatt (для совместимости
        с другими версиями ДЕМОС).























































                            -2-                      ДЕМОС/P

