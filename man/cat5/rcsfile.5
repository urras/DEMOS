
RCSFILE(5)         ДЕМОС. Форматы данных          RCSFILE(5)


ИИММЯЯ
        rrccssffiillee - формат файла RRCCSS.

ООППИИССААННИИЕЕ
        Архивный файл RRCCSS является обычным текстовым  файлом
        (код  КОИ-8).   Текст  записывается в свободном фор-
        мате, т.е. пробелы, символы табуляции и новой строки
        не  имеют специального значения.  Строки обрамляются
        символом `@@'. Поэтому, если в тексте исходного файла
        имеется данный символ, при записи в архивный файл он
        удваивается.

        Для описания возможных вариантов структуры  архивных
        файлов  используется  специальный  метаязык, символы
        которого имеют следующий смысл:

        `||' (вертикальная черта)
                    - разделитель альтернатив;
        `{{' и `}}'   - элемент может быть опущен;
        `{{' и `}}**'  - элемент может повторяться ноль и более
                      раз;
        `{{' и `}}++'  - элемент может повторяться один и более
                      раз, но не должен отсутствовать;
        `<<' и `>>'   - нетерминальный символ.

        Синтаксис архивного файла:

        <_r_c_s_т_е_к_с_т> ::= <_з_а_г> {<_д_е_л_ь_т_а>}* <_з_а_м> {<_д_т_е_к_с_т>}*

        <_з_а_г>      ::= hheeaadd {<_н_о_м>};
                       aacccceessss {<_i_d>}*;
                       ssyymmbboollss {<_i_d> :: <_н_о_м>}*;
                       lloocckkss {<_i_d> :: <_н_о_м>}*;
                       ccoommmmeenntt {<_с_т_р_о_к_а>};

        <_д_е_л_ь_т_а>   ::= <_н_о_м>
                       ddaattee <_н_о_м>;
                       aauutthhoorr <_i_d>;
                       ssttaattee {<_i_d>};
                       bbrraanncchheess {<_н_о_м>}*;
                       nneexxtt {<_н_о_м>};

        <_з_а_м>      ::= ddeesscc <_с_т_р_о_к_а>

        <_д_т_е_к_с_т>   ::= <_н_о_м>
                       lloogg <_с_т_р_о_к_а>
                       tteexxtt <_с_т_р_о_к_а>

        <_н_о_м>      ::= {<_ц_и_ф_р_а>{..}}+

        <_ц_и_ф_р_а>    ::= 00 | 11 | ... | 99

        <_i_d>       ::= <_б_у_к_в_а>{<_i_d_c_h_a_r>}*

        <_б_у_к_в_а>    ::= AA | BB | ... | ZZ | aa | bb | ... | zz |
                       АА | ББ | ... | ЯЯ | аа | бб | ... | яя




                            -1-                     ДЕМОС/PV


RCSFILE(5)         ДЕМОС. Форматы данных          RCSFILE(5)


        <_i_d_c_h_a_r>   ::= Любые графические символы КОИ-8,
                       за исключением символов: _п_р_о_б_е_л_а,
                       _т_а_б_у_л_я_ц_и_и, _в_о_з_в_р_а_т_а _к_а_р_е_т_к_и,
                       _н_о_в_о_й _с_т_р_о_к_и и <_с_п_е_ц_с_и_м>.

        <_с_п_е_ц_с_и_м>  ::= ;; | :: | ,, | @@

        <_с_т_р_о_к_а>   ::= @@{_л_ю_б_о_й _с_и_м_в_о_л _К_О_И-_8,
                       _з_н_а_к `@@' _д_у_б_л_и_р_у_е_т_с_я}*@@

        Ключевые слова записываются  только  строчными  бук-
        вами,  идентификаторы  могут  совпадать  с ключевыми
        словами.

        Для каждой  версии  файла  создается  узел,  который
        содержит  всю информацию необходимую для ее порожде-
        ния (<_д_е_л_ь_т_а>).  Все узлы, имеющие  номера  из  двух
        элементов  (например:  2.3,  2.1, 1.3 и т.д.), отно-
        сятся к основному стволу дерева и связаны в  список.
        При  этом,  каждый узел ствола содержит ссылку (поле
        nneexxtt) на предшествующий узел.  Поле hheeaadd в заголовке
        архивного  файла (<_з_а_г>) указывает на старший узел в
        данной последовательности (например, на узел с  наи-
        большим номером версии).

        Узлы, номера которых имеют 2n элементов  связываются
        между  собой  в  порядке  появления в архивном файле
        (например: 3.1.1.1, 2.1.2.2, и.д.).  Каждый узел,  с
        номером  из (2n)-1 элементов содержит ссылку на узел
        с которым  его  требуется  связать  (для  этой  цели
        используется  поле  nneexxtt).   Узлы  с нечетным числом
        элементов в номере,  называются  точками  ветвления.
        Поле  bbrraanncchheess  в описании узла содержит список бли-
        жайших узлов всех ветвей отходящих от  данной  точки
        ветвления  (узлы перечисляются в порядке возрастания
        номеров).
























                            -2-                     ДЕМОС/PV


RCSFILE(5)         ДЕМОС. Форматы данных          RCSFILE(5)


        ПРИМЕР:

                          HHeeaadd
                            |
                            |
                            v
                        ---------
    / \        / \      |       |     / \
   /   \      /   \     |  2.1  |    /   \         / \
  /     \    /     \    |       |   /     \       /   \
 /1.2.1.3\  /1.3.1.1\   |       |  /1.2.2.2\     /     \
 ---------  ---------   ---------  ---------    /       \
     ^          ^           |          ^       /         \
     |          |           |          |      /1.2.2.1.1.1\
     |          |           v          |      _____________
    / \         |       ---------     / \           ^
   /   \        |       \  1.3  /    /   \          |
  /     \       ---------\     /    /     \ ---------
 /1.2.1.1\                \   /    /1.2.2.1\
 ---------                 \ /     ---------
     ^                      |          ^
     |                      |          |
     |                      v          |
     |                  ---------      |
     |                  \  1.2  /      |
     --------------------\     /--------
                          \   /
                           \ /
                            |
                            |
                            v
                        ---------
                        \  1.1  /
                         \     /
                          \   /
                           \ /


                Рис.1. Дерево версий файла.

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
        _c_i(1), _c_o(1), _i_d_e_n_t(1), _r_c_s(1),  _r_c_s_d_i_f_f(1),  _r_c_s_i_n_-
        _t_r_o(1), _r_c_s_m_e_r_g_e(1), _r_l_o_g(1)

















                            -3-                     ДЕМОС/PV

