
CPIO(5)            ДЕМОС. Форматы данных             CPIO(5)


ИИММЯЯ
        cpio - формат архива команды cpio

ООППИИССААННИИЕЕ
        Если не используется ключ --cc, то структура заголовка
        следующая:

        struct {
                short   h_magic,
                        h_dev;
                ushort  h_ino,
                        h_mode,
                        h_uid,
                        h_gid;
                short   h_nlink,
                        h_rdev,
                        h_mtime[2],
                        h_namesize,
                        h_filesize[2];
                char    h_name[h_namesize округленное до слова];
        } Hdr;

        Если используется ключ --cc, то  информация  заголовка
        описывается следующим образом:

        sscanf(Chdr, "%6o%6o%6o%6o%6o%6o%6o%6o%11lo%6o%11lo%s",
             &Hdr.h_magic, &Hdr.h_dev, &Hdr.h_ino, &Hdr.h_mode,
             &Hdr.h_uid, &Hdr.h_gid, &Hdr.h_nlink, &Hdr.h_rdev,
             &Longtime, &Hdr.h_namesize, &Longfile, Hdr.h_name);

        _L_o_n_g_t_i_m_e  и  _L_o_n_g_f_i_l_e  эквивалентны  _H_d_r._h__m_t_i_m_e   и
        _H_d_r._h__f_i_l_e_s_i_z_e,  соответственно.  Содержимое каждого
        файла записывается в элемент массива структур  пере-
        менной  длины  _a_r_c_h_i_v_e  вместе  с другими элементами
        описания файла.  Поле _h__m_a_g_i_c содержит  восьмеричную
        константу  070707.   Поля  _h__d_e_v до _h__m_t_i_m_e содержат
        информацию, описанную в _s_t_a_t(2).  Длина имени файла,
        завешающегося нулевым байтом, дана в поле _h__n_a_m_e_s_i_z_e
        (включая нулевой байт).

        Последняя  запись   архива   всегда   содержит   имя
        TRAILER!!!.  Специальные файлы, каталоги и завершаю-
        щая запись содержать в поле _h__f_i_l_e_s_i_z_e нуль.

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
        cpio(1), find(1).
        stat(2).













                            -1-

