
TERMCAP(5)         ДЕМОС. Форматы файлов          TERMCAP(5)


ИИММЯЯ
       tteerrmmccaapp - описание характеристик терминалов.

ООППИИССААННИИЕЕ
       Файл /_e_t_c/_t_e_r_m_c_a_p  содержит  описание  функциональных
       характеристик  всех  известных системе типов термина-
       лов.  Эти  описания  используются  многими  командами
       ДЕМОС  для настройки на работу с конкретным устройст-
       вом и могут быть получены с помощью  функций  библио-
       теки _t_e_r_m_c_a_p(3x).

       Для описания устройства в  файле  /_e_t_c/_t_e_r_m_c_a_p  отво-
       дится   одна  запись.   Записью  считается  текстовая
       строка,  заканчивающаяся  символом  _п_е_р_е_в_о_д_а   _с_т_р_о_к_и
       (\\nn).   Если  перед  символом  \\nn  стоит  символ `\\',
       запись дополняется содержимым следующей строки.  Каж-
       дая  запись  состоит  из полей, разделенных символами
       `::'.  Строки, начинающиеся с символа  `##',  считаются
       комментариями.

       Первое поле описания терминала  содержит  имя  терми-
       нала,  под  которым он известен в системе. Имен может
       быть несколько и они разделяются символами `||'.  Пер-
       вое имя должно содержать не более 2 символов (некото-
       рые команды отводят под имя  устройства  16-разрядное
       слово  и работают с именем как с числовым идентифика-
       тором).  Второе имя определяет  наиболее  распростра-
       ненное сокращение полного наименования данного терми-
       нала и не может содержать  пробелов.   Последнее  имя
       соответствует   полному  официальному  названию  уст-
       ройства и, разумеется, может содержать пробелы.

       Все остальные поля содержат набор описателей, в кото-
       рых содержится информация о функциональных возможнос-
       тях терминала, способах редактирования информации  на
       экране терминала и описание клавиатуры.

       Существует три типа описателей:

       _b_o_o_l   Логический.  Указывает на то, что данное  уст-
              ройство обладает некоторым свойством.

       _n_u_m    Числовой. Задает размер экрана терминала, про-
              должительность  задержек при передаче информа-
              ции и т.д.

       _s_t_r    Символьный.   Определяет    последовательность
              кодов,  вывод  которых  приводит  к выполнению
              какой-либо специфичной для данного  устройства
              функции.

       Все описатели имеют двухсимвольные имена.  Логические
       описатели записываются в следующей форме:

              :<_и_м_я>:
              например:
                  :bbss:



                            -1-                     ДЕМОС/PV


TERMCAP(5)         ДЕМОС. Форматы файлов          TERMCAP(5)


       Численные описатели имеют следующий формат:

              :<_и_м_я>##<_ч_и_с_л_о>:
              например:
                  :llii##25:

       Символьные описатели имеют следующий формат:

              :<_и_м_я>==<_с_т_р_о_к_а>:

       или, если при выполнении операции требуется задержка,

              :<_и_м_я>==<_з_а_д_е_р_ж_к_а><_с_т_р_о_к_а>:

       где <_з_а_д_е_р_ж_к_а> - десятичное число, определяющее число
       миллисекунд, которое необходимо выждать после посылки
       соответствующей команды на устройство.  Для получения
       задержки подпрограммы библиотеки _t_e_r_m_c_a_p(3x), генери-
       руют последовательность символов-заполнителей,  кото-
       рые передаются вслед за командой. Предполагается, что
       устройство в лучшем случае игнорирует  их.   Задержка
       может быть представлена  либо целым числом, например,
       _2_0, либо целым числом с символом `**', например, "3**".
       Символ  `**' указывает на то, что задержка должна быть
       умножена на число строк или символов, которые  затра-
       гиваются при выполнении данной операции.

       Для упрощения кодирования символьных описателей  пре-
       дусмотрено  несколько  вариантов обозначения неграфи-
       ческих  символов.  Например,  последовательность   \\EE
       отображается  в код 033 (смена режима интерпретации),
       ^^MM - в символ возврата каретки (код 015),  последова-
       тельность  \\nn\\rr\\tt\\bb\\ff отображается в набор кодов 012,
       015, 011, 010 и 014.  Наконец, код может быть задан в
       виде трех восьмеричных цифр после символа `\\', а сим-
       волы `^^' и `\\' могут быть заданы как \\^^ и \\\\.  Если в
       описатель  требуется  вставить  символ  `::', он может
       быть задан в восьмеричном виде как \\007722.

       Хотя системе известен достаточно большой набор харак-
       теристик терминалов, использовать его целиком не обя-
       зательно.  Редактор текстов,  например,  требует  для
       своей  работы  только  описание  способов перемещения
       курсора и некоторой информации об  алфавитном  наборе
       устройства.   Дополнительная информация может исполь-
       зоваться для оптимизации и ускорения  вывода,  и  для
       организации  более удобной работы с терминалом.  Сле-
       дует отметить, что данный набор описателей может быть
       недостаточен  для описания всех существующих термина-
       лов.

       ООссннооввнныыее ххааррааккттееррииссттииккии

       Следующие описатели характеризуют общие свойства тер-
       минала.

       ccoo#<_ч_и_с_л_о>  Число колонок на экране терминала.



                            -2-                     ДЕМОС/PV


TERMCAP(5)         ДЕМОС. Форматы файлов          TERMCAP(5)


       llii#<_ч_и_с_л_о>  Число строк, если терминал является виде-
                   отерминалом.

       hhcc          Признак того, что терминал является печа-
                   тающим устройством (например, телетайп).

       UUCC          Признак  задается,  если  терминал  имеет
                   только прописные буквы.

       KKII          Говорит о том, что терминал имеет русские
                   буквы.

       IIKK          Совместно с KKII указывает на то, что  тер-
                   минал  с  русскими  буквами имеет клавиа-
                   туру,  режим  которой   русский/латинский
                   переключается  непосредственно  от клавиш
                   рус/лат (которые  одновременно  вырабаты-
                   вают  соответствующие коды), если клавиа-
                   тура переключается по  символам  рус/лат,
                   приходящим  из  линии  (а  клавиши просто
                   генерируют соответствующий код), то  этот
                   признак должен отсутствовать.

       ooss          Терминал допускает наложение символов.

       aamm          Если  курсор  при  достижении   последней
                   колонки  автоматически переходит в начало
                   следующей строки, то задается признак aamm.

       Следующие описатели описывают инициализацию терминала
       и  включение/выключение  специального режима функцио-
       нальной клавиатуры.

       iiss=<_с_т_р_о_к_а> Задает последовательность символов, кото-
                   рую необходимо выдать для приведения тер-
                   минала в начальное состояние (инициализа-
                   ция терминала).

       iiff=<_с_т_р_о_к_а> Задает имя файла,  в  котором  содержится
                   инициализирующая  последовательность сим-
                   волов, если она достаточно длинна.   Если
                   заданы  оба описателя, то сначала печата-
                   ется строка iiss, а затем - файл  iiff.   Это
                   используется, когда именем файла является
                   /_u_s_r/_l_i_b/_t_a_b_s_e_t/_s_t_d, но строка  начальной
                   установки  должна  инициировать предвари-
                   тельное гашение табуляторов.

       ffss=<_с_т_р_о_к_а> Последовательность,  которая  выдается  в
                   конце работы с терминалом.

       kkss=<_с_т_р_о_к_а> Включение  специального  режима  функцио-
                   нальной  клавиатуры.  Эта  последователь-
                   ность выдается, например,   при  входе  в
                   редактор.

       kkee=<_с_т_р_о_к_а> Выключение  специального  режима   работы
                   клавиатуры.


                            -3-                     ДЕМОС/PV


TERMCAP(5)         ДЕМОС. Форматы файлов          TERMCAP(5)


       УУппррааввллееннииее ккууррссоорроомм

       Следующие описатели описывают различные способы пере-
       мещения курсора по экрану терминала.

       ААддрреессаацциияя ккууррссоорраа

       Способ адресации курсора (то  есть  способ  установки
       курсора  в заданную позицию экрана) задается описате-
       лем ccmm строчного типа. Он  определяет  формат  вывода
       номеров  колонки  и строки так же, как и спецификация
       формата в подпрограмме _p_r_i_n_t_f(3s).  Признаком формата
       преобразования  служит символ %%.  Первый формат отно-
       сится к номеру строки, а второй - к  номеру  колонки,
       на  которые должен быть установлен курсор; может быть
       задан обратный порядок их следования с помощью специ-
       фикации  %%rr.  Другие  символы строки ccmm передаются на
       терминал без изменений.  Спецификации  формата  имеют
       следующий смысл:

       %%dd    то же, что и для программы  pprriinnttff;  координаты
             начала экрана считаются нулевыми;

       %%22    аналогично %%22dd в pprriinnttff;

       %%33    аналогично %%33dd;

       %%..    аналогично %%cc;

       %%++_х   сложить код символа _x со значением  координаты,
             полученное значение выводится по формату "%%..";

       %%<<_x_y  если значение меньше _x, прибавить _y, полученное
             значение выводится по формату "%%..";

       %%rr    обратный  порядок  задания  номеров  строки   и
             колонки,  (сначала  номер  колонки, затем номер
             строки);

       %%ii    номера строки и позиции увеличиваются  на  еди-
             ницу, исходной точкой считается 1;

       %%%%    дает один символ %%;

       %%nn    выполняется операция _и_с_к_л_ю_ч_а_ю_щ_е_е _и_л_и, в которой
             участвуют номер строки и позиции и число 0140.

       Существуют также однопараметрические описатели  cchh  и
       ccvv  для  раздельного  горизонтального и вертикального
       позиционирования курсора.

       ППееррееммеещщееннииее ккууррссоорраа

       Следующие описатели описывают способ перемещения кур-
       сора без разрушения информации:

       uupp=<_с_т_р_о_к_а> Курсор вверх (на одну позицию);



                            -4-                     ДЕМОС/PV


TERMCAP(5)         ДЕМОС. Форматы файлов          TERMCAP(5)


       ddoo=<_с_т_р_о_к_а> Курсор вниз;

       nndd=<_с_т_р_о_к_а> Курсор вправо;

       bbcc=<_с_т_р_о_к_а> Курсор влево;

       bbss          Признак того, что для перемещения на одну
                   позицию влево служит код \\bb;

       hhoo=<_с_т_р_о_к_а> Курсор в начальное положение;

       llll=<_с_т_р_о_к_а> Курсор в нижний левый угол экрана.

       Считается некорректным перевод курсора через  верхнюю
       или левую границы экрана.

       ССттииррааннииее ии ввссттааввккаа ттееккссттаа

       Следующие описатели  задаются,  если  терминал  умеет
       вставлять  и уничтожать строки, или сдвигать информа-
       цию на экране:

       aall=<_с_т_р_о_к_а> Вставка  пустой строки, текущая строка  и
                   весь  текст  ниже  нее сдвигаются на одну
                   строку вниз; курсор  остается  на  месте.
                   Считается,  что при выдаче команды курсор
                   находится на первой колонке.

       ddll=<_с_т_р_о_к_а> Уничтожить строку, сдвинув текст ниже нее
                   на 1 строку вверх;

       Следующие описатели указываются, если терминал  умеет
       прокручивать текст на экране вверх или вниз.

       ssrr=<_с_т_р_о_к_а> Прокрутить текст вниз;  может  выводиться
                   только в первой строке;

       ssff=<_с_т_р_о_к_а> Прокрутить текст вверх; может  выводиться
                   только в последней строке.

       Если терминал запоминает строки, вышедшие за  верхнюю
       границу  экрана,  вводится  описатель ddbb; если строки
       сохраняются при выходе за нижнюю границу экрана, ука-
       зывается  ddaa.   Эти  признаки  говорят о том, что при
       прокручивании экрана на  нем  могут  появиться  из-за
       границы экрана старые строки.

       Следующие  описатели  определяют   последовательности
       команд для стирания фрагментов текста.

       ccll=<_с_т_р_о_к_а> Стирание всего экрана.

       ccee=<_с_т_р_о_к_а> Стирание части текущей строки, начиная от
                   текущей колонки и до конца строки;

       ccdd=<_с_т_р_о_к_а> Стирание части экрана, начиная с  текущей
                   строки   и  до  конца;  может  выдаваться
                   только при  положении  курсора  в  первой


                            -5-                     ДЕМОС/PV


TERMCAP(5)         ДЕМОС. Форматы файлов          TERMCAP(5)


                   колонке строки.

       ВВссттааввккаа ии ииссккллююччееннииее ссииммввооллоовв

       Система может обслуживать  терминалы,  имеющие  режим
       вставки символов и терминалы, в которых для получения
       пустой позиции в текущей строке используется  простая
       командная   последовательность.   Последовательность,
       переводящая терминал в режим  вставки,  задается  как
       описатель iimm.  Последовательность, выключающая  режим
       вставки символов, задается как  описатель  eeii.   Если
       перед  вставкой  символа   в строку необходимо выдать
       командную последовательность символов,  она  задается
       как  iicc=<_с_т_р_о_к_а>.   Если  терминал  не  имеет  режима
       вставки символов, но умеет вставлять  в  строку  про-
       белы,  задаются  пустые  описатели  :eeii=:  и :iimm=:, а
       команда вставки пустого символа записывается в описа-
       тель iicc.  Если терминал допускает оба способа вставки
       символов, более предпочтительным является использова-
       ние  режима вставки. Если после вставки символа необ-
       ходима задержка,  задается  описатель  iipp  (строчного
       типа),  в  котором  указывается задержка и последова-
       тельность управляющих  символов,  которые  необходимо
       вывести после вставки одного символа.

       Наконец, режим исключения символов может быть задан с
       помощью  описателей  ddmm,  eedd, ddcc, определяющих, соот-
       ветственно, установку или блокирование режима  исклю-
       чения и способ исключения одного символа.

       Наиболее типичные операции вставки-исключения  симво-
       лов  применимы   к  символам  текущей строки и просто
       сдвигают все другие символы, вплоть до конца  строки.
       Некоторые  терминалы  различают  пробелы, введенные с
       клавиатуры,  и  пробелы,  которые   присутствуют   на
       экране, но не были введены пользователем. В этом слу-
       чае сдвиг символов при  выполнении  операций  вставки
       или  исключения осуществляется лишь до первого невве-
       денного  пробела,  который  либо  уничтожается,  либо
       дополняется  еще  одним таким же пробелом.  Для таких
       терминалов  должен быть задан описатель iinn.

       ВВыыддееллееннииее,, ппооддччееррккииввааннииее ии ввууззууааллььнныыее ммееттккии

       В этом разделе описаны средства  выделения  текста  и
       высвечивания  специальных  меток  на  экране.  Прежде
       всего, необходимо описать способ получения на  экране
       выделяющегося  символа, который используется для ука-
       зания положения курсора в тексте при переходе в режим
       ввода  аргументов - описатель ccuu.  Выбор такой после-
       довательности достаточно произволен,  на  терминалах,
       умеющих  изображать  символ  0177 в виде яркого квад-
       рата, используется этот  символ.  Можно  использовать
       мигание какого либо символа, инвертирование яркости и
       т.п.

       Если  терминал  имеет  командные  последовательности,
       устанавливающие   и   блокирующие  режим  визуального


                            -6-                     ДЕМОС/PV


TERMCAP(5)         ДЕМОС. Форматы файлов          TERMCAP(5)


       выделения текста, эти последовательности  могут  быть
       заданы  описателями ssoo и ssee.  Если терминал допускает
       несколько способов визуального  выделения,  например,
       инвертирование фона изображения, мерцание или подчер-
       кивание (уменьшение яркости не  считается  визуальным
       выделением),  -  то  более  предпочтительным является
       инвертирование фона.

       Коды, инициирующие и блокирующие подчеркивание  могут
       быть  заданы,  соответственно, как описатели uuss и uuee.
       Если терминал  имеет  код  для  подчеркивания  одного
       текущего  символа и перемещения курсора на одну пози-
       цию вправо, этот код может быть задан в описателе uucc.
       Если  код  подчеркивания не вызывает перемещение кур-
       сора вправо, то после него  записывается  код  _к_у_р_с_о_р
       _в_п_р_а_в_о.

       Если во время  выполнения  программы,  осуществляющей
       адресацию  курсора,  терминал должен быть переведен в
       специальный  режим,  коды  установки  и  блокирования
       этого  режима   могут  быть заданы как описатели ttii и
       ttee.  Необходимость в этом  возникает,  например,  при
       работе  с  терминалами,  имеющими  внутреннюю  память
       емкостью более одной страницы.  Если  адресация  кур-
       сора  осуществляется  относительно  некоторой  ячейки
       памяти, а не относительно позиции на экране,  то  для
       правильной  адресации курсора требуется, чтобы терми-
       нал всегда воспроизводил на экране некоторый фиксиро-
       ванный  участок  внутренней  памяти,   так называемое
       окно, размер которого должен соответствовать  размеру
       экрана.

       Если терминал правильно воспроизводит символы с  под-
       черкиванием  и  не  требует для них специальных кодов
       даже несмотря на то, что не допускает наложения  сим-
       волов в одной позиции, в его описании следует указать
       uull.  Если наложенные  символы  могут  быть  стерты  с
       помощью  пробела,  это  должно быть указано с помощью
       описателя eeoo.

       ООппииссааннииее ккллааввииааттууррыы ттееррммииннааллаа

       Эта информация может быть указана только в  том  слу-
       чае, если терминал имеет клавиатуру, при нажатии кла-
       виш которой происходит физическая передача соответст-
       вующего  управляющего  символа или последовательности
       символов.  Обратите внимание,  что  это  описание  не
       позволяет  работать с терминалами, клавиатура которых
       служит лишь для выполнения локальных операций.   Если
       для  клавиатуры  может быть установлен или блокирован
       режим передачи управляющих последовательностей, соот-
       ветствующие коды указываются как описатели kkss и kkee.

       Коды, которые передаются при нажатии клавишей  _к_у_р_с_о_р
       _в_л_е_в_о,   _к_у_р_с_о_р  _в_п_р_а_в_о,  _к_у_р_с_о_р _в_в_е_р_х,  _к_у_р_с_о_р _в_н_и_з,
       _к_у_р_с_о_р _в _н_а_ч_а_л_о,   _ч_и_с_т_к_а _э_к_р_а_н_а,    _в_с_т_а_в_и_т_ь _с_и_м_в_о_л,
       _и_с_к_л_ю_ч_и_т_ь _с_и_м_в_о_л, _в_с_т_а_в_и_т_ь _с_т_р_о_к_у, _у_б_р_а_т_ь _с_т_р_о_к_у ука-
       зываются, соответственно, описателями kkll, kkrr, kkuu, kkdd,


                            -7-                     ДЕМОС/PV


TERMCAP(5)         ДЕМОС. Форматы файлов          TERMCAP(5)


       kkhh,  EERR, IICC, DDCC, IILL, DDLL.  Если существуют специальные
       функциональные клавиши ff00,  ff11,  ...,  ff99,  то  коды,
       которые передаются при их нажатии, могут быть указаны
       как kk00, kk11, ..., kk99.  Если эти клавиши  имеют  марки-
       ровку,  отличную от принятых по умолчанию обозначений
       ff00, ..., ff99, их  обозначения  могут  быть  указаны  с
       помощью описателей ll00, ..., ll99.  Если цифровая клави-
       атура может генерировать  управляющие  последователь-
       ности  символов,  эти последовательности обозначаются
       как kk00 - kk99, kk.., kk--.  Если существуют другие клавиши,
       нажатие которых вызывает передачу такого же кода, как
       и для определенной для данного терминала  специальной
       функции,  -  например  гашение экрана , то в качестве
       описателя kkoo в файле функциональных возможностей тер-
       минала    могут   быть   указаны  соответствующие  2-
       символьные    коды:     например,     строка     вида
       :kkoo=_c_l,_h_o,_s_f,_s_b:  сообщает  о том, что терминал имеет
       клавиши: _г_а_ш_е_н_и_е, _в_о_з_в_р_а_т _в _и_с_х_о_д_н_о_е _п_о_л_о_ж_е_н_и_е, _п_р_о_к_-
       _р_у_ч_и_в_а_н_и_е  _с_в_е_р_х_у  _в_н_и_з  и _п_р_о_к_р_у_ч_и_в_а_н_и_е _с_н_и_з_у _в_в_е_р_х,
       при нажатии которых передаются те же коды,  что  были
       указаны в описателях ccll, llii, ssff и ssbb.

       ДДооппооллннииттееллььннааяя ииннффооррммаацциияя

       Для отработки временных задержек при выдаче управляю-
       щих   последовательностей   на   терминал  передаются
       _с_и_м_в_о_л_ы-_з_а_п_о_л_н_и_т_е_л_и.  По умолчанию используется  сим-
       вол \\00.  Если в качестве _с_и_м_в_о_л_а-_з_а_п_о_л_н_и_т_е_л_я для дан-
       ного терминала требуется определить символ,  отличный
       от нуля, этот символ может быть указан описателем ppcc.

       Если выполняемые данным терминалом операции _т_а_б_у_л_я_ц_и_я
       требуют дополнения текста символами-заполнителями или
       если в качестве символа _т_а_б_у_л_я_ц_и_я  используется  сим-
       вол, отличный от \\tt, это может быть указано с помощью
       описателя ttaa.

       Если терминал отображает  символ  _в_о_з_в_р_а_т  _к_а_р_е_т_к_и  в
       пару  символов  _в_о_з_в_р_а_т  _к_а_р_е_т_к_и  -  _п_е_р_е_в_о_д _с_т_р_о_к_и и
       игнорирует следующий символ _п_е_р_е_в_о_д  _с_т_р_о_к_и,  то  для
       него должен быть задан описатель xxrr.

       Если существуют два очень похожих терминала, один  из
       них может быть определен через описание другого.  Для
       этого сначала описываются свойства, отличающие данный
       терминал  от базового, а в конце описания указывается
       описатель ttcc, который задает имя базового типа.  Сум-
       марная длина двух элементов описания не должна превы-
       шать 1024 символов.  Поскольку  подпрограммы  tteerrmmlliibb
       просматривают   элемент описания слева направо и опи-
       сатель ttcc заменяется соответствующим элементом  (опи-
       санием   аналога), указанные слева описатели наклады-
       ваются  на  описатели  аналогичного  терминала.   При
       необходимости  характеристика может быть аннулирована
       с помощью строки вида _x_x@@, где _x_x - исключаемый  опи-
       сатель. Например, элемент вида:

       _v_3|_v_t_3_4_0:ccuu@@:ccmm@@:ddNN#4:UUCC:KKII:nnbb:ttcc=_v_d_t_5_2_1_0_0_c:


                            -8-                     ДЕМОС/PV


TERMCAP(5)         ДЕМОС. Форматы файлов          TERMCAP(5)


       описывает терминал VIDEOTON-340,  который  отличается
       от   терминала  VDT-52100c отсутствием адресации кур-
       сора и изображаемого символа _з_а_б_о_й,  режимом  больших
       букв  и  наличием  русских  букв, а в остальном с ним
       совпадает.  Описание терминалов по аналогии использу-
       ется также для определения разных режимов работы тер-
       минала или для учета  различных  пожеланий  пользова-
       теля.

       ООппииссааттееллии ццввееттаа

       Для описания цветов используются следующие описатели:

       CCff=<_с_т_р_о_к_а> Строка в формате, аналогичном ccmm,  но  от
                   одного  параметра  (для  функции  ttggoottoo),
                   описывающая включение основного цвета  по
                   его номеру.

                   s= ttggoottoo( _C_f__s_t_r_i_n_g ,0 ,_Н_о_м_е_р_Ц_в_е_т_а );

       CCbb=<_с_т_р_о_к_а> Строка  в  том  же  формате,  описывающая
                   включение цвета фона по его номеру.

       NNff#<_ч_и_с_л_о>  Числовой  описатель,  указывающий   число
                   основных  цветов. Если описатель отсутст-
                   вует - терминал не цветной.

       NNbb#<_ч_и_с_л_о>  Числовой  описатель,  указывающий   число
                   цветов фона.

       CC11          Признак, указывающий, что терминалу можно
                   установить  ЛИБО  основной  ЛИБО  фоновый
                   цвет, но не оба вместе (вероятно, цветной
                   фон  получается только при инверсии изоб-
                   ражения (описатель mmrr)).

       CC22          Признак, указывающий, что терминал допус-
                   кает  только  совместную установку основ-
                   ного и фонового цвета. В этом случае опи-
                   сывается  только  CCff, но от двух парамет-
                   ров:

                   s= ttggoottoo( _C_f__s_t_r_i_n_g ,_Ф_о_н ,_О_с_н_Ц_в_е_т );

       MMff=<_с_т_р_о_к_а>

       MMbb=<_с_т_р_о_к_а> Описатели,    описывающие    соответствие
                   номера  цвета  реальному  цвету.  Если мы
                   устанавливаем цвет с номером _c_o_l_o_r

                   ttppuuttss( ttggoottoo(_C_f__s_t_r_i_n_g,0,_c_o_l_o_r),
                           1,ppuuttcchhaarr);

                   то реально установится цвет, чей код есть

                          Mb_string[ _c_o_l_o_r];

                   Коды    цветов    взяты    в     порядке,


                            -9-                     ДЕМОС/PV


TERMCAP(5)         ДЕМОС. Форматы файлов          TERMCAP(5)


                   соответствующем  цветам  на  персональном
                   компьютере IBM PC.

                   0 - черный              8 - темно-серый
                   1 - синий               9 - светло-синий
                   2 - зеленый             A - светло-зеленый
                   3 - голубой             B - ярко-голубой
                   4 - красный             C - алый
                   5 - сиреневый           D - розовый
                   6 - коричневый          E - желтый
                   7 - серый               F - белый

       На  некоторых  дисплеях  можно  комбинировать  режимы
       яркого  выделения bboolldd (описатель "md") и цвета, при-
       чем  дополнительные  цвета  (после  7-го)  получаются
       именно  таким образом.  В этом случае в описании тер-
       минала должен присутствовать флаг

       CCdd

       По умолчанию цветом фона считается цвет с  номером  0
       (обязательно  должен  присутствовать  в MMbb), а цветом
       текста цвет с номером 7 (обязательно должен присутст-
       вовать в MMff).

       Например:

               _I_B_M _P_C         _A_N_S_I _s_t_a_n_d_a_r_d
       MMff=0123456789ABCDEF     MMff=042E1537
       MMbb=01234567             MMbb=042E153F

       Возможны изменения.

       Существуют  еще  описатели,  используемые  редактором
       rreedd(1).   Эти описатели определяют 4 режима выделения
       (цветосочетания).

       mm11=<_с_т_р_о_к_а> Цвет рамки.

       mm22=<_с_т_р_о_к_а> Цвет сообщения об ошибках.

       mm33=<_с_т_р_о_к_а> Цвет приглашения.

       mm44=<_с_т_р_о_к_а> Цвет разных информационных сообщений.

       Описатель mmee должен выключать все эти режимы  выделе-
       ния.

       ООппииссааннииее ппссееввддооггррааффииккии

       Для работы с псевдографикой  в  _t_e_r_m_c_a_p  используются
       следующие описатели:

       ggss=<_с_т_р_о_к_а> Включить режим вывода псевдографики.

       ggee=<_с_т_р_о_к_а> Выключить режим вывода псевдографики.




                            -10-                    ДЕМОС/PV


TERMCAP(5)         ДЕМОС. Форматы файлов          TERMCAP(5)


       Описатели gg11-gg66 возвращают массивы  символов.   Чтобы
       вывести  псевдографический  символ  следует  включить
       псевдографику,  вывести  нужные  символы  (индексируя
       строки от gg11 до gg66), выключить псевдографику.  Пробел
       в строке означает, что данный псевдографический  сим-
       вол отсутствует.

                                       Старые описатели
        ---    ---    ---
        |8      |9    10|                  TTll  TTjj  TTrr
                             ---                        HHll
        |       |       |     0
        |--    -+-    --|                  LLjj  CCjj  RRjj
        |5      |6     7|     |                         VVll
                             1|
        |2      |3     4|     |            BBll  BBjj  BBrr
        ---    ---    ---

       gg11=<_с_т_р_о_к_а> Простые линии.

       gg22=<_с_т_р_о_к_а> Двойные линии.

       gg33=<_с_т_р_о_к_а> Двойные  горизонтальные,  простые  верти-
                   кальные.

       gg44=<_с_т_р_о_к_а> Простые  горизонтальные,  двойные  верти-
                   кальные.

       gg55=<_с_т_р_о_к_а> Стрелки соответственно таблице:

        ->   <-   вверх  вниз   <-->  вверх-вниз
        0     1    2      3       4      5

           треугольники
        >    <    вверх  вниз
        6    7    8      9

       gg66=<_с_т_р_о_к_а> Квадраты  (блочная  псевдографика)  соот-
                   ветственно таблице:

        ##    ..   #.   .#   ##  %%   +
        ..    ##   #.   .#   ##  %%  /I\ (спецсимвол)
                              (светлый)
        0     1    2    3    4   5   6

       ССппииссоокк ооппииссааттееллеейй

------------------------------------------------------------
Имя  Тип  Зап. Описание
------------------------------------------------------------
AALL   _s_t_r       Вставить _n пустых строк (1 параметр).
CC11   _b_o_o_l      Только основной цвет (нет фонового).
CC22   _b_o_o_l      Основной  и  фоновый  цвета   устанавливаются
               одновременно.
CCCC   _s_t_r       Прототип управляющего символа.
CCMM   _s_t_r       Адресация курсора в памяти (2 параметра).
CCSS   _n_u_m       Тип переключения регистров РУС/ЛАТ.
------------------------------------------------------------


                            -11-                    ДЕМОС/PV


TERMCAP(5)         ДЕМОС. Форматы файлов          TERMCAP(5)


------------------------------------------------------------
Имя  Тип  Зап. Описание
------------------------------------------------------------
CCYY   _b_o_o_l      Терминал имеет кириллицу.
CCbb   _s_t_r       Установка цвета фона по номеру (1 параметр).
CCdd   _b_o_o_l      Дополнительные (после 7-го) цвета  устанавли-
               ваются через bboolldd ("md").
CCff   _s_t_r       Установка основного цвета по номеру (1  пара-
               метр).
DDCC   _s_t_r       Удалить _n символов (1 параметр).
DDLL   _s_t_r       Удалить _n строк (1 параметр).
DDOO   _s_t_r       Курсор вниз на _n строк (1 параметр).
IICC   _s_t_r       Вставить _n символов (1 параметр).
LLCC   _b_o_o_l      Терминал имеет прописные и строчные буквы.
LLEE   _s_t_r       Курсор влево на _n позиций (1 параметр).
MMbb   _s_t_r       Карта цветов фона.
MMff   _s_t_r       Карта основных цветов.
NNbb   _n_u_m       Число цветов фона.
NNff   _n_u_m       Число основных цветов.
PPHH   _n_u_m       Тип прямо адресуемой видеопамяти.
RRII   _s_t_r       Курсор вправо на _n позиций (1 параметр).
SSFF   _s_t_r       Роллирование вперед на _n строк (1 параметр).
SSRR   _s_t_r       Роллирование назад на _n строк (1 параметр).
UUCC   _b_o_o_l      Терминал имеет только прописные буквы.
UUPP   _s_t_r       Курсор вверх на _n строк (1 параметр).
aaee   _s_t_r  p    Конец работы с альтернативным шрифтовым набо-
               ром (курсивом).
aall   _s_t_r  p*   Вставить пустую строку.
aamm   _b_o_o_l      При достижении конца  текущей  строки  курсор
               автоматически перемещается в начало следующей
               строки.
aass   _s_t_r  p    Начало  работы  с  альтернативным   шрифтовым
               набором (курсивом).
bbcc   _s_t_r       Перевод курсора на одну позицию  назад  (если
               не \\bb);
bbll   _s_t_r       Звуковой сигнал (если не \\77).
bbss   _b_o_o_l      Вывод символа \\bb приводит к перемещению  кур-
               сора на одну позицию назад.
bbtt   _s_t_r  p    Обратная табуляция.
bbww   _b_o_o_l      Перемещение курсора на одну позицию назад  из
               первой  позиции  строки  вызывает  переход  в
               конец предыдущей строки.
ccdd   _s_t_r  p*   Стирание информации  от  текущей  позиции  до
               конца экрана.
ccee   _s_t_r  p*   Стирание информации  от  текущей  позиции  до
               конца строки.
cchh   _s_t_r  p    Адресация курсора  по  горизонтали  (1  пара-
               метр).
ccll   _s_t_r  p    Очистка экрана.
ccmm   _s_t_r  p    Адресация курсора (2 параметра).
ccoo   _n_u_m       Число позиций в строке на экране.
ccrr   _s_t_r  p*   Возврат в начало строки (если не \\rr);
ccss   _s_t_r  p    Изменение области роллирования на  экране  (2
               параметра).
cctt   _s_t_r       Стирание всех маркеров табуляции.
ccuu   _s_t_r       Код символа - альтернативного курсора  (яркой
               отметки);
------------------------------------------------------------


                            -12-                    ДЕМОС/PV


TERMCAP(5)         ДЕМОС. Форматы файлов          TERMCAP(5)


------------------------------------------------------------
Имя  Тип  Зап. Описание
------------------------------------------------------------
ccvv   _s_t_r  p    Адресация курсора по вертикали (1 параметр).
ccww   _s_t_r       Установка окна для вывода.
ddBB   _n_u_m       Задержка в миллисекундах для символа \\bb ((BBSS)).
ddCC   _n_u_m       Задержка в миллисекундах для символа \\rr ((CCRR)).
ddFF   _n_u_m       Задержка в миллисекундах для символа \\ff ((FFFF)).
ddNN   _n_u_m       Задержка в миллисекундах для символа \\nn ((NNLL)).
ddTT   _n_u_m       Задержка  в  миллисекундах  для  символа   \\tt
               ((TTAABB)).
ddaa   _b_o_o_l      Терминал  сохраняет  информацию  о   строках,
               сдвинутых вверх за границу экрана.
ddbb   _b_o_o_l      Терминал  сохраняет  информацию  о   строках,
               сдвинутых вниз за границу экрана.
ddcc   _s_t_r  p*   Исключить символ в текущей позиции.
ddll   _s_t_r  p*   Удалить текущую строку.
ddmm   _s_t_r       Переход в режим удаления символов.
ddoo   _s_t_r  p    Перевод курсора вниз на одну строку.
ddss   _s_t_r       Отменить информационную строку (строку состо-
               яния дисплея).
eecc   _s_t_r       Очистить _n символов (1 параметр).
eedd   _s_t_r       Конец режима удаления символов.
eeii   _s_t_r       Конец режима вставки символов.
eeoo   _b_o_o_l      Пробел стирает символ в текущей позиции.
eeoo   _b_o_o_l      Наложения стираются пробелом.
eess   _b_o_o_l      В информационной  строке  можно  пользоваться
               символом _e_s_c_a_p_e (\\3333).
ff,,   _s_t_r       ",," в режиме альтернативной клавиатуры.
ff--   _s_t_r       "--" в режиме альтернативной клавиатуры.
ff..   _s_t_r       ".." в режиме альтернативной клавиатуры.
ff00   _s_t_r       "0" в режиме альтернативной клавиатуры.
ff11   _s_t_r       "1" в режиме альтернативной клавиатуры.
ff22   _s_t_r       "2" в режиме альтернативной клавиатуры.
ff33   _s_t_r       "3" в режиме альтернативной клавиатуры.
ff44   _s_t_r       "4" в режиме альтернативной клавиатуры.
ff55   _s_t_r       "5" в режиме альтернативной клавиатуры.
ff66   _s_t_r       "6" в режиме альтернативной клавиатуры.
ff77   _s_t_r       "7" в режиме альтернативной клавиатуры.
ff88   _s_t_r       "8" в режиме альтернативной клавиатуры.
ff99   _s_t_r       "9" в режиме альтернативной клавиатуры.
ffff   _s_t_r  p*   Если терминал является  печатающим  устройст-
               вом, команда прогона листа (по умолчанию \\ff).
ffss   _s_t_r       Возвратиться из информационной строки  (после
               ttss).
gg11   _s_t_r       Карта   псевдографических   символов   тонких
               рамок.
gg22   _s_t_r       Карта  псевдографических   символов   двойных
               рамок.
gg33   _s_t_r       Карта псевдографических символов двойных вер-
               тикальных и тонких горизонтальных рамок.
gg44   _s_t_r       Карта псевдографических символов тонких  вер-
               тикальных и двойных горизонтальных рамок.
gg55   _s_t_r       Карта псевдографических стрелок.
gg66   _s_t_r       Карта псевдографических блоков.
ggee   _s_t_r       Конец режима псевдографики.
ggnn   _b_o_o_l      Неопределенный тип линии (модем).
------------------------------------------------------------


                            -13-                    ДЕМОС/PV


TERMCAP(5)         ДЕМОС. Форматы файлов          TERMCAP(5)


------------------------------------------------------------
Имя  Тип  Зап. Описание
------------------------------------------------------------
ggss   _s_t_r       Включить режим псевдографики.
ggtt   _s_t_r       Карта графических символов (для rreedd).
hhcc   _b_o_o_l      Терминал является печатающим устройством.
hhdd   _s_t_r       Переход на 1/2 строки вниз.
hhoo   _s_t_r       Перевод  курсора  в  первую  позицию   первой
               строки.
hhss   _b_o_o_l      Терминал имеет информационную строку (обычно,
               25 строка).
hhuu   _s_t_r       Переход на 1/2 строки вверх.
hhzz   _b_o_o_l      Терминал Hazeltine не печатает  ~~,  использо-
               вать ~~ нельзя.
iiPP   _s_t_r       Имя программы инициализации терминала.
iicc   _s_t_r  p    Вставить символ в текущей позиции.
iiff   _s_t_r       Для инициализации терминала  выдать  на  него
               содержимое указанного файла.
iimm   _s_t_r  p    Переход в режима вставки символов.
iinn   _b_o_o_l      В режиме вставки символы _п_р_о_б_е_л и _п_у_с_т_о  раз-
               личаются.
iipp   _s_t_r  p*   Символ, за которым следует указанная последо-
               вательность кодов вставляется в текущей пози-
               ции.
iiss   _s_t_r       Последовательность  кодов  для  инициализации
               терминала.
iitt   _s_t_r       Начальные табуляции каждые _n позиций (1 пара-
               метр).
kk00   _s_t_r       Функциональная клавиша 0.
kk11   _s_t_r       Функциональная клавиша 1.
kk22   _s_t_r       Функциональная клавиша 2.
kk33   _s_t_r       Функциональная клавиша 3.
kk44   _s_t_r       Функциональная клавиша 4.
kk55   _s_t_r       Функциональная клавиша 5.
kk66   _s_t_r       Функциональная клавиша 6.
kk77   _s_t_r       Функциональная клавиша 7.
kk88   _s_t_r       Функциональная клавиша 8.
kk99   _s_t_r       Функциональная клавиша 9.
kk;;   _s_t_r       Функциональная клавиша 10.
kkAA   _s_t_r       Клавиша _в_с_т_а_в_и_т_ь _с_т_р_о_к_у.
kkBB   _s_t_r       Клавиша обратной табуляции.
kkCC   _s_t_r       Клавиша очистки экрана.
kkDD   _s_t_r       Клавиша удаления символа.
kkEE   _s_t_r       Клавиша очистки до конца строки.
kkFF   _s_t_r       Клавиша роллирования вперед.
kkHH   _s_t_r       Клавиша _в _к_о_н_е_ц (EENNDD).
kkII   _s_t_r       Клавиша вставки символа (IINNSSEERRTT).
kkLL   _s_t_r       Клавиша уничтожения строки.
kkNN   _s_t_r       Клавиша _с_л_е_д_у_ю_щ_а_я _с_т_р_а_н_и_ц_а.
kkPP   _s_t_r       Клавиша _п_р_е_д_ы_д_у_щ_а_я _с_т_р_а_н_и_ц_а.
kkRR   _s_t_r       Клавиша роллирования назад.
kkSS   _s_t_r       Клавиша очистки до конца экрана.
kkTT   _s_t_r       Клавиша установки табуляции.
kkaa   _s_t_r       Клавиша очистки всех табуляций.
kkbb   _s_t_r       Код клавиши _в_о_з_в_р_а_т _н_а _ш_а_г.
kkdd   _s_t_r       Код клавиши _к_у_р_с_о_р _в_н_и_з.
kkee   _s_t_r  p    Выключение режима _д_о_п_о_л_н_и_т_е_л_ь_н_о_й _к_л_а_в_и_а_т_у_р_ы.
------------------------------------------------------------


                            -14-                    ДЕМОС/PV


TERMCAP(5)         ДЕМОС. Форматы файлов          TERMCAP(5)


------------------------------------------------------------
Имя  Тип  Зап. Описание
------------------------------------------------------------
kkhh   _s_t_r       Код клавиши _h_o_m_e;
kkll   _s_t_r       Код клавиши _к_у_р_с_о_р _в_л_е_в_о;
kkmm   _b_o_o_l      Терминал имеет клавишу _m_e_t_a-_s_h_i_f_t.
kknn   _n_u_m       Число   клавиш   функциональной   клавиатуры,
               отличных от "0" - "9", ".", "-".
kkoo   _s_t_r       Описание  клавиш  функциональной  клавиатуры,
               отличных от "0" - "9", ".", "-".
kkrr   _s_t_r       Код клавиши _к_у_р_с_о_р _в_п_р_а_в_о.
kkss   _s_t_r       Включение режима дополнительной клавиатуры.
kktt   _s_t_r       Клавиша очистки маркера табуляции.
kkuu   _s_t_r       Клавиша _с_т_р_е_л_к_а _в_в_е_р_х.
ll00   _s_t_r       Название функциональной клавиши 0.
ll11   _s_t_r       Название функциональной клавиши 1.
ll22   _s_t_r       Название функциональной клавиши 2.
ll33   _s_t_r       Название функциональной клавиши 3.
ll44   _s_t_r       Название функциональной клавиши 4.
ll55   _s_t_r       Название функциональной клавиши 5.
ll66   _s_t_r       Название функциональной клавиши 6.
ll77   _s_t_r       Название функциональной клавиши 7.
ll88   _s_t_r       Название функциональной клавиши 8.
ll99   _s_t_r       Название функциональной клавиши 9.
llaa   _s_t_r       Название функциональной клавиши 10.
llee   _s_t_r       Перевод курсора на одну позицию влево.
llii   _n_u_m       Число строк на экране терминала.
llll   _s_t_r       Перевод курсора в  первую  позицию  последней
               строки.
llmm   _n_u_m       Число строк памяти дисплея.
mm11   _s_t_r       Атрибуты для рамки (для rreedd).
mm22   _s_t_r       Атрибуты для диагностик (для rreedd).
mm33   _s_t_r       Атрибуты для приглашения (для rreedd).
mm44   _s_t_r       Атрибуты для инф.сообщений (для rreedd).
mmbb   _s_t_r       Включение режима мигающих символов.
mmdd   _s_t_r       Включение режима ярких символов.
mmee   _s_t_r       Отмена всех режимов выделения текста (mmbb, mmdd,
               mmll, mmrr, uuss, ssoo).
mmhh   _s_t_r       Включение режима тусклых символов.
mmii   _b_o_o_l      Возможность  перемещения  курсора  в   режиме
               вставки текста.
mmkk   _s_t_r       Включение режима невидимых символов.
mmll   _s_t_r       Защита памяти над курсором.
mmmm   _s_t_r       Включение режима метасимволов.
mmoo   _s_t_r       Выключение режима метасимволов.
mmpp   _s_t_r       Включение режима защиты.
mmrr   _s_t_r       Включение режима инверсных символов.
mmss   _b_o_o_l      Возможность  перемещения  курсора  в   режиме
               выделения текста.
mmuu   _s_t_r       Разблокирование памяти (после mmll).
nnbb   _b_o_o_l      Запрет использования символа bbeellll  (код  \\77).
               Необходим, если данный символ отображается на
               экране.
nncc   _b_o_o_l      Запрет использования символа \\rr,  неправильно
               работает возврат каретки.
nndd   _s_t_r       Перевод курсора на одну позицию вправо.
------------------------------------------------------------



                            -15-                    ДЕМОС/PV


TERMCAP(5)         ДЕМОС. Форматы файлов          TERMCAP(5)


------------------------------------------------------------
Имя  Тип  Зап. Описание
------------------------------------------------------------
nnll   _s_t_r  p*   Переход в начало следующей  строки  (если  не
               \\nn).
nnss   _b_o_o_l      Терминал не имеет роллирования.
nnww   _s_t_r       Команда CCRR--LLFF.
ooss   _b_o_o_l      Терминал допускает наложение символов.
ppOO   _s_t_r       Включить печатающее  устройство  на  вывод  _n
               байтов (1 параметр).
ppbb   _n_u_m       Мин.скорость, требующая заполнителей.
ppcc   _s_t_r       Код символа-заполнителя (если не \\00).
ppff   _s_t_r       Выключение печатающего устройства.
ppkk   _s_t_r       Функциональная клавиша _n выдает строку  _m  (2
               параметра).
ppll   _s_t_r       Функциональная клавиша _n выполняет  строку  _m
               (2 параметра).
ppoo   _s_t_r       Включение печатающего устройства.
ppss   _s_t_r       Печать содержимого экрана.
pptt   _b_o_o_l      Терминал сам правильно  отображает  табуляции
               (обработка  табуляции в драйвере терминала не
               нужна).
ppxx   _s_t_r       Функциональная клавиша _n посылает строку _m (2
               параметра).
rrcc   _s_t_r       Восстановить положение курсора (после sscc).
rrff   _s_t_r       Для отмены  инициализации  выдать  содержимое
               указанного файла.
rrpp   _s_t_r       Повторить символ _n _m раз (2 параметра).
rrss   _s_t_r       Для  отмены  инициализации  выдать  указанную
               последовательность символов.
ssaa   _s_t_r       Установить видеоаттрибуты (9 параметров).
sscc   _s_t_r       Запомнить текущее положение курсора.
ssee   _s_t_r       Конец стандартного режима выделения текста.
ssff   _s_t_r  p    Прокрутить текст вперед.
ssgg   _n_u_m       Число символов-заполнителей для команд  ssoo  и
               ssee.
ssoo   _s_t_r       Установить   стандартный   режим    выделения
               текста.
ssrr   _s_t_r  p    Прокрутить текст назад (снизу вверх).
sstt   _s_t_r       Установить табуляцию в текущей позиции.
ssww   _s_t_r       Установить окно (область вывода на терминал).
               Формат  данного  описателя  слишком  сложен и
               здесь не приводится.
ttaa   _s_t_r  p    Команда табуляции (если не \\tt).
ttcc   _s_t_r       Дополнить описание свойств терминала из  опи-
               сания  устройства  с указанным именем. Данное
               описание должно быть последним в записи.
ttee   _s_t_r       Отменить режим адресации курсора (ccmm).
ttii   _s_t_r       Войти в режим адресации курсора.
ttss   _s_t_r       Перейти в информационную строку.
uucc   _s_t_r       Подчеркнуть один символ и остаться на месте.
uuee   _s_t_r       Конец режима подчеркивания.
uugg   _n_u_m       Число символов-заполнителей для команд  uuss  и
               uucc.
uull   _b_o_o_l      Терминал имеет возможность подчеркивания сим-
               волов.
uupp   _s_t_r       Kурсор на строку вверх.
------------------------------------------------------------


                            -16-                    ДЕМОС/PV


TERMCAP(5)         ДЕМОС. Форматы файлов          TERMCAP(5)


------------------------------------------------------------
Имя  Тип  Зап. Описание
------------------------------------------------------------
uuss   _s_t_r       Включить режим подчеркивания выводимых симво-
               лов.
vvbb   _s_t_r       Видимый аналог звукового сигнала.
vvee   _s_t_r       Сделать курсор обычным (после vvss//vvii).
vvii   _s_t_r       Сделать курсор невидимым.
vvss   _s_t_r       Сделать курсор более заметным.
vvtt   _n_u_m       Число виртуальных терминалов.
wwii   _s_t_r       Установить окно (4 параметра).
wwss   _n_u_m       Длина строки состояния.
xxbb   _b_o_o_l      Терминал _B_e_e_h_i_v_e (ff11=EESSCC, ff22=CCTTRRLL//CC).
xxnn   _b_o_o_l      Когда напечатан последний  символ  в  строке,
               переход на следующую строку осуществляется не
               сразу, а только после печати еще одного  сим-
               вола. Этот флаг употребляется только вместе с
               aamm.
xxoo   _b_o_o_l      Терминал использует (CCTTRRLL//QQ, CCTTRRLL//SS).
xxrr   _b_o_o_l      Код \\rr действует как \\nn\\rr.
xxss   _b_o_o_l      Выделение сохраняется при наложении.
xxtt   _b_o_o_l      Запрет использования  табуляции  (\\tt)  (вывод
               кода   табуляции   изменяет   информацию   на
               экране).
------------------------------------------------------------

ФФААЙЙЛЛЫЫ
       /_e_t_c/_t_e_r_m_c_a_p

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
       _l_o_g_i_n(1), _c_u_r_s_e_s(3x), _r_e_d(1), _t_e_r_m_c_a_p(3x), _m_o_r_e(1)

ЗЗААММЕЕЧЧААННИИЯЯ
       Суммарный размер символьных описателей не должен пре-
       вышать 256 байт.

























                            -17-                    ДЕМОС/PV

