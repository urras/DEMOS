
TAR(5)             ДЕМОС. Форматы данных              TAR(5)


ИИММЯЯ
        ttaarr - формат архива на магнитной ленте.

ООППИИССААННИИЕЕ
        Команда _t_a_r(1) объединяет несколько  файлов  в  один
        архив для записи на магнитную ленту.

        Архивный файл состоит из последовательности  блоков,
        размером  TTBBLLOOCCKK.   При  записи в архив перед каждым
        файлом записывается заголовок,  за  которым  следуют
        блоки  данных.   В  конце архива в качестве признака
        конца архива записываются два блока нулей.

        При записи на магнитную ленту несколько блоков могут
        объединяться  в одну физическую запись (число блоков
        в записи  устанавливается  ключем  bb  команды  ttaarr).
        Стандартно  в  одной физической записи содержится 32
        блока.  Следует отметить, что  так  как  все  записи
        имеют одинаковую длину, то за признаком конца архива
        могут присутствовать случайные данные.

        Заголовок файла имеет следующую структуру:

        #ddeeffiinnee TTBBLLOOCCKK  512
        #ddeeffiinnee NNAAMMSSIIZZ  100

        uunniioonn _h_b_l_o_c_k {
            cchhaarr    _d_u_m_m_y[TTBBLLOOCCKK];
            ssttrruucctt _h_e_a_d_e_r {
                cchhaarr nnaammee[NAMSIZ];
                cchhaarr mmooddee[8];
                cchhaarr uuiidd[8];
                cchhaarr ggiidd[8];
                cchhaarr ssiizzee[12];
                cchhaarr mmttiimmee[12];
                cchhaarr cchhkkssuumm[8];
                cchhaarr lliinnkkffllaagg;
                cchhaarr lliinnkknnaammee[NNAAMMSSIIZZ];
            }       _d_b_u_f;
        };

        Все элементы этой структуры являются текстом в  коде
        КОИ-8  и  оформлены  по  правилам текстовых констант
        языка Си.

        nnaammee     Содержит имя файла. Следует учитывать,  что
                 файл  записывается на ленту под тем именем,
                 которое было задано  в  качестве  параметра
                 команде ttaarr.  Например, в архиве может при-
                 сутствовать       файл       с       именем
                 ../../_g_e_o_r_g_e/_l_i_b._a.

        mmooddee     Статус файла (см.  _c_h_m_o_d(1)).

        uuiidd,ggiidd  Идентификаторы владельца файла.

        ssiizzee     Размер файла в байтах. Если заголовок отно-
                 сится к альтернативному имени файла, данное


                            -1-                     ДЕМОС/PV


TAR(5)             ДЕМОС. Форматы данных              TAR(5)


                 поле содержит значение _0.

        mmttiimmee    Дата последней  модификации  файла.  Формат
                 представления  даты  соответствует  формату
                 принятому в команде _d_a_t_e(1).

        cchhkkssuumm   Контрольная с  сумма  всех  символов  заго-
                 ловка.

        lliinnkkffllaagg Признак типа связи. Если при записи в архив
                 было  указано несколько альтернативных имен
                 или косвенных ссылок на один и тот же файл,
                 то  содержимое этого файла будет записано в
                 архив только один раз,  но  соответствующих
                 заголовков  будет  несколько. Тип заголовка
                 распознается по значению данного поля. Если
                 lliinnkkffllaagg содержит символ _0, заголовок соот-
                 ветствует первому (или единственному) имени
                 файла  и  за  ним  следуют  данные. Это имя
                 является основным, то есть для восстановле-
                 ния  файла  из архива обязательно указывать
                 именно это имя. Остальные значения  опреде-
                 ляют  тип  связи  альтернативного  имени  с
                 основным:

                 _1  - Указанное имя  имеет  прямую  связь  с
                      именем lliinnkknnaammee.

                 _2  - Указанное имя имеет косвенную связь  с
                      именем lliinnkknnaammee.

        lliinnkknnaammee Данное поле содержит основное имя для  дан-
                 ного альтернативного.

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
        _t_a_r(1)

ЗЗААММЕЕЧЧААННИИЯЯ
        Нельзя записать  на  ленту  файл  с  именем  длиннее
        NNAAMMSSIIZZ байт.




















                            -2-                     ДЕМОС/PV

