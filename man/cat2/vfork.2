
VFORK(2)          ДЕМОС. Системные вызовы           VFORK(2)


ИИММЯЯ
       vvffoorrkk - порождение нового процесса.

ФФООРРММААТТ
       _p_i_d = vvffoorrkk()
       iinntt _p_i_d;

ООППИИССААННИИЕЕ
       Системный  вызов  vvffoorrkk  используется  для   создания
       нового  процесса  без  полного  копирования адресного
       пространства процесса-родителя.  В отличие от  вызова
       _f_o_r_k(2), процесс-потомок разделяет память породившего
       его процесса до своего завершения (см.  _e_x_i_t(2))  или
       смены  программы  (см.  _e_x_e_c_v_e(2)).  Процесс-родитель
       временно  приостанавливается,  когда  процесс-потомок
       использует  его  ресурсы.  Как и _f_o_r_k(2), данный сис-
       темный  вызов  возвращает  значение  0  в   контексте
       процесса-потомка,  и,  несколько позже, идентификатор
       порожденного процесса в контексте процесса-родителя.

       Если в период  выполнения  в  контексте  порожденного
       процесса  происходит возврат из подпрограммы, в кото-
       рой вызывался  vvffoorrkk,  то  при  переходе  в  контекст
       процесса-родителя  возврат  из  этой  же подпрограммы
       может произойти по несуществующему указателю стека.

       Если программа  содержит  оверлеи  (см.   _l_d(1)),  то
       после  выполнения vvffoorrkk можно вызывать функции только
       из текущего и базового сегментов (нельзя менять номер
       оверлея).   Эти  отличия следует учитывать при замене
       вызова _f_o_r_k(2).

       Этот способ порождения процесса является более эффек-
       тивным,  если  в  новом процессе предполагается смена
       программы с помощью системного вызова _e_x_e_c_v_e(2).

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
       _f_o_r_k(2), _e_x_e_c_v_e(2), _s_i_g_s_y_s(2), _w_a_i_t(2), _l_d(1)

ЗЗААММЕЕЧЧААННИИЯЯ
       Для  предотвращения  взаимной  блокировки   процессу-
       потомоку в период выполнения vvffoorrkk никогда не переда-
       ются сигналы SSIIGGTTTTOOUU и SSIIGGTTTTIINN.  Хотя разрешен  вывод
       на  управляющий  терминал, но при попытке ввода будет
       зафиксирован конец файла.















                            -1-                     ДЕМОС/PV

