
MSGGET(2)         ДЕМОС. Системные вызовы          MSGGET(2)


ИИММЯЯ
       mmssggggeett - создать новую очередь сообщений или  подклю-
       читься к очереди сообщений.

ФФООРРММААТТ
       #iinncclluuddee <_s_y_s/_t_y_p_e_s._h>
       #iinncclluuddee <_s_y_s/_i_p_c._h>
       #iinncclluuddee <_s_y_s/_m_s_g._h>

       _i_d = mmssggggeett( _k_e_y, _f_l_a_g )
       kkeeyy__tt _k_e_y;
       iinntt _f_l_a_g;

ООППИИССААННИИЕЕ
       Системный вызов mmssggggeett создает новую очередь  сообще-
       ний  с ключом _k_e_y.  Этот же системный вызов выполняет
       подключение к уже существующей очереди сообщений.

       Системный вызов mmssggggeett  возвращает  уникальное  целое
       число (идентификатор) _i_d, при помощи которого в даль-
       нейшем производятся операции над сообщениями из  этой
       очереди.

       Для создания очереди параметр _f_l_a_g должен иметь вид:

              _к_о_д_ы__д_о_с_т_у_п_а|IIPPCC__CCRREEAATT

       Здесь _к_о_д_ы__д_о_с_т_у_п_а - аналог кодов  доступа  к  файлам
       (смотри  cchhmmoodd((22)),,  ssttaatt((22))).  В частности существуют
       коды

       MMSSGG__RR  можно читать сообщения из очереди

       MMSSGG__WW  можно записывать сообщения в очередь

       Для отказа от создания очереди, если очередь с ключом
       _k_e_y  уже  существует,  следует  использовать параметр
       _f_l_a_g вида

              _к_о_д_ы__д_о_с_т_у_п_а|IIPPCC__CCRREEAATT|IIPPCC__EEXXCCLL

       Можно указать  ключ  IIPPCC__PPRRIIVVAATTEE,  обозначающий,  что
       конкретное  значение  ключа не имеет значения; если в
       этом случае какой-либо  процесс  должен  будет  обра-
       титься  к этой очереди, то ему должен быть уже извес-
       тен _i_d очереди, поскольку невозможно выполнить  подк-
       лючение    системным    вызовом   mmssggggeett   с   ключом
       IIPPCC__PPRRIIVVAATTEE.

       Системный вызов mmssggggeett позволяет также получать  дос-
       туп к уже существующей очереди с указанным ключом _k_e_y
       (т.е. узнать ее идентификатор).   Для  этого  следует
       указывать  _f_l_a_g  равное  кодам  доступа,  который  вы
       хотите иметь к очереди:

              _к_о_д_ы__д_о_с_т_у_п_а




                            -1-                      ДЕМОС/P


MSGGET(2)         ДЕМОС. Системные вызовы          MSGGET(2)


ККООДДЫЫ ООШШИИББООКК
       При неудаче системный вызов возвращает значение -1  и
       код ошибки в переменной eerrrrnnoo:

       [[EENNOOSSPPCC]]    Очередь не может быть создана,  поскольку
                   исчерпан лимит в системе.

       [[EEAACCCCEESS]]    Попытка получить доступ к уже  существую-
                   щей очереди, не имея соответствующих прав
                   доступа.

       [[EEEEXXIISSTT]]    Очередь с ключом _k_e_y уже существует (ука-
                   заны флаги IIPPCC__CCRREEAATT|IIPPCC__EEXXCCLL).

       [[EENNOOEENNTT]]    Попытка получить доступ к очереди,  кото-
                   рая  еще  не существует.  (флаг IIPPCC__CCRREEAATT
                   не указан).

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
       _m_s_g_c_t_l(_2), _m_s_g_s_n_d(_2).








































                            -2-                      ДЕМОС/P

