
DUP(2)            ДЕМОС. Системные вызовы             DUP(2)


ИИММЯЯ
       dduupp, dduupp22 - дублировать дескриптор открытого файла.

ФФООРРММААТТ
       _n_e_w__f_d = dduupp( _o_l_d__f_d )
       iinntt _n_e_w__f_d, _o_l_d__f_d;

       _a_n_s = dduupp22( _o_l_d__f_d, _n_e_w__f_d )
       iinntt _n_e_w__f_d, _o_l_d__f_d, _a_n_s;

ООППИИССААННИИЕЕ
       Вызов dduupp возвращает дескриптор файла _n_e_w__f_d, который
       является  синонимом  дескриптора  _o_l_d__f_d.  В качестве
       нового дескриптора выдается номер первого  свободного
       элемента в таблице дескрипторов открытых файлов.

       Старый и новый дескрипторы файлов имеют общий  указа-
       тель   чтения/записи.    Системные   вызовы  _r_e_a_d(2),
       _w_r_i_t_e(2) и _l_s_e_e_k(2) изменяют значение указателя неза-
       висимо  от того, какой из дескрипторов использовался.
       Для получения "независимого"  дескриптора  необходимо
       заново открыть файл с помощью _o_p_e_n(2).

       Во второй форме (dduupp22) этого системного  вызова  явно
       задается  значение  нового  дескриптора.  Если данный
       дескриптор уже ссылается на какой-либо открытый файл,
       этот файл закрывается (вызывается _c_l_o_s_e(2)).

ППРРИИММЕЕРР
       Характерное использование вызова dduupp22 - перенаправле-
       ние ввода-вывода процесса.

       _f_d = ooppeenn( _n_e_w_s_t_d_i_n, 0 );
       dduupp22( _f_d, 0 );
       cclloossee( _f_d );
       /* _n_e_w_s_t_d_i_n теперь - новый файл стандартного ввода */

ЗЗННААЧЧЕЕННИИЕЕ
       Возвращается значение -1, если ошибочно  задан  деск-
       риптор файла или уже открыто слишком много файлов.

ККООДДЫЫ ООШШИИББООКК
       При неудачном завершении переменная eerrrrnnoo может  при-
       нимать следующие значения:

       [[EEBBAADDFF]]     Некорректное значение параметров.

       [[EEMMFFIILLEE]]    Переполнена таблица открытых файлов  про-
                   цесса.

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
       _o_p_e_n(2), _c_l_o_s_e(2), _p_i_p_e(2), _c_r_e_a_t(2)








                            -1-                     ДЕМОС/PV

