
MPY(4)           ДЕМОС. Драйверы устройств            MPY(4)


ИИММЯЯ
       mmppyy - мультиплексирование линии связи

ООППИИССААННИИЕЕ
       Мультиплексная  дисциплина  линии  предназначена  для
       разделения  одной физической линии связи между ЭВМ на
       несколько логических каналов.  Для каждого  канала  в
       каталоге  /_d_e_v  должен  существовать специальный файл
       символьного устройства.  С точки зрения прикладных  и
       системных  программ  каналы  ничем  не  отличаются от
       обычных линий связи.

       Максимальное число каналов,  на  которые  разделяется
       мультиплексируемая  линия связи, задается при генера-
       ции системы (обычно - 8 каналов).

       Для того, чтобы  включить  мультиплексирование  линии
       связи,  ее нужно открыть на чтение и запись и устано-
       вить мультиплексную дисциплину при помощи  системного
       вызова iiooccttll:

              #iinncclluuddee <_s_g_t_t_y._h>

              iinntt _l_d_i_s_c = MMPPYYLLDDIISSCC;
              iiooccttll(_l_i_n_e, TTIIOOCCSSEETTDD, &_l_d_e_s_c);

       Если какие-либо программы  пытались  открывать  спец-
       файлы  каналов до того, как была установлена мультип-
       лексная дисциплина на  разделяемую  линию,  системный
       вызов ooppeenn будет задерживаться до тех пор, пока муль-
       типлексная дисциплина не  будет  установлена  (анало-
       гично ожиданию появления несущей на линии, подключен-
       ной через модем).

       Если программа, установившая  мультиплексную  дисцип-
       лину,  закрывает  линию  связи, то все программы, для
       которых устройства-каналы являются управляющими  тер-
       миналами  получат  сигнал  SSIIGGHHUUPP (аналогично разрыву
       связи при работе с модемами).

       В системе одновременно может обслуживаться  несколько
       мультиплексируемых линий.  В этом случае соответствие
       линий и групп по _N каналов (_N  -  максимальное  число
       каналов,  задается при генерации) определяется поряд-
       ком инициализации (установки MMPPYYLLDDIISSCC) линий.   Опре-
       делить  номер группы каналов для уже инициализирован-
       ной линии можно при помощи системного вызова

              iinntt _g_r_o_u_p;

              iiooccttll(_l_i_n_e, MMPPYYGGEETTLL, &_g_r_o_u_p);

       Инициализация мультиплексных  линий  обычно  произво-
       дится  с  помощью  программы  _m_p_y_i_n_i_t(8)  в командном
       файле /_e_t_c/_r_c, выполняемом при загрузке системы.

ФФААЙЙЛЛЫЫ
       /_d_e_v/_t_t_y[_a-_d][_0-_f]  спецфайлы каналов


                            -1-                      ДЕМОС/P


MPY(4)           ДЕМОС. Драйверы устройств            MPY(4)


ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
       _i_o_c_t_l(2), _t_t_y(4), _m_p_y_i_n_i_t(8)

ЗЗААММЕЕЧЧААННИИЯЯ
       Протокол мультиплексной  дисциплины  не  поддерживает
       какой-либо  синхронизации  (flow control); по каждому
       каналу может быть свой протокол.

       Мультиплексная  дисциплина  требует  8-битной   линии
       связи и установки режима RRAAWW.  С точки зрения пользо-
       вателя канал ведет себя как простая  последовательная
       линия  связи  (скорость  передачи,  четность и формат
       кадра не устанавливаются); все  восьмибитные  символы
       (включая 0 и т.п.) пересылаются без изменений.














































                            -2-                      ДЕМОС/P

