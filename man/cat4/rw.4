
RW(4)             ДЕМОС. Специальные файлы             RW(4)


ИИММЯЯ
        rrww - жесткий диск Электроники-85 (СМ 5401).

ООППИИССААННИИЕЕ
        Данный специальный файл позволяет работать с  диском
        типа  Винчестер как с последовательным файлом.  Весь
        диск делится на несколько частей, каждая из  которых
        может  содержать  файловую систему.  Для определения
        номера части используются  биты  07  дополнительного
        кода  устройства.   Старшие  биты  используются  для
        определения номера накопителя.   В  данном  варианте
        системы  физический  диск  распределяется  следующим
        образом:

        Имя части Начало Длина Цилиндры Назначение
        rrww??_a      0      17984 0-280    /
        rrww??_b      17984   1600 281-305  _s_w_a_p
        rrww??_c      19584  22272 306-653  /_m_n_t/_u_s_e_r_a
        rrww??_h      0      41856 0-653    полный пакет

        Части [_d-_g] не используются.

        В  качестве  жесткого  диска  Электроники-85   могут
        использоваться различные по емкости накопители:

        Тип            Емкость Число   Размер файл.сист.(Кб)
                               цилинд.  rrww?aa  rrww?bb   rrww?cc
        СМ 5401, RD50  5 Мб     154     4672   -      -
        RD51           10 Mб    306     8992  _s_w_a_p    -
        Segate         20 Мб    654     8992  _s_w_a_p  11136

        Для данных  файлов  доступ  к  диску  осуществляется
        через  обычный  системный механизм буферизации, поэ-
        тому чтение или запись этих  файлов  не  зависит  от
        размера  физических  записей  на диске.  Кроме того,
        существует "прозрачный"  (rraaww)  режим  ввода/вывода,
        который обеспечивает непосредственную  передачу дан-
        ных между диском и принадлежащим пользователю  буфе-
        ром чтения или записи. Один вызов типа read (чтение)
        или wwrriittee (запись) влечет за собой только одну  опе-
        рацию    физического    ввода/вывода.   "Прозрачный"
        ввод/вывод считается  более эффективным  в  случаях,
        когда единовременно передаются большие объемы инфор-
        мации.  Имена  файлов,  обеспечивающих  "прозрачный"
        режим ввода/вывода, начинаются с символов _r.

        При  работе  в  "прозрачном"  режиме,  адрес  буфера
        ввода-вывода должен быть выровнен по границе слова.

ФФААЙЙЛЛЫЫ
        /_d_e_v/_r_w[0-3][_a-_h]
        /_d_e_v/_r_r_w[0-3][_a-_h]

ДДИИААГГННООССТТИИККАА
        rrww%%dd%%cc: _e_r_r _b_n %_d _e_r=%_b _d_s_2=%_b
                Эта  диагностика  появляется  при  неудачном
                завершении  операции обмена.  Выдается номер
                блока,   который   не   удалось    прочитать


                            -1-                      ДЕМОС/P


RW(4)             ДЕМОС. Специальные файлы             RW(4)


                (записать)  и  значения  регистров  команд и
                ошибок контроллера.

ЗЗААММЕЕЧЧААННИИЯЯ
        При работе в "прозрачном"  режиме  системные  вызовы
        rreeaadd  и  wwrriittee  усекают заданное смещение в файле по
        границе 512-байтного блока.   Таким  образом,  прог-
        раммы,  которые, возможно, будут осуществлять доступ
        к устройствам "прозрачного" ввода/вывода  или  вызы-
        вать системные программы rreeaadd, wwrriittee и llsseeeekk, всегда
        должны оперировать блоками информации, кратными  512
        байтам.
















































                            -2-                      ДЕМОС/P

