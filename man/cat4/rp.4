
RP(4)             ДЕМОС. Специальные файлы             RP(4)


ИИММЯЯ
        rrpp - пакетные диски СМ 5407 (ЕС 5061).

ООППИИССААННИИЕЕ
        Данный специальный файл позволяет  работать  с  уст-
        ройством СМ5407 как с последовательным файлом.  Каж-
        дый пакет делится на  несколько  частей,  каждая  из
        которых может содержать файловую систему.  Для опре-
        деления номера части используются биты  07  дополни-
        тельного  кода устройства. Биты 070 используются для
        определения номера  дисковода.   В  данном  варианте
        системы  физический  диск  распределяется  следующим
        образом:

        Имя части Начало Длина Цилиндры Назначение
        rrpp??_a      0       6000 0-29     /
        rrpp??_b      6000    5000 30-55    _s_w_a_p
        rrpp??_c      11000  29600 56-202   /_u_s_r
        rrpp??_h      0      40600 0-202    полный пакет

        Части [_d-_g] не используются.

        Для данных  файлов  доступ  к  диску  осуществляется
        через  обычный  системный механизм буферизации, поэ-
        тому чтение или запись этих  файлов  не  зависит  от
        размера  физических  записей  на диске.  Кроме того,
        существует "прозрачный"  (_r_a_w)  режим  ввода/вывода,
        который обеспечивает непосредственную  передачу дан-
        ных между диском и принадлежащим пользователю  буфе-
        ром чтения или записи. Один вызов типа rreeaadd (чтение)
        или wwrriittee (запись) влечет за собой только одну  опе-
        рацию    физического    ввода/вывода.   "Прозрачный"
        ввод/вывод считается  более эффективным  в  случаях,
        когда единовременно передаются большие объемы инфор-
        мации.  Имена  файлов,  обеспечивающих  "прозрачный"
        режим ввода/вывода, начинаются с символов _r.

        При  работе  в  "прозрачном"  режиме  адрес   буфера
        ввода-вывода должен быть выровнен по границе слова.

ФФААЙЙЛЛЫЫ
        /_d_e_v/_r_p[0-7][_a-_h]
        /_d_e_v/_r_r_p[0-7][_a-_h]

ДДИИААГГННООССТТИИККАА
        rrpp%%dd%%cc: _h_a_r_d _e_r_r_o_r _b_n %_d _c_s=%_b _e_r=%_b
                Эта  диагностика  появляется  при  неудачном
                завершении  операции обмена.  Выдается номер
                блока, который не удалось  прочитать  (запи-
                сать)  и  значения регистров команд и ошибок
                контроллера.

        rrpp%%dd: _w_r_i_t_e _l_o_c_k_e_d.
                Данная  диагностика  выдается  при   попытке
                записи на устройство физически защищенное по
                записи (в соответствующее положение установ-
                лен переключатель на дисководе).



                            -1-                      ДЕМОС/P


RP(4)             ДЕМОС. Специальные файлы             RP(4)


ЗЗААММЕЕЧЧААННИИЯЯ
        При работе в "прозрачном"  режиме  системные  вызовы
        rreeaadd  и  wwrriittee  усекают заданное смещение в файле по
        границе 512-байтного блока.   Таким  образом,  прог-
        раммы,  которые, возможно, будут осуществлять доступ
        к устройствам "прозрачного" ввода/вывода  или  вызы-
        вать системные программы rreeaadd, wwrriittee и llsseeeekk, всегда
        должны оперировать блоками информации, кратными  512
        байтам.



















































                            -2-                      ДЕМОС/P

