
LP(4)             ДЕМОС. Специальные файлы             LP(4)


ИИММЯЯ
        llpp - печатающие устройства LP-11.

ООППИИССААННИИЕЕ
        Данная группа специальных файлов обеспечивает работу
        с  различными  печатающими  устройствами  (СМ  6302,
        DZM-180, СМ 6315, СМ  6900  и  т.д.),  подключенными
        через параллельный интерфейс LP-11.  Для выбора уст-
        ройства используются биты  07  дополнительного  кода
        устройства.

        При работе в стандартном режиме  считается,  что  на
        листе  размещается 66 строк и длина строки равна 132
        символа. Предполагается, что устройство может  отоб-
        ражать  набор знаков, в который входят только специ-
        альные символы, русские и латинские прописные буквы.
        При  этом строчные буквы переводятся в соответствую-
        щие прописные, а также происходит  следущий  перевод
        некоторых спецсимволов:

                Входной   Выдаваемый
                   {      ( <шаг назад> -
                   }      ) <шаг назад> -
                   |      ! <шаг назад> -
                   `      ' <шаг назад> -

        Если число строк превышает заданный размер страницы,
        то  выдается  символ  прогона  формата  ('\\ff'). Если
        число символов превышает заданный размер строки,  то
        остаток строки пропускается.

        Драйвер печатающего устройства соответствующим обра-
        зом  интерпретирует символы <_в_о_з_в_р_а_т _к_а_р_е_т_к_и> ('\\rr',
        CCRR), <_ш_а_г  _н_а_з_а_д>  ('\\bb',  BBSS),  <_т_а_б_у_л_я_ц_и_я>  ('\\tt',
        TTAABB),  <_п_р_о_г_о_н  _ф_о_р_м_а_т_а>  (', FFFF) и <_п_е_р_е_в_о_д _с_т_р_о_к_и>
        ('\\nn', NNLL).

        Существует также возможность изменять данные  согла-
        шения.  Системный вызов:

                ssttrruucctt llppmmooddeess _l_p;
                iiooccttll (_f_d, LLPPIIOOGGEETTPP, &_l_p)

        записывает в  _l_p  текущие  режимы  работы  драйвера.
        Структура _l_p имеет вид:

        ssttrruucctt llppmmooddeess {
            sshhoorrtt llppmm__ffllaaggss;  /* Режимы работы */
            sshhoorrtt llppmm__mmaaxxccooll; /* Ширина строки */
            sshhoorrtt llppmm__eejjlliinnee; /* Число строк на листе */
        } _l_p;

        Поле llppmm__ffllaaggss является шкалой режимов работы  драй-
        вера и составляется из следующих признаков:

        LLPPRRAAWW   Прозрачный режим. Символы выводятся без вся-
                кой  обработки,  контроль  на  размеры листа
                отсутствует.


                            -1-                      ДЕМОС/P


LP(4)             ДЕМОС. Специальные файлы             LP(4)


        LLPPCCYYRRIILLLL
                Устройство имеет русские буквы.

        LLPPCCAAPP   Устройство имеет прописные и строчные буквы.

        LLPPSSIISSOO  Если заданы режимы LLPPCCYYRRIILLLL и LLPPCCAAPP,  счита-
                ется,  что устройство отображает полный зна-
                ковый набор кода КОИ-8, а  русский/латинский
                регистры   переключаются   символами   SSII/SSOO
                (016/017).   Если  в  аналогичной   ситуации
                LLPPSSIISSOO  не установлен, считается, что перек-
                лючения регистров не требуется.

        LLPPBBAARR   Если  устройство  имеет   только   прописные
                русские  и  латинские  буквы  ((_l_p_m__m_o_d_e_s  &
                (LLPPCCYYRRIILLLL | LLPPCCAAPP)) == LLPPCCYYRRIILLLL), символ '|'
                (вертикальная черта) выдается как код 0177.

        LLPPEEJJEECCTT Если значение  llppmm__eejjlliinnee  не  равно  0,  то
                после  вывода  llppmm__eejjlliinnee  символов перевода
                строки ('\\nn') автоматически выдается  символ
                прогона формата ('\\ff').

        Для установки новых режимов работы служит  системный
        вызов:

                iiooccttll (_f_d, LLPPIIOOSSEETTPP, &_l_p);

ФФААЙЙЛЛЫЫ
        /_d_e_v/_l_p*

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
        _l_p_r(1), _l_p_s_e_t(1), _l_p_t_a_b(5), _l_p__d_a_e_m_o_n(8)

ЗЗААММЕЕЧЧААННИИЯЯ
        При попытке чтения данного специального файла фикси-
        руется   ошибка.   Операции  задания  смещения  (см.
        _l_s_e_e_k(2)) игнорируются.

        Следует учитывать, что смены режимов работы драйвера
        распространяется не только текущий, но и на все пос-
        ледующие процессы, которые будут обращаться к  этому
        устройству.

















                            -2-                      ДЕМОС/P

