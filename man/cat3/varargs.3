
VARARGS(3)      ДЕМОС. Библиотечные функции       VARARGS(3)


ИИММЯЯ
       vvaarraarrggss - работа со списком аргументов

ФФООРРММААТТ
       #iinncclluuddee <_v_a_r_a_r_g_s._h>

       _f_u_n_c_t_i_o_n (vvaa__aalliisstt)
       vvaa__ddccll

       vvaa__lliisstt _p_v_a_r;
       vvaa__ssttaarrtt (_p_v_a_r);
       _f = vvaa__aarrgg (_p_v_a_r, _t_y_p_e);
       vvaa__eenndd (_p_v_a_r);

ООППИИССААННИИЕЕ
       Данный набор макроопределений позволяет реализовывать
       мобильные  процедуры,  работающие с переменным числом
       параметров (типа _p_r_i_n_t_f(3s), _e_x_e_c_l(3)).

       vvaa__aalliisstt в качестве параметра функции определяет спи-
       сок с переменным числом аргументов.

       vvaa__ddccll это описание для vvaa__aalliisstt.  После vvaa__ddccll точка
       с запятой не нужна.

       vvaa__lliisstt это тип переменной _p_v_a_r, которая используется
       как указатель на список.

       vvaa__ssttaarrtt (_p_v_a_r) вызывается для инициализации _p_v_a_r при
       начале работы со списком.

       vvaa__aarrgg (_p_v_a_r, _t_y_p_e)  возвращает  аргумент  в  списке,
       заданном  _p_v_a_r  и продвигает этот указатель к следую-
       щему аргументу.  _t_y_p_e - это тип  возвращаемого  аргу-
       мента. Различные типы могут смешиваться, но автомати-
       чески не определяется, аргумент  какого  типа  ожида-
       ется.

       vvaa__eenndd (_p_v_a_r) используется для завершения  работы  со
       списком.

       Возможна совместная обработка списка, каждый из  ука-
       зателей  на  который должен быть заключен в скобки из
       vvaa__ssttaarrtt и vvaa__eenndd..

ППРРИИММЕЕРР
       #iinncclluuddee <_s_t_d_i_o._h>
       #iinncclluuddee <_v_a_r_a_r_g_s._h>

       mmaaiinn ()
       {
           _s_h_o_w (2, 3.1, "but", 4.1, "end");
           _s_h_o_w (1, 5.9, "hello");
           _s_h_o_w (4, 6.2, "oops", 5.3, "blah", 5.1,
                       "lovely", 2.3, "madrigal");
       }

       /*


                            -1-                     ДЕМОС/PV


VARARGS(3)      ДЕМОС. Библиотечные функции       VARARGS(3)


        * Первый параметр - целое,
        * определяющее сколько пар аргументов передается.
        * Каждая пара состоит из вещественного числа
        * и строки.
        *
        * Следует помнить, что при передаче параметров в
        * функцию тип ffllooaatt преобразуется в
        * ddoouubbllee, а тип cchhaarr в iinntt.
        */

       /*VVAARRAARRGGSS11*/
       _s_h_o_w (_n, vvaa__aalliisstt)
       iinntt _n;
       vvaa__ddccll
       {
           vvaa__lliisstt _a_p;
           iinntt _i;
           ddoouubbllee _f;
           cchhaarr *_p;

           vvaa__ssttaarrtt (_a_p);
           ffoorr (_i = 0; _i < _n; ++_i) {
                _f = vvaa__aarrgg (_a_p, ddoouubbllee);
                _p = vvaa__aarrgg (_a_p, cchhaarr *);
                pprriinnttff ("%4.1f %s\n", _f, _p);
           }
           vvaa__eenndd (_a_p);
       }

ФФААЙЙЛЛЫЫ
       /_u_s_r/_i_n_c_l_u_d_e/_v_a_r_a_r_g_s._h

ЗЗААММЕЕЧЧААННИИЯЯ
       Есть три основных  пути,  чтобы  определить,  сколько
       аргументов передается в функцию.

       1)     Первым параметром явно передавать число  аргу-
              ментов.

       2)     Обозначать специальным признаком конец  списка
              аргументов, например, используя для этого NNUULLLL
              (_e_x_e_c_l(3)).

       3)     Определять число аргументов в  зависимости  от
              контекста уже полученных (_p_r_i_n_t_f(3s)).

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
       _e_x_e_c_l(3), _p_r_i_n_t_f(3s), _v_p_r_i_n_t_f(3s)












                            -2-                     ДЕМОС/PV

