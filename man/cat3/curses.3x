
CURSES(3X)      ДЕМОС. Библиотечные функции       CURSES(3X)


ИИММЯЯ
       ccuurrsseess - библиотека программ для работы с терминалом.

ООППИИССААННИИЕЕ
       Библиотека ccuurrsseess предназначена для создания интерак-
       тивных компонент. Программа, написанная с применением
       функций библиотеки ccuurrsseess, может:

              - работать на терминале любого  типа,  извест-
                ного системе;

              - использовать такие изобразительные средства,
                присущие  терминалам,  как  выделение текста
                инверсией фона или подчеркиванием;

              - организовывать многооконный режим работы.

       Такие программы должны включать описание макрофункций
       и глобальных переменных библиотеки ccuurrsseess:

              #iinncclluuddee <_c_u_r_s_e_s._h>

       и транслироваться с помощью команды:

              cccc [_ф_л_а_г_и__С_и] _ф_а_й_л_ы --llccuurrsseess --lltteerrmmlliibb

       Везде далее _w_i_n  -  это  WWIINNDDOOWW *_w_i_n;  также  следует
       учесть, что функции nneewwwwiinn и ssuubbwwiinn возвращают значе-
       ние такого же типа (WWIINNDDOOWW *).

       Существует стандартное окно, размером  в  весь  экран
       терминала.  Обращение к нему идет по имени ssttddssccrr.

       Данное описание является скорее кратким каталогом  по
       функциям библиотеки ccuurrsseess, для более детального зна-
       комства с возможностями данного пакета  рекомендуется
       смотреть подробное руководство.

       УУППРРААВВЛЛЕЕННИИЕЕ РРЕЕЖЖИИММААММИИ РРААББООТТЫЫ ТТЕЕРРММИИННААЛЛАА

       ccrrmmooddee (), nnooccrrmmooddee ()
              Функция ccrrmmooddee устанавливает режим работы тер-
              минала,  в котором символ передается программе
              немедленно  после  ввода.   Функция   nnooccrrmmooddee
              отменяет этот режим - символы передаются прог-
              рамме только после ввода символа конца  строки
              <ВВКК>.

       eecchhoo (), nnooeecchhoo ()
              Функция nnooeecchhoo устанавливает режим работы тер-
              минала, в котором при вводе символы не отобра-
              жаются на экране. Функция eecchhoo  отменяет  этот
              режим.

       nnll (), nnoonnll ()
              Функция nnll устанавливает режим  работы  терми-
              нала,  в  котором при вводе/выводе символ '\n'
              <ППСС>  вызывает  перевод  в  начало   следующей


                            -1-                     ДЕМОС/PV


CURSES(3X)      ДЕМОС. Библиотечные функции       CURSES(3X)


              строки.  Функция  nnoonnll  устанавливает режим, в
              котором символ '\n' вызывает перевод в  ту  же
              позицию следующей строки.

       rraaww (), nnoorraaww ()
              Функция rraaww устанавливает режим работы  терми-
              нала  в кодах устройства.  Функция nnoorraaww уста-
              навливает режим работы терминала в коде КОИ-8.

       УУППРРААВВЛЛЕЕННИИЕЕ РРЕЕЖЖИИММААММИИ ВВЫЫВВООДДАА

       cclleeaarrookk (_w_i_n, _b_o_o_l_f)
              Если параметр _b_o_o_l_f не равен 0, то при  выводе
              окна  _w_i_n  на  экран  терминала  экран гасится
              командой стирания экрана. Этот режим действует
              только  на окна, равные по размеру экрану тер-
              минала (например, ssttddssccrr).  Режим  распростра-
              няется только на одну выдачу окна _w_i_n.

       lleeaavveeookk (_w_i_n, _b_o_o_l_f)
              Если параметр _b_o_o_l_f не равен 0, то при  выводе
              окна  _w_i_n  на экран терминала курсор терминала
              остается в позиции того символа, который выда-
              вался  последним.  Если _b_o_o_l_f равен нулю, кур-
              сор терминала после выдачи переводится в пози-
              цию текущего положения курсора окна _w_i_n с уче-
              том его положения относительно начала экрана.

       ssccrroollllookk (_w_i_n, _b_o_o_l_f)
              Если параметр _b_o_o_l_f не равен 0, то при  запол-
              нении окна _w_i_n происходит автоматический сдвиг
              на строку (режим SSCCRROOLLLL).   Если  _b_o_o_l_f  равен
              нулю,  режим SSCCRROOLLLL отменяется. При исчерпании
              окна _w_i_n будет фиксироваться ошибка вывода.

       УУППРРААВВЛЛЕЕННИИЕЕ ООККННААММИИ

       bbooxx (_w_i_n, _v_e_r_t, _h_o_r)
              Построить рамку по границам окна  _w_i_n.  Символ
              _v_e_r_t  используется для построения вертикальных
              сторон, символ _h_o_r - для горизонтальных.

       ddeellwwiinn (_w_i_n)
              Уничтожить окно _w_i_n.  Если _w_i_n является подок-
              ном, то оно просто исключается из списка подо-
              кон. Если _w_i_n - окно, то освобождается память,
              занимаемая  его  буфером,  и  уничтожаются все
              подокна, к нему относящиеся.

       eennddwwiinn ()
              Завершить работы с экраном терминала.  Восста-
              навливаются прежние режимы работы терминала.

       iinniittssccrr ()
              Начать работу с экраном терминала.  Происходит
              настройка  на  тип терминала и заводится стан-
              дартное окно ssttddssccrr.



                            -2-                     ДЕМОС/PV


CURSES(3X)      ДЕМОС. Библиотечные функции       CURSES(3X)


       nneewwwwiinn (_l_i_n_e_s, _c_o_l_s, _b_e_g_i_n__y, _b_e_g_i_n__x)
              Создать новое окно размерами  _l_i_n_e_s  строк  на
              _c_o_l_s  позиций.  Окно  располагается  начиная с
              позиции (_b_e_g_i_n__y, _b_e_g_i_n__x) относительно начала
              экрана.  Захватывается память под буфер окна.

       oovveerrllaayy (_w_i_n_1, _w_i_n_2)
              Наложить окно _w_i_n_2 на окно  _w_i_n_1.   Содержимое
              окна  _w_i_n_2 переписывается в окно _w_i_n_1, пробелы
              в окне _w_i_n_2  не  затирают  соответствующие  им
              символы  окна  _w_i_n_1.   Окна  могут быть разной
              величины, если _w_i_n_2 больше  _w_i_n_1,  переписыва-
              ется только часть окна _w_i_n_2.

       oovveerrwwrriittee (_w_i_n_1, _w_i_n_2)
              Переписать окно _w_i_n_2 в окно _w_i_n_1.   Аналогична
              функции  oovveerrllaayy,  только  пробелы  окна  _w_i_n_2
              затирают символы окна _w_i_n_1.

       ssccrroollll (_w_i_n)
              Сдвиг на строку в окне _w_i_n.  Эта функция авто-
              матически   вызывается  в  режиме  _S_C_R_O_L_L  при
              заполнении окна.

       ssuubbwwiinn (_w_i_n, _l_i_n_e_s, _c_o_l_s, _b_e_g_i_n__y, _b_e_g_i_n__x)
              Создать подокно для окна _w_i_n  размерами  _l_i_n_e_s
              строк  на _c_o_l_s позиций.  Подокно располагается
              начиная с позиции (_b_e_g_i_n__y,  _b_e_g_i_n__x)  относи-
              тельно  начала  экрана.   Память не захватыва-
              ется, используется буфер окна-родителя.  Любые
              изменения подокна относятся и к окну-родителю,
              и наоборот.

       ttoouucchhwwiinn (_w_i_n)
              Синхронизация изменений в подокнах окна _w_i_n.

       ВВВВООДД//ВВЫЫВВООДД

       aaddddcchh (_c_h), wwaaddddcchh (_w_i_n, _c_h)
              Выдать символ _c_h  в  текущие  координаты  окна
              ssttddssccrr (_w_i_n).

       aaddddssttrr (_s_t_r), wwaaddddssttrr (_w_i_n, _s_t_r)
              Выдать строку _s_t_r в  текущие  координаты  окна
              ssttddssccrr (win).

       ggeettcchh (), wwggeettcchh (_w_i_n)
              Получить символ из окна ssttddssccrr (_w_i_n),  начиная
              с текущих координат курсора данного окна.

       ggeettssttrr (_s_t_r), wwggeettssttrr (_w_i_n, _s_t_r)
              Получить строку  _s_t_r  из  окна  ssttddssccrr  (_w_i_n),
              начиная  с  текущих  координат курсора данного
              окна.

       ggeettyyxx (_w_i_n, _y, _x)
              Присвоить переменным _y, _x  текущие  координаты
              курсора окна _w_i_n.


                            -3-                     ДЕМОС/PV


CURSES(3X)      ДЕМОС. Библиотечные функции       CURSES(3X)


       iinncchh (), wwiinncchh (_w_i_n)
              Получить символ из текущей позиции окна ssttddssccrr
              (_w_i_n).   Символ не считывается с экрана терми-
              нала, а берется из буфера окна.

       mmoovvee (_y, _x), wwmmoovvee (_w_i_n, _y, _x)
              Переместить курсор окна ssttddssccrr (_w_i_n) в позицию
              (_y, _x).

       pprriinnttww (_f_m_t, _a_r_g_1, _a_r_g_2, ..., _a_r_g_N)
              Выдать значение параметров  _a_r_g_1-_a_r_g_N  в  окно
              ssttddssccrr  по  формату  _f_m_t.   Задание  формата и
              параметров  аналогичны  функции  _p_r_i_n_t_f   (см.
              _p_r_i_n_t_f(3s)).

       wwpprriinnttww (_w_i_n, _f_m_t, _a_r_g_1, _a_r_g_2, ..., _a_r_g_N)
              Аналогична pprriinnttww, но для указанного окна.

       rreeffrreesshh (), wwrreeffrreesshh (_w_i_n)
              Выдать окно ssttddssccrr (_w_i_n) на экран терминала.

       ssccaannww (_f_m_t, _a_r_g_1, _a_r_g_2, ..., _a_r_g_N)
              Ввод из окна ssttddssccrr  параметров  _a_r_g_1-_a_r_g_N  по
              формату  _f_m_t.   Задание  формата  и параметров
              аналогичны функции ssccaannff (см.  _s_c_a_n_f(3s)).

       wwssccaannww (_w_i_n, _f_m_t, _a_r_g_1, _a_r_g_2, ..., _a_r_g_N)
              Аналогична ssccaannww, но для указанного окна.

       ssttaannddeenndd (), wwssttaannddeenndd (_w_i_n)
              Установить режим выделения символов  для  окна
              ssttddssccrr  (_w_i_n).   В  этом режиме все выдаваемые
              символы, в зависимости от  возможностей  конк-
              ретного  терминала,  либо подчеркиваются, либо
              выдаются в инверсном изображении.

       ssttaannddoouutt (), wwssttaannddoouutt (_w_i_n)
              Отменить режим  выделения  символов  для  окна
              ssttddssccrr (_w_i_n).

       РРЕЕДДААККТТИИРРООВВААННИИЕЕ

       cclleeaarr (), wwcclleeaarr (_w_i_n)
              Очистить окно ssttddssccrr (_w_i_n).  Если  окно  равно
              по размерам экрану терминала, то при последую-
              щей выдаче экран терминала будет очищен коман-
              дой стирания экрана.

       ccllrrttoobboott (), wwccllrrttoobboott (_w_i_n)
              Стереть от текущей позиции курсора окна ssttddssccrr
              (_w_i_n) до конца окна.

       ccllrrttooeeooll (), wwccllrrttooeeooll (_w_i_n)
              Стереть от текущей позиции курсора окна ssttddssccrr
              (_w_i_n) до конца строки.

       ddeellcchh (), wwddeellcchh (_w_i_n)
              Удалить текущий символ в окне ssttddssccrr (_w_i_n).


                            -4-                     ДЕМОС/PV


CURSES(3X)      ДЕМОС. Библиотечные функции       CURSES(3X)


       ddeelleetteellnn (), wwddeelleetteellnn (_w_i_n)
              Удалить текущую строку в окне ssttddssccrr (_w_i_n).

       eerraassee (), wweerraassee (_w_i_n)
              Стереть окно ssttddssccrr (_w_i_n). В отличие от  cclleeaarr
              (wwcclleeaarr), просто заполняет буфер пробелами.

       iinnsscchh (), wwiinnsscchh (_w_i_n)
              Вставить символ в текущую позицию окна  ssttddssccrr
              (_w_i_n).

       iinnsseerrttllnn (), wwiinnsseerrttllnn (_w_i_n)
              Вставить строку в текущую позицию окна  ssttddssccrr
              (_w_i_n).

       ППООЛЛУУЧЧЕЕННИИЕЕ ХХААРРААККТТЕЕРРИИССТТИИКК ТТЕЕРРММИИННААЛЛАА

       ggeettccaapp (_n_a_m_e)
              Получить  значение  характеристики  _n_a_m_e   для
              текущего терминала.  Функция возвращает указа-
              тель на строку.

       lloonnggnnaammee(_t_e_r_m_b_u_f, _n_a_m_e)
              Занести в _n_a_m_e полное имя терминала.  Параметр
              _t_e_r_m_b_u_r   должен   содержать  полное  описание
              характеристик терминала и может быть получен с
              помощью функции ttggeetteenntt (см.  _t_e_r_m_c_a_p(3x))

       ППРРООЧЧЕЕЕЕ

       Перечисленные в этом разделе функции  являются  базо-
       выми  и  используются  подпрограммами  более высокого
       уровня. Однако,  их  можно  применять  автономно  для
       организации простой экранной работы.

       ssaavveettttyy (), rreesseettttyy ()
              Сохранить, восстановить режимы  работы  терми-
              нала.

       ggeettttmmooddee ()
              Настроить программу на  текущий  режим  работы
              терминала.

       sseetttteerrmm (_n_a_m_e)
              Настроить программу  на  работу  с  терминалом
              _n_a_m_e.

       mmvvccuurr (_l_a_s_t_y, _l_a_s_t_x, _n_e_w_y, _n_e_w_x)
              Переместить курсор из позиции  с  координатами
              (_l_a_s_t_y, _l_a_s_t_x) в позицию (_n_e_w_y, _n_e_w_x).

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
       _i_o_c_t_l(2), _g_e_t_e_n_v(3), _t_t_y(4), _t_e_r_m_c_a_p(5)

       Имеется отдельный документ по ccuurrsseess.





                            -5-                     ДЕМОС/PV

