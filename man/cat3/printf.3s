
PRINTF(3S)      ДЕМОС. Библиотечные функции       PRINTF(3S)


ИИММЯЯ
       pprriinnttff, ffpprriinnttff, sspprriinnttff, __ddoopprrnntt - форматный вывод.

ФФООРРММААТТ
       #iinncclluuddee <_s_t_d_i_o._h>

       pprriinnttff(_f_m_t [, _a_r_g] ...)
       cchhaarr *_f_m_t;

       ffpprriinnttff(_s_t_r_e_a_m, _f_m_t [, _a_r_g] ...)
       FFIILLEE *_s_t_r_e_a_m;
       cchhaarr *_f_m_t;

       sspprriinnttff(_s, _f_m_t [, _a_r_g] ...)
       cchhaarr *_s, *_f_m_t;

       #iinncclluuddee <_v_a_r_a_r_g_s._h>
       __ddoopprrnntt (_f_m_t, _a_r_g_s, _s_t_r_e_a_m)
       cchhaarr    *_f_m_t;
       vvaa__lliisstt *_a_r_g_s;
       FFIILLEE    *_s_t_r_e_a_m;

ООППИИССААННИИЕЕ
       Подпрограмма pprriinnttff выполняет преобразования  указан-
       ных  значений _a_r_g согласно заданной спецификации фор-
       мата _f_m_t и помещает результат своей  работы  в  стан-
       дартный файл вывода (ssttddoouutt).  Подпрограммы ffpprriinnttff и
       sspprriinnttff выполняют аналогичные действия, с той  разни-
       цей,  что  ffpprriinnttff  помещает результат в поток данных
       _s_t_r_e_a_m, а sspprriinnttff в текстовую строку, заданную  аргу-
       ментом  _s (строка завершается символом '\0').  Каждая
       из этих подпрограмм вызывает функцию __ddoopprrnntt, исполь-
       зуя  vvaarraarrggss(3s) для передачи переменного числа пара-
       метров.

       Все перечисленные подпрограммы преобразуют,  формати-
       руют  и "печатают" свои аргументы _a_r_g...  (начиная со
       второго) под  управлением  первого  аргумента  (_f_m_t).
       Первый аргумент представляет собой символьную строку,
       содержащую два типа объектов:  обыкновенные  символы,
       которые выдаются без изменений, и спецификации преоб-
       разования, которые управляют преобразованием и  выво-
       дом очередного аргумента.

       Каждая спецификация преобразования начинается с  сим-
       вола "%". Вслед за ним могут использоваться:

       - Знак "-", который соответствует левому выравниванию
         величины в указанном поле.

       - Цифровая строка,  определяющая  ширину  поля:  если
         преобразованная величина имеет меньше символов, чем
         ширина поля, то оно будет заполнено пробелами слева
         (или справа, если задан указатель левого выравнива-
         ния); если ширина поля  начинается  с  нуля,  будет
         произведено заполнение нулями, а не пробелами.

       - Точка ".", которая служит для разделения указателей


                            -1-                     ДЕМОС/PV


PRINTF(3S)      ДЕМОС. Библиотечные функции       PRINTF(3S)


         ширины поля и числа цифр дробной части.

       - Цифровая строка, определяющая точность (т.е.  число
         цифр  после  десятичной точки в спецификациях "ee" и
         "ff") или  максимальное  число  символов  печатаемой
         строки.

       - Символ "ll", указывающий, что следующие за ним  сим-
         волы  "dd",  "oo",  "xx"  или "uu" соответствуют целому
         числу с двойной точностью (аналогично работают спе-
         цификации  формата,  записанные с помощью прописных
         букв для форматов ddoouu,  т.е.  запись  "DD"   эквива-
         лентна "lldd").

       - Символ, указывающий тип  выполняемого  преобразова-
         ния.

       Ширина поля или точность могут вместо цифровой строки
       определяться  символом "*". В этом случае ширина поля
       или точность содержится в  целом  числе  в  аргументе
       _a_r_g.

       Ниже приведены символы типов преобразования и  объяс-
       нение смысла этих преобразований:

       ddooxx - Целое число _a_r_g преобразуется,  соответственно,
             в  десятичное  -  "dd",  восьмеричное  - "oo" или
             шестнадцатиричное - "xx" представление.

       XX   - Целое число выводится в шестнадцатиричном  фор-
             мате, как и по xx, но при цифре больше 9 исполь-
             зуются  не  строчные,  а  прописные   латинские
             буквы.

       ff   - Действительное число типа ffllooaatt или ddoouubbllee пре-
             образуется   для   печати   в  десятичном  виде
             "[--]ddd..ddd", число цифр после десятичной точки
             равно спецификации точности для аргумента. Если
             точность  опущена,  принимается  6  цифр;  если
             задана  точность  0,  не  печатается десятичная
             точка.

       ee   - Действительное число _a_r_g типа ffllooaatt или  ddoouubbllee
             преобразуется для печати в виде "[--]d..dddee_mdd",
             где перед  десятичной  точкой  печатается  одна
             цифра,  а  после  десятичной  точки  печатается
             столько цифр, сколько  указано  в  спецификации
             точности;  если  спецификация точности опущена,
             принимается шесть цифр (_m - это  знак  "+"  или
             "-").

       gg   - Действительное число _a_r_g типа ffllooaatt или  ddoouubbllee
             печатается  по формату "dd", "ff" или "ee" в зави-
             симости от того, какой формат дает нужную  точ-
             ность при минимальной ширине поля.

       cc   - Печатается символ _a_r_g.  Нулевые символы игнори-
             руются.


                            -2-                     ДЕМОС/PV


PRINTF(3S)      ДЕМОС. Библиотечные функции       PRINTF(3S)


       ss   - Считается, что _a_r_g  представляет  собой  строку
             (указатель на строку), при этом символы печата-
             ются до тех пор,  пока  не  встретится  нулевой
             символ  или не исчерпается количество символов,
             указанное в спецификации  точности;  если  точ-
             ность  равна 0 или опущена, печатаются все сим-
             волы до нулевого символа.

       uu   - Целое число без знака _a_r_g преобразуется в деся-
             тичное и печатается (результат будет находиться
             в диапазоне от 0 до MMAAXXUUIINNTT, где  MMAAXXUUIINNTT  наи-
             большее  целое  для данной вычислительной уста-
             новки (для машин типа СМ-4 это 65536).

       %   - Печатается "%".

       Ни в одном из случаев отсутствующая или малая  ширина
       поля  не  приводит  к  усечению поля. Заполнение поля
       (пробелами или нулями) выполняется только в том  слу-
       чае,  если  указанная  ширина поля превышает действи-
       тельную ширину. Символы, генерируемые pprriinnttff, печата-
       ются с помощью функции _p_u_t_c(3).

ППРРИИММЕЕРРЫЫ
       Для печати даты и времени в виде "3  июля,  понедель-
       ник,  10:02",  может  использоватся следующая функция
       pprriinnttff:

       pprriinnttff("%dd %ss, %ss, %02dd:%02dd\n",_d,_m_o,_w_d,_h,_m);

       где _w_d и _m_o  являются  указателями  на  завершающиеся
       нулевыми  символами  строки,  содержащие названия дня
       недели и месяца, соответственно.

       Для печати числа pi с точностью  до  пяти  десятичных
       цифр можно использовать следующую запись:

       pprriinnttff("pi = %.5ff\n", 4*aattaann(1.0));

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
       _p_u_t_c(3s), _s_c_a_n_f(3s), _e_c_v_t(3), _v_a_r_a_r_g_s(3s)

ЗЗААММЕЕЧЧААННИИЯЯ
       Нельзя использовать очень  широкие  поля  (свыше  128
       символов).















                            -3-                     ДЕМОС/PV

