



CCRREEAATTDDBB((ДДЕЕММООСС))      ССУУББДД РРУУББИИНН.. ККООММААННДДЫЫ ДДЕЕММООСС      CCRREEAATTDDBB((ДДЕЕММООСС))



ИИММЯЯ
     creatdb - создать базу данных

ФФООРРММААТТ
      ccrreeaattddbb [--dd_п_о_л_н_о_е__и_м_я__с_п_р_а_в_о_ч_н_и_к_а] [--uu_и_м_я] [--ee] [--mm]  [+-cc]
     [+-ll] [--FF] [+-qq] _и_м_я__б_д

ООППИИССААННИИЕЕ
     CCrreeaattddbb создает новую базу данных, или модифицирует  состоя-
     ние существующей базы данных.  Пользователь, выполняющий эту
     команду, становится администратором базы данных (DDBBAA).   DDBBAA
     имеет  особые полномочия, не предоставляемые обычным пользо-
     вателям.

     _И_м_я__б_д - имя базы данных, которая должна быть  создана.   По
     отношению  ко  всем пользователям имя РУБИН должно быть уни-
     кальным.  Независимо от размещения  самой  базы,  дальнейший
     доступ к ней будет осуществляться по имени _и_м_я__б_д

     База  данных  по   умолчанию   размещается   в   справочнике
     "{_H_O_M_E}//ddaattaa//bbaassee//_и_м_я__б_д",  где {_H_O_M_E} - "домашний" справоч-
     ник системы РРУУББИИНН , а _и_м_я__б_д - название базы данных.

     Флаг "--dd_п_о_л_н_о_е__и_м_я__с_п_р_а_в_о_ч_н_и_к_а"  позволяет  указать  нестан-
     дартное  размещение базы данных. В этом случае в справочнике
     ......//ddaattaa//bbaassee создается  файл  _и_м_я__б_д,  в  котором  записано
     действительное расположение базы данных - имя справочника из
     параметра -d... .  Справочник "_п_о_л_н_о_е__и_м_я__с_п_р_а_в_о_ч_н_и_к_а"  дол-
     жен существовать, быть доступным на запись пользователю "ru-
     bin" и быть пустым.

     Ключ --mm означает, что каталог ДЕМОС, в котором должна  нахо-
     диться база данных, уже создан.  Это необходимо только в том
     случае, если каталог представляет собой смонтированную  фай-
     ловую  систему, что может иметь место для очень большой базы
     данных.      Каталог      должен      существовать      (как
     ......//ddaattaa//bbaassee//_d_b_n_a_m_e),  иметь коды доступа 777 и должен быть
     пуст.

     Ключи +-cc и +-qq определяют режимы  базы  данных.   Форма  ++_x
     включает  режим,  а --_x ее отменяет.  Ключ --cc отключает схему
     параллельного управления (включена по умолчанию).   Ключ  --qq
     отключает модификатор запроса (подключен по умолчанию).

     Параллельное управление не следует отключать ни в коем  слу-
     чае,  за исключением баз данных, к которым  никогда не имеют
     доступа более, чем один  пользователь.  Это  применимо  даже
     если  пользователи не используют совместно отношения данных,
     хотя системные отношения  все  еще  совместно  используются.
     Если  в  ДЕМОС не установлена схема параллельного управления
     или если отсутствует специальный файл //ddeevv//lloocckk (при  работе


                              - 1 -








CCRREEAATTDDBB((ДДЕЕММООСС))      ССУУББДД РРУУББИИНН.. ККООММААННДДЫЫ ДДЕЕММООСС      CCRREEAATTDDBB((ДДЕЕММООСС))


     в  системах без механизма блокировки записей файла и без со-
     кетов) или к нему нельзя получить доступ для чтения/записи с
     помощью  РУБИН,  параллельное  управление действует так, как
     будто оно отключено (хотя, когда в ДЕМОС устанавливается пе-
     реключатель блокировки, оно немедленно подключается).

     Ключ +-ll включает/отключает защиту.

     Для обеспечения целостности и работы  виртуальных  подсистем
     должeн быть подключен модификатор запроса, однако, в некото-
     рых случаях при его подключении система будет работать  нес-
     колько  медленнее.  Можно включить модификатор запроса, если
     он отключен в существующей базе данных, но если он уже подк-
     лючен, то отключить его невозможно.

     Базы данных с отключенным модификатором запроса создают  но-
     вые  отношения  с доступом, разрешенным всем пользователям в
     отличие от предоставления права доступа только владельцу,  а
     для  баз  данных  с  модификатором запроса действует правило
     умолчания.

     Режимы работы баз данных для существующей базы данных  могут
     быть  изменены,  если установить ключ --ee,, База данных приво-
     дится в соответсвтие с ключами, задающими режим.  Например:

             creatdb -e +q mydb

     включает модификатор запроса для базы данных ``mydb'' (но не
     затрагивает параллельного управления).  Только администратор
     базы данных (DDBBAA) может использовать ключ --ee..

     Когда включен модификатор  запроса,  новые  отношения  будут
     создаваться без возможности доступа к ним, но доступ к ранее
     созданным отношениям будет разрешен для всех.  Для  исключе-
     ния этого глобального разрешения может быть использована ко-
     манда ddeessttrrooyy,, после которой с помощью команды ppeerrmmiitt  могут
     быть заданы более избирательные разрешения.

     Для идентификации различных DDBBAA суперпользователь РУБИН  мо-
     жет  использовать  ключ  --uu:: ключ должен следовать перед ре-
     гистрационным именем пользователя.

     У пользователя, выполняющего эту команду, должен быть  уста-
     новлен  бит  UU__CCRREEAATTDDBB  в  поле  состояний в регистрационном
     файле пользователей.

     Ключ --FF_p_a_t_h_n_a_m_e принуждает  использовать  указанный  файл  в
     качестве  временного  шаблона для создания базы данных. Ключ
     необходим только при отладке системы.





                              - 2 -








CCRREEAATTDDBB((ДДЕЕММООСС))      ССУУББДД РРУУББИИНН.. ККООММААННДДЫЫ ДДЕЕММООСС      CCRREEAATTDDBB((ДДЕЕММООСС))


ППРРИИММЕЕРР
      creatdb demo

      creatdb -ueric -q erics_db

      creatdb -e +q -c -u:av erics_db

      mkdir /mnt/users/BAZA
      chmod ug+rw BAZA
      creatdb -ualex -d/mnt/users/BAZA kadry


ФФААЙЙЛЛЫЫ
     .../files/dbtmplt
     .../data/base/*

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
     destroydb(демос), users(files), chmod(I), permit(quel)




































                              - 3 -








DDEESSTTRROOYYDDBB((ДДЕЕММООСС))    ССУУББДД РРУУББИИНН.. ККООММААННДДЫЫ ДДЕЕММООСС    DDEESSTTRROOYYDDBB((ДДЕЕММООСС))



ИИММЯЯ
     destroydb - уничтожить существующую базу данных.

ФФООРРММААТТ
      ddeessttrrooyyddbb [--ss] [--mm] _и_м_я__б_д

ООППИИССААННИИЕЕ
     DDeessttrrooyyddbb будет удалять все ссылки на существующую базу дан-
     ных.   Будет  удален  каталог базы данных и все файлы в этом
     каталоге.

     Для выполнения этой команды пользователь должен быть DDBBAA или
     суперпользователем  РУБИН,  суперпользователь должен устано-
     вить ключ --ss..

     Ключ --mm приводит к тому, что _d_e_s_t_r_o_y_d_b  не  удаляет  каталог
     ДЕМОС.  Это полезно, когда каталог является монтируемой фай-
     ловой системой ДЕМОС.

ППРРИИММЕЕРР
     destroydb demo
     destroydb -s erics_db

ФФААЙЙЛЛЫЫ
     .../data/base/*

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
     creatdb(демос)

























                              - 1 -








EEQQUUEELL((ДДЕЕММООСС))        ССУУББДД РРУУББИИНН.. ККООММААННДДЫЫ ДДЕЕММООСС        EEQQUUEELL((ДДЕЕММООСС))



ИИММЯЯ
     equel - встроенный в язык C интерфейс с QUEL

ФФООРРММААТТ
      eeqquueell [--dd] [--ff] [--rr] _f_i_l_e..qq ...

ООППИИССААННИИЕЕ
     EEqquueell предоставляет пользователю возможности сопряжения уни-
     версального  языка  программирования ``CC'' с РУБИН, при этом
     используется препроцессор и библиотека EQUEL.

     ККооммппиилляяцциияя

     Общая форма вызова препроцессора:

          eeqquueell [<_к_л_ю_ч_и>] _ф_а_й_л_1..qq [<_к_л_ю_ч_и>] _ф_а_й_л_2..qq ...

     где ``_ф_а_й_л_n..qq'''' ээттоо ииммееннаа ииссххоодднныыхх  ффааййллоовв,,  ккооттооррыыее  ддооллжжнныы
     ззааккааннччииввааттььссяя  ..qq..   ВВыыххооддннааяя  ииннффооррммаацциияя  ппооммеещщааееттссяя вв ффааййлл
     ````_f_i_l_e_n..cc''.  При вызове можно  задавать  любое  необходимое
     число файлов.
     Имеются следующие ключи:

     --dd   Генерировать программу с печатью имени исходного  файла
          и номером строки в которой допущена ошибка во время вы-
          полнения программы. Это может  оказаться  полезным  при
          отладке,  но  требует  дополнительной  памяти процессу.
          Умолчания отключены.

     --ff   Разместить получившуюся C-программу в выходном файле, в
          тех  же  строках,  что и во входном файле. Это помогает
          интерпретировать  диагностические  сообщения  языка  C.
          EQUEL будет, как правило пытаться разместить все строки
          с C-операторами в выходном файле на тех же строках,  на
          которых  они  находились  во входном файле.  Иногда, во
          избежание переполнения строк в CC-препроцессоре,  запрос
          может  быть разбит на несколько строк; возможно переме-
          щение некоторых CC-операторов вперед на несколько строк.
          Если  задан ключ --ff - этого никогда не произойдет, хотя
          буфер строк может переполняться, строки с CC-операторами
          будут  находиться  на  прежних местах.  Это полезно для
          нахождения строки в исходном файле, на  которую  ссыла-
          ется  диагностическое  сообщение  CC-компилятора в соот-
          ветствующем выходном файле.

     --rr   Сбрасывает значение ключей, устанавливая значения, при-
          нимаемые  ими по умолчанию.  Используется для погашения
          действия других ключей на некоторые файлы, указанные  в
          списке аргументов.

     Затем   преобразованные   EQUEL   файлы   компилируются   C-


                              - 1 -








EEQQUUEELL((ДДЕЕММООСС))        ССУУББДД РРУУББИИНН.. ККООММААННДДЫЫ ДДЕЕММООСС        EEQQUUEELL((ДДЕЕММООСС))


     компилятором:

          cccc _f_i_l_e_1..cc _f_i_l_e_2..cc ...  --llqq

     --llqq показывает на необходимость использования об'ектной биб-
     лиотеки EQUEL.

     Все глобальные имена, стандартные программы EQUEL начинаются
     с  символов "IIII" и поэтому все глобальные переменные и имена
     процедур вида IIII_x_x_x резервируются для использования EQUEL  и
     их не следует применять пользователям EQUEL.


ССММ..ТТААККЖЖЕЕ
      "ППррооггррааммммииррооввааннииее ннаа яяззыыккее EEQQUUEELL", в документации по Рубин,
      "ССппррааввооччннооее ррууккооввооддссттввоо ппоо яяззыыккуу CC", в документации  по  ОС
     ДЕМОС,
      Equel(quel), в данном руководстве,
      Quel(QUEL),  в данном руководстве.

ООШШИИББККИИ

     Включение EQUEL-файла оператором ##iinncclluuddee  в  параметризиро-
     ванный целевой список или в скобки с индексами массива пере-
     менных CC производится неправильно.

ППРРИИММЕЕРРЫЫ
     Примеры программ на языке EQUEL приведены в справочнике  Ex-
     amples: equeldemo.q - простой пример, equeltut.q - комплекс-
     ный пример, содержащий подробные комментарии.
























                              - 2 -








HHEELLPPRR((ДДЕЕММООСС))        ССУУББДД РРУУББИИНН.. ККООММААННДДЫЫ ДДЕЕММООСС        HHEELLPPRR((ДДЕЕММООСС))



ИИММЯЯ
     helpr - получить информацию о базе данных.

ФФООРРММААТТ
      hheellpprr [--uu_и_м_я] [+-ww] _б_а_з_а__д_а_н_н_ы_х [_р_е_ж_и_м] _о_т_н_о_ш_е_н_и_е ...

ООППИИССААННИИЕЕ
     hheellpprr выдает информацию о поименованном отношении  вне  ука-
     занной базы данных, точно так же, как это делает команда

     Воспринимаемые ключи: --uu и ++--ww..  Их значения идентичны  зна-
     чениям тех же самых ключей в РУБИН.

     _р_е_ж_и_м - ключевое слово, которое уточняет формат выдачи.  Это
     может быть одно из следующих слов:

     sshhoorrtt -  Предоставляет в  компактной  форме  информацию  обо
     всех  отношениях,  которые существуют в текущей базе данных,
     кроме системных.

     mmyy -  Предоставляет информацию обо  всех  личных  отношениях
     данного пользователя, которые существуют в текущей базе дан-
     ных.

     rreeaall -  Предоставляет информацию  обо  всех  регулярных  (не
     VIEW  или  INDEX)  отношениях,  которые существуют в текущей
     базе данных, кроме системных.


ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ""
     rubin(демос), help(quel)






















                              - 1 -








PPRRIINNTTRR((ДДЕЕММООСС))       ССУУББДД РРУУББИИНН.. ККООММААННДДЫЫ ДДЕЕММООСС       PPRRIINNTTRR((ДДЕЕММООСС))



ИИММЯЯ
     printr - печатать отношение

ФФООРРММААТТ
      pprriinnttrr [_к_л_ю_ч_и] _б_а_з_а__д_а_н_н_ы_х _о_т_н_о_ш_е_н_и_е ...

ООППИИССААННИИЕЕ
     pprriinnttrr печатает  поименованное  отношение(я)  вне  указанной
     базы  данных, точно так же, как команда pprriinntt..  Для выполне-
     ния этой команды пользователь  должен  иметь  право  выборки
     данных из указанных отношений.

     Для печати большого отношения можно выдавать заголовок отно-
     шения  (имена  доменов  в  отношении)  на  каждом печатаемом
     листе. Эта возможность обеспечивается  использованием  ключа
     --hh.  Для печати отношения без предварительного заголовка ис-
     пользуется ключ --ss.

     Командой pprriinnttrr воспринимаются ключи: --uu,, --cc,, --ii,, --ff,, и  --vv..
     Их значения идентичны значениям таких же ключей в РУБИН.

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
     rubin(демос), print(quel)






























                              - 1 -








PPUURRGGEE((ДДЕЕММООСС))        ССУУББДД РРУУББИИНН.. ККООММААННДДЫЫ ДДЕЕММООСС        PPUURRGGEE((ДДЕЕММООСС))



ИИММЯЯ
     purge - разрушает все устаревшие отношения и  все  временные
     отношения.

ФФООРРММААТТ
      purge [-f] [-p] [-a] [-s] [ база_данных ... ]

ООППИИССААННИИЕЕ
     PPuurrggee ищет и стирает в поименованных базах данных  системные
     временные  отношения.  Когда используется ключ --pp,, осуществ-
     ляется стирание устаревших отношений.  Ключ --ff вызывает сти-
     рание  нераспознаваемых файлов, обычно ppuurrggee просто сообщает
     об этих файлах.

     Только администратор базы данных (DDBBAA) может выполнять  опе-
     рацию  удаления,  исключая  суперпользователя РУБИН, который
     может чистить любую базу данных при помощи ключа --ss..

     Если база данных не указана, то очищаются  все  базы  данных
     для  которых вы являетесь DBA.  Если суперпользователь РУБИН
     указал ключ --ss,, очищаются все базы данных.  Ключ --aa вызывает
     чистку в интерактивном перед каждой операцией над базой зап-
     рашивается разрешение на эту операцию.

     PPuurrggee будет блокировать базу данных на время  ее  обработки,
     т.к.  если во время выполнения чистки, база данных будет ис-
     пользоваться, могут произойти ошибки.  Если база данных  за-
     нята,  ppuurrggee сообщит об этом и перейдет к другой, если такая
     имеется.  Если стандартный ввод  не  терминал,  _p_u_r_g_e  будет
     ждать, пока база данных не освободится.

ППРРИИММЕЕРРЫЫ
     purge -p +w tempdata
     purge -a -f

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
     save(quel), restore(демос)
















                              - 1 -








RREESSTTOORREE((ДДЕЕММООСС))      ССУУББДД РРУУББИИНН.. ККООММААННДДЫЫ ДДЕЕММООСС      RREESSTTOORREE((ДДЕЕММООСС))



ИИММЯЯ
     restore - восстановление даных после сбоя
      РУБИН или ДЕМОС.

ФФООРРММААТТ
     rreessttoorree [ --aa ] [ --ss ] [ ++--ww ] [ база_данных ... ]

ООППИИССААННИИЕЕ
     _R_e_s_t_o_r_e используется для восстановления  базы  данных  после
     сбоя  РУБИН  или ДЕМОС.  Она всегда должна исполняться после
     ненормального завершения работы, чтобы гарантировать целост-
     ность базы данных.

     Чтобы иметь право выполнять restore, вы должны быть DBA базы
     данных, которую вы восстанавливаете, или быть суперпользова-
     телем РУБИН и указывать ключ --ss..

     Если не указано ни одной базы данных,  то  восстанавливаются
     все  базы данных, для которых вы являетесь DBA.  Если супер-
     пользователь РУБИН указал ключ  --ss,,  то  будут  восстанавли-
     ваться все базы данных.

     Если указан ключ --aa,, то перед тем, как предпринимать  какие-
     либо  серьезные  шаги по восстановлению базы данных, restore
     будет просить вашего согласия.  Весьма полезно  использовать
     этот ключ, если вы подозреваете, что база данных находится в
     плачевном состоянии.  Если вы укажете ключ --aa и  в  качестве
     стандартного ввода используете /dev/null, то получите список
     нарушений структуры базы данных.  Если при восстановлении не
     было  обнаружено  никаких ошибок, то для удаления ненужных и
     временных файлов будет вызвана _p_u_r_g_e с теми же ключами,  что
     и  у _r_e_s_t_o_r_e.  _R_e_s_t_o_r_e можно запускать с ключами --ff и/или --pp
     для дальнейшей передачи их _p_u_r_g_e.  Неопознанные файлы и  от-
     ношения  с  истекшим  сроком  хранения не удаляются, если не
     указаны соответствующие ключи.  Если восстановление произво-
     дится после не доработавших до конца destroy, create или in-
     dex, _r_e_s_t_o_r_e не  уничтажает  файлы  частично  созданных  или
     уничтоженных  отношений.   Для  доведения  этих  действий до
     конца, необходимо запустить _p_u_r_g_e с ключем --ff..

     _R_e_s_t_o_r_e блокирует базу данных во время ее  обработки.   Если
     база  данных  уже блокирована, _r_e_s_t_o_r_e сообщит об этом и пе-
     рейдет к следующей.  Если же стандартным вводом не  является
     терминал,  _r_e_s_t_o_r_e  дождется, когда база данных освободится.
     Если указан ключ --ww,, _r_e_s_t_o_r_e не будет  ждать  независимо  от
     того,  что является стандартным вводом.  С ключем ++ww _r_e_s_t_o_r_e
     в любом случае будет ждать.

     _R_e_s_t_o_r_e может восстанавливать базу данных после  команд  об-
     новления,  которые закончили заполнение файла отложенных из-
     менений.  Команда обновления, которая  не  выполнила  этого,


                              - 1 -








RREESSTTOORREE((ДДЕЕММООСС))      ССУУББДД РРУУББИИНН.. ККООММААННДДЫЫ ДДЕЕММООСС      RREESSTTOORREE((ДДЕЕММООСС))


     перезапускается.   Так же modifiy, которая закончила перест-
     ройку отношения, будет нормально завершена .  (отношение re-
     lation и отношение attribute будут обновлены).  Если destroy
     была зарегистрирована, она будет доведена до  завершения,  а
     действия create почти всегда будут прекращены.  При разруше-
     нии отношения с индексом, должен разрушаться и  индекс,  так
     что  _r_e_s_t_o_r_e  может  сообщить,  что вторичное отношение было
     найдено при отсутствии первичного.

     Если регистрируется прерывание (сигнал 2), текущая база дан-
     ных  закрывается  и  обрабатывается  следующая, если таковая
     имеется.  _Q_u_i_t (signal 3) вызывает окончание восстановления.

ППРРИИММЕЕРР
     restore -f demo
     restore -a grants < /dev/null

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
     purge(демос)

ООШШИИББККИИ
     Если не заданы имена баз данных, восстанавливаются только те
     базы данных, которые размещены в каталоге ddaattaa//bbaassee,, не ста-
     рые базы данных в ddaattaaddiirr..  Явные имена баз данных  все  еще
     применимы для баз данных в любом каталоге.





























                              - 2 -








RRUUBBIINN((ДДЕЕММООСС))        ССУУББДД РРУУББИИНН.. ККООММААННДДЫЫ ДДЕЕММООСС        RRUUBBIINN((ДДЕЕММООСС))



ИИММЯЯ
     rubin - система управления реляционной базой данных РУБИН.

ФФООРРММААТТ
     rruubbiinn [ _к_л_ю_ч_и ] имя_бд [ таблица_процессов ]

ООППИИССААННИИЕЕ
     Для вызова РУБИН используется команда ДЕМОС.  Имя_бд  -  это
     имя  существующей  базы  данных.  Необязательные ключи имеют
     следующие значения: (``+-'' означает, что может  быть  уста-
     новлен  ключ ``+_x'' для подключения возможности _x или ``-_x''
     для исключения _x.  Просто ``-'' означает,  что  должен  быть
     установлен ``-_x'' для получения функции _x.

     +-U       Позволяет/не позволяет непосредственное обновление
               системных  отношений  и  вторичных  индексов.  Для
               того, чтобы этот ключ можно было использовать,  вы
               должны  установить  бит  000004 в поле состояний в
               регистрационном файле пользователей.   Этот  режим
               предусматривается  для  отладки системы и сразу же
               отменяется при нормальном режиме использования.
     -uимя     Назначает Вас пользователем с регистрационным име-
               нем _и_м_я (найденным в регистрационном файле).  Если
               _и_м_я имеет вид ::_x_x, то _x_x двухсимвольный код, обоз-
               начающий  пользователя.   Такую  возможность может
               использовать только администратор базы данных  или
               суперпользователей РУБИН.
     -cN       Установить минимальную ширину поля для печати сим-
               вольных доменов равной _N.  Значение по умолчанию -
               6.
     -ilN      Установить ширину поля для целых  значений  равной
               _N.   _l  Может  быть  1, 2, или 4 для i1, i2 или i4
               соответственно.
     -flxM.N   Установить ширину поля выходных значений с плаваю-
               щей  точкой  равное _M символам с _N символами после
               запятой.  _l может быть равно 4 или 8 при f4 или f8
               соответственно.   Для указания выходного формата _x
               может принимать значения: ee,, EE,, ff,, FF,, gg,, GG,, nn,, или
               NN..   EE  означает экспоненциальную форму, FF форму с
               плавающей точкой а GG и NN идентичны FF,, если  только
               число  не  слишком большое для данного поля, когда
               его выходной результат представлен  в  формате  EE..
               Формат GG выравнивает значения по десятичной точке;
               а NN - нет.  Формат для них будет следующим: nn1100..33..
     -d"XXX"   Установить шаблон преобразования даты по умолчанию
               равным _X_X_X.  Шаблоны описаны в ddaattee((QQUUEELL)).
     -t"XXX"   Установить шаблон преобразования времени по  умол-
               чанию равным _X_X_X.  Шаблоны описаны в ddaattee((QQUUEELL)).
     -vX       Установить разделитель колонок при выдаче на  тер-
               минал  равныm  _X.   Значение по умолчанию - верти-
               кальная черта.


                              - 1 -








RRUUBBIINN((ДДЕЕММООСС))        ССУУББДД РРУУББИИНН.. ККООММААННДДЫЫ ДДЕЕММООСС        RRUUBBIINN((ДДЕЕММООСС))


     -rM       Установить режим модификации  в  команде  _r_e_t_r_i_e_v_e
               равным  _M.  _M может быть iissaamm,, cciissaamm,, hhaasshh,, sshhaasshh,,
               cchhaasshh,, ccsshhaasshh,, hheeaapp,, cchheeaapp,, hheeaappssoorrtt,,  или  cchheeaapp--
               ssoorrtt,,  для ISAM, сжатого ISAM, хэш-таблиц, плотных
               хэш-таблиц,  сжатых  хэш-таблиц,  сжатых   плотных
               хэш-таблиц,  структуры  "куча", сжатая "куча", от-
               сортированной структуры "куча" или сжатой отсорти-
               рованной  структуры "куча".  Значение по умолчанию
               ``cheapsort''.
     -nM       Установить режим модификации в команде _r_e_t_r_i_e_v_e  и
               _i_n_d_e_x равным _M.  _M может принимать те же значения,
               что и ключ --rr описанный выше.  Значение по умолча-
               нию будет  ``cheapsort'' и ``isam''.
     +-a       Установить/отключить автоочистку буфера запросов в
               терминальном мониторе.  По умолчанию установлен.
     +-b       Установить/отключить  отложенные  изменения.   Для
               того, чтобы убрать этот ключ, в поле состояния ре-
               гистрационного файла пользователь  должен  устано-
               вить  бит  000002.   Этот  ключ обычно установлен.
               Если он не установлен, то запросы выполняются нес-
               колько  быстрее,  но  тогда невозможно производить
               восстановление.   Запросы,  которые  автоматически
               обновляют  вторичный  индекс,  устанавливают  этот
               ключ только для данного запроса.
     +-d       Печатать/не печатать dayfile.   Обычно  этот  ключ
               установлен.
     +-s       Печатать/не печатать любое из сообщений  монитора,
               включая  подсказки.   Этот ключ обычно установлен.
               Если нет, то также аннулируется ключ --dd..
     +-w       Ждать/не ждать базу данных.   Если  ключ  ++ww  при-
               сутствует,  РУБИН  будет ждать окончания процессов
               (purge,restore, или/и sysmod).   После  завершения
               этих  процессов РУБИН продолжит работу.  Если при-
               сутствует ключ --ww,, выдается сообщение, и если базы
               данных  нет  в  наличии, выполнение заканчивается.
               Если ключ ++--ww отсутствует и базы данных в  наличии
               не  имеется,  сообщение  об  ошибке выдается в том
               случае, если  РУБИН прогоняется с высоким  приори-
               тетом  (точнее, если стандартный ввод производится
               с терминала), в противном случае вызывается  режим
               ожидания.
     -U        разрешить/не разрешить обновления системных  отно-
               шений.   По умолчанию не разрешено. Для проведения
               таких действий необходимо установить бит 04 в  ре-
               гистрационном файле пользователей.

     _Т_а_б_л_и_ц_а__п_р_о_ц_е_с_с_о_в - полное имя файла  ДЕМОС,  который  может
     быть  использован  для  определения конфигурации РУБИН.  Эта
     возможность предназначена для использования только при  обс-
     луживании  системы,  и  ее неквалифицированное использование
     пользователями может внести значительные искажения.



                              - 2 -








RRUUBBIINN((ДДЕЕММООСС))        ССУУББДД РРУУББИИНН.. ККООММААННДДЫЫ ДДЕЕММООСС        RRUUBBIINN((ДДЕЕММООСС))


     Замечание: можно прогнать монитор как интерфейс пакетной об-
     работки  при  помощи  операторов  `<',  `>' и `|' командного
     языка ДЕМОС, обеспечивая приведение входного файла  в  соот-
     ветствующий формат монитора.

ППРРИИММЕЕРР
     rubin demo
     rubin -d demo
     rubin -s demo < batchfile
     rubin -f4g12.2 -i13 +b -rhash demo

ФФААЙЙЛЛЫЫ
     .../files/users - регистрационный файл пользователей РУБИН
     .../data/base/* - база данных
     .../files/proctab[40,70] - файл конфигурации во время выпол-
     нения

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
     monitor(quel)



































                              - 3 -








SSYYSSMMOODD((ДДЕЕММООСС))       ССУУББДД РРУУББИИНН.. ККООММААННДДЫЫ ДДЕЕММООСС       SSYYSSMMOODD((ДДЕЕММООСС))



ИИММЯЯ
     sysmod - модифицировать системные отношения для заранее  оп-
     ределенных структур памяти.

ФФООРРММААТТ
     ssyyssmmoodd [ --ss ] [ --ww ] имя_бд [ ооттнноошшееннииее ] [  aattttrriibbuuttee  ]  [
     iinnddeexxeess ] [ ttrreeee ] [ pprrootteecctt ] [ iinntteeggrriittiieess ]

ООППИИССААННИИЕЕ
     _S_y_s_m_o_d преобразует (хэширует) системные отношения  relation,
     attribute,  indexes, tree, protect, и integrities.  Если па-
     раметры не указаны, то хэшируются все эти отношения, в  про-
     тивном  случае  обрабатываются  только  указанные отношения.
     Системные отношения модифицируются для достижения максималь-
     ной  эффективности доступа при работе в РУБИН.  Пользователь
     должен быть администратором текущей базы данных  или  супер-
     пользователем РУБИН с установленным ключем --ss..

     _S_y_s_m_o_d будет запущена первый раз при создании базы данных  и
     затем периодически используется для обеспечения максимальной
     эффективности.  Если создается и/или разрушается много отно-
     шений и вторичных индексов, _s_y_s_m_o_d должна запускаться чаще.

     Если база данных используется во время работы  _s_y_s_m_o_d,  воз-
     можны ошибки.  Поэтому, _s_y_s_m_o_d будет блокировать базу данных
     на время ее обработки.  Если база данных занята, _s_y_s_m_o_d  со-
     общает  об этом.  Если стандартный ввод не является термина-
     лом, _s_y_s_m_o_d будет ждать, пока база  данных  не  освободится.
     Если установлен ключ --ww,, то _s_y_s_m_o_d ждать не будет независимо
     от направления стандартного ввода.  Ключ  ++ww  означает,  что
     _s_y_s_m_o_d всегда ждет.

     Ключем хэширования отношения relаtion является первый домен,
     отношений  indexes, attribute, protect, и integrities - пер-
     вые два домена, отношенния tree - домены один, два  и  пять.
     Для отношения relation и attribute установлено значение min-
     pages равным 10, для отношений indexes, protect  и  integri-
     ties установлено значение minpages равным 5.

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
     modify(quel)












                              - 1 -








UUSSEERRSSEETTUUPP((ДДЕЕММООСС))    ССУУББДД РРУУББИИНН.. ККООММААННДДЫЫ ДДЕЕММООСС    UUSSEERRSSEETTUUPP((ДДЕЕММООСС))



ИИММЯЯ
     usersetup - установить регистрационный файл пользователей

ФФООРРММААТТ
     ......//bbiinn//uusseerrsseettuupp [ полное_имя_каталога ]

ООППИИССААННИИЕЕ
     Файл //eettcc//ppaasssswwdd считываются, переформатируются с целью пре-
     образования   в   файл   пользователей  РУБИН  хранящийся  в
     ......//ffiilleess//uusseerrss..  Если указано _п_о_л_н_о_е__и_м_я__к_а_т_а_л_о_г_а, оно  за-
     меняет ``...''.  Если это имя начинается с ``--'', то резуль-
     тат выводится на стандартный вывод.

     Идентификаторы имени пользователя, пользователя, группы ини-
     циализируются  так, чтобы они были идентичны соответствующей
     записи в файле //eettcc//ppaasssswwdd..   Полю  состояния  присваивается
     начальное значение 000 0001, за исключением пользователя rruu--
     bbiinn,, для которого устанавливаются все биты разрешений.  Если
     задается параметр _s_t_a_t_u_s, то в поле устанавливается его зна-
     чение.  Параметр ``initialization file'' помещается в  файле
     ..rruubbiinn  в домашнем каталоге пользователя.  В поле кода поль-
     зователя  устанавливается  последовательный   двухсимвольный
     код.  Все остальные поля инициализируются нулями.

     После выполнения _u_s_e_r_s_e_t_u_p, файл uusseerrss должен быть  отредак-
     тирован.   У всех пользователей, которые должны иметь специ-
     альные разрешения, необходимо изменить поле состояния в  со-
     ответствии  со  спецификациями  в файлах пользователей.  Для
     того, чтобы исключить пользователя из работы с РУБИН,  нужно
     целиком удалить строку в регистрационном файле.

     По мере того, как пользователи ДЕМОС добавляются или  исклю-
     чаются  из  файла //eettcc//ppaasssswwdd,, необходимо редактировать файл
     uusseerrss..  Для исключенных пользователей нужно  просто  стереть
     строку,  соответствующую данному пользователю в файле uusseerrss..
     При заведении нового пользователя, вы должны  присвоить  ему
     код   в  форме  "aa"  и ввести строку в файл пользователей в
     форме:

     имя:код:uid:gid:статус:ключи:табпроц:иницфайл::базы_данных

     где _и_м_я это имя пользователя (взятое из первого  поля  файла
     //eettcc//ppaasssswwdd  из  записи  об этом пользователе), _к_о_д это код,
     присваиваемый пользователю, который должен быть длиной точно
     в два символа, и не должен совпадать ни с одним из существу-
     ющих кодов пользователей, _u_i_d и _g_i_d идентификаторы пользова-
     теля  и  группы (взятые из третьего и четвертого полей файла
     //eettcc//ppaasssswwdd соответствующей записи), _с_т_а_т_у_с это биты состоя-
     ний  для этого пользователя, обычно 000 000, _к_л_ю_ч_и ключи РУ-
     БИН, заданные по умолчанию, _т_а_б_п_р_о_ц это  таблица  процессов,
     заданная  по  умолчанию  для этого пользователя (значение по


                              - 1 -








UUSSEERRSSEETTUUPP((ДДЕЕММООСС))    ССУУББДД РРУУББИИНН.. ККООММААННДДЫЫ ДДЕЕММООСС    UUSSEERRSSEETTUUPP((ДДЕЕММООСС))


     умолчанию ==pprrooccttaabb), и _б_а_з_ы__д_а_н_н_ы_х список баз данных, в  ко-
     торые  этот  пользователь  имеет  доступ.  Если он пуст - то
     пользователю доступны все базы данных.  Если  первый  символ
     тире  (``-''),  то список имен баз данных, разделенных запя-
     тыми, указывает те базы данных, к которым доступ  не  разре-
     шен.  В противном случае это список баз данных, доступ к ко-
     торым разрешен.

     Поле _б_а_з_ы__д_а_н_н_ы_х включает имена баз  данных,  которые  могут
     быть созданы.

     _U_s_e_r_s_e_t_u_p может выполняться только один раз для первоначаль-
     ного создания файла uusseerrss..

ФФААЙЙЛЛЫЫ
     .../files/users
     /etc/passwd

ДДООППООЛЛННИИТТЕЕЛЛЬЬННЫЫЕЕ ССССЫЫЛЛККИИ
     rubin(демос), passwd(V), users(files)

ООШШИИББККИИ
     Должна иметься возможность сохранять файл uusseerrss  до  опреде-
     ленного времени.






























                              - 2 -




