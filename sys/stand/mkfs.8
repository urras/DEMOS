


MKFS(8)        ОС ДЕМОС. Сопровождение системы         MKFS(8)



ИМЯ
     mkfs - создать файловую систему.

ФОРМАТ
     /etc/mkfs  спецф  прото [ m n [ x ] ]
     /etc/mkfs  спецф  длина [ x ]

ОПИСАНИЕ
     Команда mkfs конструирует файловую систему путем записи в
     специальный файл "спецф" в соответствии с указаниями, со-
     держащимися в файле прототипа "прото" (первый вариант вы-
     зова),  либо  в  соотвестсвии  с умолчанииями для системы
     длиной "длина" (второй вариант). Дополнительные параметры
     задают  информацию  для  оптимизации  обменов  и  режим с
     отбраковкой плохих блоков.

     Файл прототипа содержит элементы,  разделенные  пробелами
     или  символами  новой строки. Первый элемент представляет
     собой имя файла, который должен быть скопирован в нулевой
     блок в качестве программы начальной загрузки. Второй эле-
     мент представляет собой число, определяющее размер созда-
     ваемой файловой системы. Обычно оно равно количеству бло-
     ков на  устройстве,  возможно  уменьшенному  на  величину
     пространства для подкачки. Следующий элемент представляет
     собой количество I-узлов в I-списке. Следующий набор эле-
     ментов  составляет спецификацию корневого файла. Специфи-
     кации файлов состоят  из  элементов,  указывающих  режим,
     идентификацию  пользователя,  идентификацию  группы и на-
     чальное содержимое файла. Синтаксис поля содержимого  за-
     висит от режима.

     Элемент режима для файла представляет собой  6-символьную
     строку.  Первый символ определяет тип файла (символы "-",
     "b", "c" и "d" определяют соответственно простые,  специ-
     альные  блочные, специальные символьные файлы и файлы ка-
     талогов). Вторым символом является либо  "u",  либо  "-",
     что задает режим установки идентификации пользователя или
     нет. Третим символом является "g" или "-" для режима  ус-
     тановки  идентификации  группы.  Остальная  часть  режима
     представляет собой трехзначное восьмеричное число, указы-
     вающее  полномочия  чтения,  записи и выполнения для вла-
     дельца, группы и прочих пользователей, см. chmod.

     После режима следуют два элемента, являющихся десятичными
     числами;  они задают идентификаторы пользователя и группы
     для владельца файла.

     Если файл является обычным  файлом,  следующим  элементом
     является имя пути, откуда копируется содержимое и размер.

     Если файл является  блочным  или  символьным  специальным
     файлом,  следующими  элементами  являются  два десятичных



Отпечатано 26.9.85           -1-                         ДЕМОС






MKFS(8)        ОС ДЕМОС. Сопровождение системы         MKFS(8)



     числа, которые задают  основной  и  дополнительный  номер
     устройства.

     Если файл является каталогом, mkfs создает  входы  "."  и
     "..",  после  чего  считывает  список имен и (рекурсивно)
     спецификаций файлов для входов каталога. Просмотр  завер-
     шается элементом "$".

     Если файл прототипа не может быть открыт, а его имя  сос-
     тоит из строки цифр, mkfs строит файловую систему с одним
     пустым каталогом. Размером файловой системы является зна-
     чение  параметра "прото", интерпретируемое как десятичное
     число количество I-узлов вычисляется как функция  размера
     файловой системы. Программа загрузки остается неинициали-
     зированной.

     В режиме отбраковки плохих блоков mkfs осуществляет  счи-
     тывание  всех  блоков  диска  и  те блоки, чтение которых
     прошло с ошибкой, исключает из файловой системы, приписы-
     вая из индексномму узлу с номером 1. "m" и "n" задают шаг
     свободных блоков и число блоков на цилиндр на диске,  что
     используется  для  оптимизации обмена. По умолчанию m/n =
     5/22.

ДОПОЛНИТЕЛЬНЫЕ ССЫЛКИ
     filsys(5), dir(5)





























Отпечатано 26.9.85           -2-                         ДЕМОС



